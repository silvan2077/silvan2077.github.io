<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Silvan's BlogğŸ³ | Silvan's BlogğŸ³</title><meta name="author" content="SilvanğŸ³"><meta name="copyright" content="SilvanğŸ³"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="MyBatiså…¥é—¨  MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œç”¨äºç®€åŒ– JDBC å¼€å‘ MyBatis æœ¬æ˜¯ Apache çš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°Github å®˜ç½‘ï¼šhttps:&#x2F;&#x2F;mybatis.org&#x2F;mybatis-3&#x2F;zh_CN"><meta property="og:type" content="article"><meta property="og:title" content="Silvan&#39;s BlogğŸ³"><meta property="og:url" content="https://silvan.chat/2025/10/28/SSM-%E9%BB%91%E9%A9%AC-Mybatis/index.html"><meta property="og:site_name" content="Silvan&#39;s BlogğŸ³"><meta property="og:description" content="MyBatiså…¥é—¨  MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œç”¨äºç®€åŒ– JDBC å¼€å‘ MyBatis æœ¬æ˜¯ Apache çš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°Github å®˜ç½‘ï¼šhttps:&#x2F;&#x2F;mybatis.org&#x2F;mybatis-3&#x2F;zh_CN"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/610377944fb31f01071d8d82782eedf4.jpg"><meta property="article:published_time" content="2025-10-28T11:42:57.650Z"><meta property="article:modified_time" content="2025-10-28T11:42:57.651Z"><meta property="article:author" content="SilvanğŸ³"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/610377944fb31f01071d8d82782eedf4.jpg"><link rel="shortcut icon" href="/%F0%9F%90%B3"><link rel="canonical" href="https://silvan.chat/2025/10/28/SSM-%E9%BB%91%E9%A9%AC-Mybatis/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":250},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Silvan\'s BlogğŸ³',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2025-10-28 19:42:57'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js"></script><script src="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/readPercent.css"><link rel="stylesheet" href="/css/toc-custom.css"><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><svg aria-hidden="true" style="position:absolute;overflow:hidden;width:0;height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248 626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><div id="myscoll"></div><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Silvan's BlogğŸ³" type="application/atom+xml"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/12e8275194271855a58c84429b090a10.jpg" data-lazy="false" referrerpolicy="no-referrer" onerror="this.onerror=null;this.src='/assets/avatar.webp'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-home"></use></svg> <span class="menu_word" style="font-size:17px">é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--article"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-guidang1"></use></svg> <span class="menu_word" style="font-size:17px">å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-sekuaibiaoqian"></use></svg> <span class="menu_word" style="font-size:17px">æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-fenlei"></use></svg> <span class="menu_word" style="font-size:17px">åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pinweishenghuo"></use></svg> <span class="menu_word" style="font-size:17px">ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-yinle"></use></svg> <span class="menu_word" style="font-size:17px">å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-dianying1"></use></svg> <span class="menu_word" style="font-size:17px">å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-youxishoubing"></use></svg> <span class="menu_word" style="font-size:17px">æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xiangzi"></use></svg> <span class="menu_word" style="font-size:17px">å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-tubiaozhizuomoban"></use></svg> <span class="menu_word" style="font-size:17px">ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-nvwumao"></use></svg> <span class="menu_word" style="font-size:17px">åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-zhifengche"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shejiaoxinxi"></use></svg> <span class="menu_word" style="font-size:17px">ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pengyouquan"></use></svg> <span class="menu_word" style="font-size:17px">æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-liuyan"></use></svg> <span class="menu_word" style="font-size:17px">ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-lianjie"></use></svg> <span class="menu_word" style="font-size:17px">å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-maoliang"></use></svg> <span class="menu_word" style="font-size:17px">ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-qunliaotian"></use></svg> <span class="menu_word" style="font-size:17px">å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/field/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-love-sign"></use></svg> <span class="menu_word" style="font-size:17px">ä¸ªäººé¢†åŸŸ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-paperplane"></use></svg> <span class="menu_word" style="font-size:17px">å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Silvan's BlogğŸ³</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-home"></use></svg> <span class="menu_word" style="font-size:17px">é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--article"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-guidang1"></use></svg> <span class="menu_word" style="font-size:17px">å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-sekuaibiaoqian"></use></svg> <span class="menu_word" style="font-size:17px">æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-fenlei"></use></svg> <span class="menu_word" style="font-size:17px">åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pinweishenghuo"></use></svg> <span class="menu_word" style="font-size:17px">ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-yinle"></use></svg> <span class="menu_word" style="font-size:17px">å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-dianying1"></use></svg> <span class="menu_word" style="font-size:17px">å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-youxishoubing"></use></svg> <span class="menu_word" style="font-size:17px">æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xiangzi"></use></svg> <span class="menu_word" style="font-size:17px">å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-tubiaozhizuomoban"></use></svg> <span class="menu_word" style="font-size:17px">ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-nvwumao"></use></svg> <span class="menu_word" style="font-size:17px">åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-zhifengche"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shejiaoxinxi"></use></svg> <span class="menu_word" style="font-size:17px">ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pengyouquan"></use></svg> <span class="menu_word" style="font-size:17px">æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-liuyan"></use></svg> <span class="menu_word" style="font-size:17px">ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-lianjie"></use></svg> <span class="menu_word" style="font-size:17px">å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-maoliang"></use></svg> <span class="menu_word" style="font-size:17px">ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-qunliaotian"></use></svg> <span class="menu_word" style="font-size:17px">å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/field/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-love-sign"></use></svg> <span class="menu_word" style="font-size:17px">ä¸ªäººé¢†åŸŸ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-paperplane"></use></svg> <span class="menu_word" style="font-size:17px">å…³äº</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg> <span>æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">æ— é¢˜</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº</span> <time class="post-meta-date-created" datetime="2025-10-28T11:42:57.650Z" title="å‘è¡¨äº 2025-10-28 19:42:57">2025-10-28</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-10-28T11:42:57.651Z" title="æ›´æ–°äº 2025-10-28 19:42:57">2025-10-28</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">3.6w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>168åˆ†é’Ÿ</span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>MyBatiså…¥é—¨</h1><blockquote><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œç”¨äºç®€åŒ– JDBC å¼€å‘<br>MyBatis æœ¬æ˜¯ Apache çš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°Github<br>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh_CN/index.html">https://mybatis.org/mybatis-3/zh_CN/index.html</a></p></blockquote><ul><li><strong>æŒä¹…å±‚ï¼š</strong><ul><li>è´Ÿè´£å°†æ•°æ®åˆ°ä¿å­˜åˆ°æ•°æ®åº“çš„é‚£ä¸€å±‚ä»£ç ã€‚<br>ä»¥åå¼€å‘æˆ‘ä»¬ä¼šå°†æ“ä½œæ•°æ®åº“çš„Javaä»£ç ä½œä¸ºæŒä¹…å±‚ã€‚è€ŒMybatiså°±æ˜¯å¯¹jdbcä»£ç è¿›è¡Œäº†å°è£…ã€‚</li></ul></li><li><strong>æ¡†æ¶ï¼š</strong><ul><li>æ¡†æ¶å°±æ˜¯ä¸€ä¸ªåŠæˆå“è½¯ä»¶ï¼Œæ˜¯ä¸€å¥—å¯é‡ç”¨çš„ã€é€šç”¨çš„ã€è½¯ä»¶åŸºç¡€ä»£ç æ¨¡å‹</li><li>åœ¨æ¡†æ¶çš„åŸºç¡€ä¹‹ä¸Šæ„å»ºè½¯ä»¶ç¼–å†™æ›´åŠ é«˜æ•ˆã€è§„èŒƒã€é€šç”¨ã€å¯æ‰©å±•</li></ul></li></ul><h2 id="JDBCä¸è¶³">JDBCä¸è¶³</h2><div class="tabs" id="jdbcä¸è¶³"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#jdbcä¸è¶³-1">ç¤ºä¾‹ä»£ç 1</button></li><li class="tab"><button type="button" data-href="#jdbcä¸è¶³-2">ç¤ºä¾‹ä»£ç 2</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="jdbcä¸è¶³-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="comment">// sqlè¯­å¥å†™æ­»åœ¨javaç¨‹åºä¸­</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(id,idCard,username,password,birth,gender,email,city,street,zipcode,phone,grade) values(?,?,?,?,?,?,?,?,?,?,?,?)&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">// ç¹ççš„èµ‹å€¼ï¼šæ€è€ƒä¸€ä¸‹ï¼Œè¿™ç§æœ‰è§„å¾‹çš„ä»£ç èƒ½ä¸èƒ½é€šè¿‡åå°„æœºåˆ¶æ¥åšè‡ªåŠ¨åŒ–ã€‚</span></span><br><span class="line">ps.setString(<span class="number">1</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">2</span>, <span class="string">&quot;123456789&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">3</span>, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">4</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">5</span>, <span class="string">&quot;1980-10-11&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">6</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">7</span>, <span class="string">&quot;zhangsan@126.com&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">8</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">9</span>, <span class="string">&quot;å¤§å…´åŒºå‡‰æ°´æ²³äºŒè¡—&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">10</span>, <span class="string">&quot;1000000&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">11</span>, <span class="string">&quot;16398574152&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">12</span>, <span class="string">&quot;A&quot;</span>);</span><br><span class="line"><span class="comment">// æ‰§è¡ŒSQL</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ps.executeUpdate();</span><br><span class="line"><span class="comment">// ......</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="jdbcä¸è¶³-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="comment">// sqlè¯­å¥å†™æ­»åœ¨javaç¨‹åºä¸­</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,idCard,username,password,birth,gender,email,city,street,zipcode,phone,grade from t_user&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery();</span><br><span class="line">List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// æ€è€ƒä»¥ä¸‹å¾ªç¯ä¸­çš„æ‰€æœ‰ä»£ç æ˜¯å¦å¯ä»¥ä½¿ç”¨åå°„è¿›è¡Œè‡ªåŠ¨åŒ–å°è£…ã€‚</span></span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    <span class="comment">// è·å–æ•°æ®</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">idCard</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;idCard&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">birth</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;birth&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;gender&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">city</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;city&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">street</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;street&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">zipcode</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;zipcode&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;phone&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">grade</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;grade&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="comment">// ç»™å¯¹è±¡å±æ€§èµ‹å€¼</span></span><br><span class="line">    user.setId(id);</span><br><span class="line">    user.setIdCard(idCard);</span><br><span class="line">    user.setUsername(username);</span><br><span class="line">    user.setPassword(password);</span><br><span class="line">    user.setBirth(birth);</span><br><span class="line">    user.setGender(gender);</span><br><span class="line">    user.setEmail(email);</span><br><span class="line">    user.setCity(city);</span><br><span class="line">    user.setStreet(street);</span><br><span class="line">    user.setZipcode(zipcode);</span><br><span class="line">    user.setPhone(phone);</span><br><span class="line">    user.setGrade(grade);</span><br><span class="line">    <span class="comment">// æ·»åŠ åˆ°é›†åˆ</span></span><br><span class="line">    userList.add(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ......</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info no-icon flat"><p>JDBCä¸è¶³ï¼š</p><ul><li>SQLè¯­å¥å†™æ­»åœ¨Javaç¨‹åºä¸­ï¼Œä¸çµæ´»ã€‚æ”¹SQLçš„è¯å°±è¦æ”¹Javaä»£ç ã€‚è¿èƒŒOCPå¼€é—­åŸåˆ™ã€‚</li><li>ç»™?ä¼ å€¼æ˜¯ç¹ççš„ã€‚</li><li>å°†ç»“æœé›†å°è£…æˆJavaå¯¹è±¡æ˜¯ç¹ççš„ã€‚</li></ul></div><h2 id="äº†è§£MyBatis">äº†è§£MyBatis</h2><ul><li><p>MyBatisæœ¬è´¨ä¸Šæ˜¯å¯¹JDBCçš„å°è£…ï¼Œé€šè¿‡MyBatiså®ŒæˆCRUDã€‚</p></li><li><p>MyBatisåœ¨ä¸‰å±‚æ¶æ„ä¸­è´Ÿè´£æŒä¹…å±‚çš„ï¼Œå±äºæŒä¹…å±‚æ¡†æ¶ã€‚</p></li><li><p>ORMï¼šå¯¹è±¡å…³ç³»æ˜ å°„</p><ul><li>Oï¼ˆObjectï¼‰ï¼šJavaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡</li><li>Rï¼ˆRelationalï¼‰ï¼šå…³ç³»å‹æ•°æ®åº“</li><li>Mï¼ˆMappingï¼‰ï¼šå°†Javaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­ä¸€è¡Œè®°å½•ï¼Œæˆ–æ˜¯å°†æ•°æ®åº“è¡¨ä¸­ä¸€è¡Œè®°å½•æ˜ å°„æˆJavaè™šæ‹Ÿæœºä¸­çš„ä¸€ä¸ªJavaå¯¹è±¡ã€‚</li></ul></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018151048.png"></div></div><ul><li>MyBatisæ¡†æ¶ç‰¹ç‚¹ï¼š<ul><li>æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ã€åŸºæœ¬æ˜ å°„ä»¥åŠé«˜çº§æ˜ å°„</li><li>æ”¯æŒXMLå¼€å‘ï¼Œä¹Ÿæ”¯æŒæ³¨è§£å¼å¼€å‘ã€‚ã€ä¸ºäº†ä¿è¯sqlè¯­å¥çš„çµæ´»ï¼Œæ‰€ä»¥mybatiså¤§éƒ¨åˆ†æ˜¯é‡‡ç”¨XMLæ–¹å¼å¼€å‘ã€‚ã€‘</li><li>é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä¸­æ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†</li><li>å°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Objectï¼Œç®€å•æ™®é€šçš„Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•</li><li>ä½“ç§¯å°å¥½å­¦ï¼šä¸¤ä¸ªjaråŒ…ï¼Œä¸¤ä¸ªXMLé…ç½®æ–‡ä»¶ã€‚</li><li>å®Œå…¨åšåˆ°sqlè§£è€¦åˆã€‚</li><li>æä¾›åŸºæœ¬æ˜ å°„æ ‡ç­¾ã€‚</li><li>æä¾›é«˜çº§æ˜ å°„æ ‡ç­¾ã€‚</li><li>æä¾›XMLæ ‡ç­¾ï¼Œæ”¯æŒåŠ¨æ€SQLçš„ç¼–å†™ã€‚</li></ul></li></ul><h2 id="MyBatiså…¥é—¨ç¨‹åº">MyBatiså…¥é—¨ç¨‹åº</h2><ul><li><p>æ­¥éª¤1ï¼šæ±½è½¦è¡¨t_carï¼Œå­—æ®µåŒ…æ‹¬ï¼š</p><ul><li>idï¼šä¸»é”®ï¼ˆè‡ªå¢ï¼‰ã€bigintã€‘</li><li>car_numï¼šæ±½è½¦ç¼–å·ã€varcharã€‘</li><li>brandï¼šå“ç‰Œã€varcharã€‘</li><li>guide_priceï¼šå‚å®¶æŒ‡å¯¼ä»·ã€decimalç±»å‹ï¼Œä¸“é—¨ä¸ºè´¢åŠ¡æ•°æ®å‡†å¤‡çš„ç±»å‹ã€‘</li><li>produce_timeï¼šç”Ÿäº§æ—¶é—´ã€charï¼Œå¹´æœˆæ—¥å³å¯ï¼Œ10ä¸ªé•¿åº¦ï¼Œâ€˜2022-10-11â€™ã€‘</li><li>car_typeï¼šæ±½è½¦ç±»å‹ï¼ˆç‡ƒæ²¹è½¦ã€ç”µè½¦ã€æ°¢èƒ½æºï¼‰ã€varcharã€‘</li></ul></li><li><p>ä½¿ç”¨navicat for mysqlå·¥å…·å»ºè¡¨</p></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018151459.png"></div></div><ul><li>ä½¿ç”¨navicat for mysqlå·¥å…·å‘t_carè¡¨ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018151538.png"></div></div><ul><li>æ­¥éª¤2ï¼šåˆ›å»ºé¡¹ç›®å¹¶å¼•å…¥ä¾èµ–ï¼ˆmybatisä¾èµ– + mysqlé©±åŠ¨ä¾èµ–ï¼‰</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatisæ ¸å¿ƒä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ­¥éª¤3ï¼šåœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºmybatis-config.xmlé…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--sqlæ˜ å°„æ–‡ä»¶åˆ›å»ºå¥½ä¹‹åï¼Œéœ€è¦å°†è¯¥æ–‡ä»¶è·¯å¾„é…ç½®åˆ°è¿™é‡Œ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note warning no-icon flat"><p>æ³¨æ„ï¼š</p><ol><li>mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ–‡ä»¶åä¸ä¸€å®šæ˜¯mybatis-config.xmlï¼Œå¯ä»¥æ˜¯å…¶å®ƒåå­—ã€‚</li><li>mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ä¹Ÿå¯ä»¥éšæ„ã€‚è¿™é‡Œé€‰æ‹©æ”¾åœ¨resourcesæ ¹ä¸‹ï¼Œç›¸å½“äºæ”¾åˆ°äº†ç±»çš„æ ¹è·¯å¾„ä¸‹ã€‚</li></ol></div><ul><li>æ­¥éª¤4ï¼šåœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºCarMapper.xmlé…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšæ„å†™ä¸€ä¸ª--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--insert sqlï¼šä¿å­˜ä¸€ä¸ªæ±½è½¦ä¿¡æ¯--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car</span><br><span class="line">            (id,car_num,brand,guide_price,produce_time,car_type) </span><br><span class="line">        values</span><br><span class="line">            (null,&#x27;102&#x27;,&#x27;ä¸°ç”°mirai&#x27;,40.30,&#x27;2014-10-05&#x27;,&#x27;æ°¢èƒ½æº&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note warning no-icon flat"><p>æ³¨æ„ï¼š</p><ol><li><strong>sqlè¯­å¥æœ€åç»“å°¾å¯ä»¥ä¸å†™<code>;</code></strong></li><li>CarMapper.xmlæ–‡ä»¶çš„åå­—ä¸æ˜¯å›ºå®šçš„ã€‚å¯ä»¥ä½¿ç”¨å…¶å®ƒåå­—ã€‚</li><li>CarMapper.xmlæ–‡ä»¶çš„ä½ç½®ä¹Ÿæ˜¯éšæ„çš„ã€‚éœ€è¦åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­æŒ‡å®šCarMapper.xmlæ–‡ä»¶çš„è·¯å¾„ã€‚</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></div><ul><li>æ­¥éª¤5ï¼šç¼–å†™MyBatisIntroductionTestä»£ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisIntroductionTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 2. åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Thread.currentThread().getContextClassLoader().getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">        <span class="comment">// 3. åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">// 4. æ‰§è¡Œsql</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>); <span class="comment">// è¿™ä¸ª&quot;insertCar&quot;å¿…é¡»æ˜¯sqlçš„id</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥å‡ æ¡æ•°æ®ï¼š&quot;</span> + count);</span><br><span class="line">        <span class="comment">// 5. æäº¤ï¼ˆmybatisé»˜è®¤é‡‡ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯JDBCï¼Œé»˜è®¤æ˜¯ä¸æäº¤çš„ï¼Œéœ€è¦æ‰‹åŠ¨æäº¤ã€‚ï¼‰</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        <span class="comment">// 6. å…³é—­èµ„æºï¼ˆåªå…³é—­æ˜¯ä¸ä¼šæäº¤çš„ï¼‰</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note warning no-icon flat"><p>é»˜è®¤é‡‡ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼š<code>JDBC</code>ã€‚JDBCäº‹åŠ¡é»˜è®¤æ˜¯ä¸æäº¤çš„ï¼Œéœ€è¦æ‰‹åŠ¨æäº¤ã€‚</p></div><ul><li>æ­¥éª¤6ï¼šè¿è¡Œç¨‹åºï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœï¼Œä»¥åŠæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018163721.png"></div></div><h2 id="å¼•å…¥JUnit">å¼•å…¥JUnit</h2><ul><li><p>JUnitæ˜¯ä¸“é—¨åšå•å…ƒæµ‹è¯•çš„ç»„ä»¶ã€‚</p><ul><li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå•å…ƒæµ‹è¯•ä¸€èˆ¬æ˜¯ç”±æˆ‘ä»¬Javaç¨‹åºå‘˜æ¥å®Œæˆçš„ã€‚</li><li>æˆ‘ä»¬è¦å¯¹æˆ‘ä»¬è‡ªå·±å†™çš„æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è´Ÿè´£ä»»ï¼Œè¦ä¿è¯æ¯ä¸ªä¸šåŠ¡æ–¹æ³•åœ¨è¿›è¡Œæµ‹è¯•çš„æ—¶å€™éƒ½èƒ½é€šè¿‡ã€‚</li></ul></li><li><p>æµ‹è¯•çš„è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li>æœŸæœ›å€¼</li><li>å®é™…å€¼</li></ul></li><li><p>æœŸæœ›å€¼å’Œå®é™…å€¼ç›¸åŒè¡¨ç¤ºæµ‹è¯•é€šè¿‡ï¼ŒæœŸæœ›å€¼å’Œå®é™…å€¼ä¸åŒåˆ™å•å…ƒæµ‹è¯•æ‰§è¡Œæ—¶ä¼šæŠ¥é”™ã€‚</p></li><li><p>è¿™é‡Œå¼•å…¥JUnitæ˜¯ä¸ºäº†ä»£æ›¿mainæ–¹æ³•ã€‚</p></li><li><p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- junitä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒæ­¥ï¼šç¼–å†™å•å…ƒæµ‹è¯•ç±»ã€æµ‹è¯•ç”¨ä¾‹ã€‘ï¼Œæµ‹è¯•ç”¨ä¾‹ä¸­æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¸Šä½¿ç”¨<code>@Test</code>æ³¨è§£è¿›è¡Œæ ‡æ³¨ã€‚<ul><li>æµ‹è¯•ç”¨ä¾‹çš„åå­—ä»¥åŠæ¯ä¸ªæµ‹è¯•æ–¹æ³•çš„å®šä¹‰éƒ½æ˜¯æœ‰è§„èŒƒçš„ï¼š<ul><li>æµ‹è¯•ç”¨ä¾‹çš„åå­—ï¼šXxxTest</li><li>æµ‹è¯•æ–¹æ³•å£°æ˜æ ¼å¼ï¼špublic void testä¸šåŠ¡æ–¹æ³•å(){}</li></ul></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ç¬¬ä¸‰æ­¥ï¼šå¯ä»¥åœ¨ç±»ä¸Šæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•ä¸Šæ‰§è¡Œ</p><ul><li>åœ¨ç±»ä¸Šæ‰§è¡Œæ—¶ï¼Œè¯¥ç±»ä¸­æ‰€æœ‰çš„æµ‹è¯•æ–¹æ³•éƒ½ä¼šæ‰§è¡Œã€‚</li><li>åœ¨æ–¹æ³•ä¸Šæ‰§è¡Œæ—¶ï¼Œåªæ‰§è¡Œå½“å‰çš„æµ‹è¯•æ–¹æ³•ã€‚</li></ul></li><li><p>ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæ¥æµ‹è¯•insertCarä¸šåŠ¡</p></li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018164858.png"></div></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="comment">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">            <span class="comment">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            <span class="comment">// 4.æ‰§è¡ŒSQL</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">            <span class="comment">// 5.æäº¤</span></span><br><span class="line">            sqlSession.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// å›æ»š</span></span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                sqlSession.rollback();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.å…³é—­</span></span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                sqlSession.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼•å…¥æ—¥å¿—æ¡†æ¶logback">å¼•å…¥æ—¥å¿—æ¡†æ¶logback</h2><ul><li><strong>å¼•å…¥æ—¥å¿—æ¡†æ¶çš„ç›®çš„æ˜¯ä¸ºäº†çœ‹æ¸…æ¥šmybatisæ‰§è¡Œçš„å…·ä½“sqlã€‚</strong></li><li>å¯ç”¨æ ‡å‡†æ—¥å¿—ç»„ä»¶ï¼Œåªéœ€è¦åœ¨<strong>mybatis-config.xml</strong>æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼šã€å¯å‚è€ƒmybatisæ‰‹å†Œã€‘</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ‡å‡†æ—¥å¿—ä¹Ÿå¯ä»¥ç”¨ï¼Œä½†æ˜¯é…ç½®ä¸å¤Ÿçµæ´»ï¼Œå¯ä»¥é›†æˆå…¶ä»–çš„æ—¥å¿—ç»„ä»¶ï¼Œä¾‹å¦‚ï¼šlog4jï¼Œlogbackç­‰ã€‚</p><ul><li><p>logbackæ˜¯ç›®å‰æ—¥å¿—æ¡†æ¶ä¸­æ€§èƒ½è¾ƒå¥½çš„ï¼Œè¾ƒæµè¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰å®ƒã€‚</p></li><li><p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥<code>logback</code>ç›¸å…³ä¾èµ–</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒæ­¥ï¼šå¼•å…¥<code>logback</code>ç›¸å…³é…ç½®æ–‡ä»¶ï¼ˆæ–‡ä»¶åå«åšlogback.xmlæˆ–logback-test.xmlï¼Œæ”¾åˆ°ç±»è·¯å¾„å½“ä¸­ï¼‰</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æŒ‰ç…§æ¯å¤©ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">FileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/TestWeb.log.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">FileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MaxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">MaxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶æœ€å¤§çš„å¤§å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MaxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">MaxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--mybatis log configure--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ«,logbackæ—¥å¿—çº§åˆ«åŒ…æ‹¬äº”ä¸ªï¼šTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å†æ¬¡æ‰§è¡Œå•å…ƒæµ‹è¯•æ–¹æ³•testInsertCarï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰sqlè¯­å¥è¾“å‡º</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018165124.png"></div></div><h2 id="å°è£…SqlSessionUtil">å°è£…SqlSessionUtil</h2><ul><li>æ¯ä¸€æ¬¡è·å–SqlSessionå¯¹è±¡ä»£ç å¤ªç¹çï¼Œå› æ­¤å°†å…¶å°è£…æˆä¸€ä¸ªå·¥å…·ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            sqlSessionFactory = sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯è°ƒç”¨ä¸€æ¬¡openSession()å¯è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯æ”¯æŒè‡ªåŠ¨æäº¤ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–°çš„ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•å·¥å…·ç±»ï¼Œæ”¹é€ testInsertCar()</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•:&quot;</span> + count);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>ä½¿ç”¨MyBatiså®ŒæˆCRUD</h1><ul><li>å‡†å¤‡å·¥ä½œ<ul><li>åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mavenå·¥ç¨‹ï¼šmybatis-002-crud</li></ul></li><li>pom.xml<ul><li>ä¾èµ–ï¼š<ul><li>mybatisä¾èµ–</li><li>mysqlé©±åŠ¨ä¾èµ–</li><li>junitä¾èµ–</li><li>logbackä¾èµ–</li><li>Lombokä¾èµ–</li></ul></li></ul></li><li>mybatis-config.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</li><li>CarMapper.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</li><li>logback.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</li><li>å°è£…SqlSessionUtilå·¥å…·ç±»</li><li>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼šcom.powernode.mybatis.CarMapperTest</li></ul><h2 id="insertï¼ˆCreateï¼‰">insertï¼ˆCreateï¼‰</h2><p>åˆ†æä»¥ä¸‹SQLæ˜ å°„æ–‡ä»¶ä¸­SQLè¯­å¥å­˜åœ¨çš„é—®é¢˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(&#x27;103&#x27;, &#x27;å¥”é©°E300L&#x27;, 50.3, &#x27;2022-01-01&#x27;, &#x27;ç‡ƒæ²¹è½¦&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼šåœ¨æ–‡ä»¶ä¸­å°†SQLè¯­å¥å†™æ­»äº†ï¼Œå¦‚æœæƒ³è¦æ›´æ¢åˆ«çš„å€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹æ–‡ä»¶ä¸­çš„SQLè¯­å¥ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜JDBCæ˜¯é‡‡ç”¨å ä½ç¬¦æ¥è§£å†³ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JDBCä¸­ä½¿ç”¨ ? ä½œä¸ºå ä½ç¬¦ã€‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(?,?,?,?,?)&quot;</span>;</span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="comment">// ç»™ ? ä¼ å€¼ã€‚</span></span><br><span class="line">ps.setString(<span class="number">1</span>,<span class="string">&quot;103&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">2</span>,<span class="string">&quot;å¥”é©°E300L&quot;</span>);</span><br><span class="line">ps.setDouble(<span class="number">3</span>,<span class="number">50.3</span>);</span><br><span class="line">ps.setString(<span class="number">4</span>,<span class="string">&quot;2022-01-01&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">5</span>,<span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br></pre></td></tr></table></figure><p>MyBatisæ—¢ç„¶å°è£…äº†JDBCï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨MyBatisæä¾›çš„å ä½ç¬¦ï¼Œå°†SQLè¯­å¥ä¸­çš„å‚æ•°ç”¨å ä½ç¬¦ä»£æ›¿ã€‚<br>MaBatisä¸­ç»™å‡ºçš„åšæ³•æ˜¯ï¼šå°†æ•°æ®æ”¾åˆ°Mapé›†åˆä¸­ï¼Œåœ¨SQLè¯­å¥ä¸­ä½¿ç”¨${}ï¼Œå°†Mapé›†åˆä¸­çš„keyä½œä¸º${}ä¸­çš„å€¼ã€‚</p><div class="tabs" id="insert"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#insert-1">CarMapperTest.java</button></li><li class="tab"><button type="button" data-href="#insert-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="insert-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;k1&quot;</span>, <span class="string">&quot;103&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k2&quot;</span>, <span class="string">&quot;å¥”é©°E300L&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k3&quot;</span>, <span class="number">50.3</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k4&quot;</span>, <span class="string">&quot;2020-10-01&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k5&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="comment">// æ‰§è¡ŒSQLè¯­å¥ï¼ˆä½¿ç”¨mapé›†åˆç»™sqlè¯­å¥ä¼ é€’æ•°æ®ï¼‰</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, map);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="insert-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#&#123;k1&#125;,#&#123;k2&#125;,#&#123;k3&#125;,#&#123;k4&#125;,#&#123;k5&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li><code>#&#123;&#125;</code>é‡Œé¢å¿…é¡»å¡«å†™mapé›†åˆçš„keyï¼Œä¸èƒ½éšä¾¿å†™,å¦‚æœ<code>#&#123;&#125;</code>é‡Œå†™çš„æ˜¯mapé›†åˆä¸­ä¸å­˜åœ¨çš„keyä¼šå¯¼è‡´å±æ€§æ³¨å…¥é”™è¯¯ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#&#123;kk&#125;,#&#123;k2&#125;,#&#123;k3&#125;,#&#123;k4&#125;,#&#123;k5&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018170117.png"></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018170134.png"></div></div><div class="note info no-icon flat"><p>é€šè¿‡æµ‹è¯•ï¼Œçœ‹åˆ°ç¨‹åºå¹¶æ²¡æœ‰æŠ¥é”™ã€‚æ­£å¸¸æ‰§è¡Œã€‚ä¸è¿‡ #{kk} çš„å†™æ³•å¯¼è‡´æ— æ³•è·å–åˆ°mapé›†åˆä¸­çš„æ•°æ®ï¼Œæœ€ç»ˆå¯¼è‡´æ•°æ®åº“è¡¨car_numæ’å…¥äº†NULLã€‚</p></div><p>ä½¿ç”¨Mapé›†åˆå¯ä»¥ä¼ å‚ï¼Œé‚£ä½¿ç”¨<strong>pojo</strong>ï¼ˆç®€å•æ™®é€šçš„javaå¯¹è±¡ï¼‰å¯ä»¥å®Œæˆä¼ å‚å—ï¼Ÿæµ‹è¯•ä¸€ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ä¸€ä¸ªpojoç±»Carï¼Œæä¾›ç›¸å…³å±æ€§ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String carNum;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> Double guidePrice;</span><br><span class="line">    <span class="keyword">private</span> String produceTime;</span><br><span class="line">    <span class="keyword">private</span> String carType;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, carNum=&#x27;&quot;</span> + carNum + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, guidePrice=&quot;</span> + guidePrice +</span><br><span class="line">                <span class="string">&quot;, produceTime=&#x27;&quot;</span> + produceTime + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, carType=&#x27;&quot;</span> + carType + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(Long id, String carNum, String brand, Double guidePrice, String produceTime, String carType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.carNum = carNum;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">        <span class="built_in">this</span>.guidePrice = guidePrice;</span><br><span class="line">        <span class="built_in">this</span>.produceTime = produceTime;</span><br><span class="line">        <span class="built_in">this</span>.carType = carType;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒæ­¥ï¼šJavaç¨‹åº</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCarByPOJO</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºPOJOï¼Œå°è£…æ•°æ®</span></span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    car.setCarNum(<span class="string">&quot;103&quot;</span>);</span><br><span class="line">    car.setBrand(<span class="string">&quot;å¥”é©°C200&quot;</span>);</span><br><span class="line">    car.setGuidePrice(<span class="number">33.23</span>);</span><br><span class="line">    car.setProduceTime(<span class="string">&quot;2020-10-11&quot;</span>);</span><br><span class="line">    car.setCarType(<span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLï¼Œä¼ æ•°æ®</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCarByPOJO&quot;</span>, car);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•&quot;</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸‰æ­¥ï¼šSQLè¯­å¥<br>ä½¿ç”¨å®ä½“ç±»çš„å±æ€§åä½œä¸ºå€¼æ’å…¥æ•°æ®åº“è¡¨ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCarByPOJO&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--#&#123;&#125; é‡Œå†™çš„æ˜¯POJOçš„å±æ€§å--&gt;</span></span><br><span class="line">  insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>#{} é‡Œå†™çš„æ˜¯POJOçš„å±æ€§åï¼Œå¦‚æœå†™æˆå…¶ä»–çš„ä¼šæœ‰é—®é¢˜å—ï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCarByPOJO&quot;</span>&gt;</span></span><br><span class="line">  insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#&#123;a&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œå‡ºç°äº†ä»¥ä¸‹å¼‚å¸¸ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018170819.png"></div></div><p>é”™è¯¯ä¿¡æ¯ä¸­æè¿°ï¼šåœ¨Carç±»ä¸­æ²¡æœ‰æ‰¾åˆ°aå±æ€§çš„getteræ–¹æ³•ã€‚</p><p>ä¿®æ”¹POJOç±»Carçš„ä»£ç ï¼Œ<strong>åªå°†getCarNum()æ–¹æ³•åä¿®æ”¹ä¸ºgetA()ï¼Œå…¶ä»–ä»£ç ä¸å˜</strong>ï¼Œå¦‚ä¸‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018170903.png"></div></div><div class="note danger no-icon flat"><p><strong>ç»è¿‡æµ‹è¯•å¾—å‡ºç»“è®ºï¼š</strong></p><ul><li>å¦‚æœé‡‡ç”¨mapé›†åˆä¼ å‚ï¼Œ#{} é‡Œå†™çš„æ˜¯mapé›†åˆçš„keyï¼Œå¦‚æœkeyä¸å­˜åœ¨ä¸ä¼šæŠ¥é”™ï¼Œæ•°æ®åº“è¡¨ä¸­ä¼šæ’å…¥NULLã€‚</li><li>å¦‚æœé‡‡ç”¨POJOä¼ å‚ï¼Œ#{} é‡Œå†™çš„æ˜¯getæ–¹æ³•çš„æ–¹æ³•åå»æ‰getä¹‹åå°†å‰©ä¸‹çš„å•è¯é¦–å­—æ¯å˜å°å†™ï¼ˆä¾‹å¦‚ï¼šgetAgeå¯¹åº”çš„æ˜¯#{age}ï¼ŒgetUserNameå¯¹åº”çš„æ˜¯#{userName}ï¼‰ï¼Œå¦‚æœè¿™æ ·çš„getæ–¹æ³•ä¸å­˜åœ¨ä¼šæŠ¥é”™ã€‚</li></ul></div><h2 id="deleteï¼ˆDeleteï¼‰">deleteï¼ˆDeleteï¼‰</h2><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ ¹æ®car_numè¿›è¡Œåˆ é™¤ã€‚</p></div><p>SQLè¯­å¥è¿™æ ·å†™ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByCarNum&quot;</span>&gt;</span></span><br><span class="line">  delete from t_car where car_num = #&#123;SuiBianXie&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Javaç¨‹åºè¿™æ ·å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByCarNum</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.delete(<span class="string">&quot;deleteByCarNum&quot;</span>, <span class="string">&quot;102&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018172643.png"></div></div><div class="note danger no-icon flat"><p>ç»“è®ºï¼š</p><ul><li>å¦‚æœMapperæ¥å£æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆMybatisä¼šç›´æ¥è·å–æ–¹æ³•çš„å‚æ•°å¹¶ä½œä¸ºå ä½ç¬¦çš„å†…å®¹ï¼Œå› æ­¤æ— è®ºå ä½ç¬¦å†…å†™ä»€ä¹ˆéƒ½èƒ½æ­£å¸¸æ“ä½œ</li><li>å¦‚æœMapperæ¥å£æ–¹æ³•æœ‰å¤šä¸ªå‚æ•°æˆ–è€…å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå ä½ç¬¦ä¸­çš„å†…å®¹å¿…é¡»ä¸å‚æ•°çš„å±æ€§åå¯¹åº”</li></ul></div><h2 id="updateï¼ˆUpdateï¼‰">updateï¼ˆUpdateï¼‰</h2><div class="note info no-icon flat"><p>ä¿®æ”¹id=34çš„Carä¿¡æ¯ï¼Œcar_numä¸º102ï¼Œbrandä¸ºæ¯”äºšè¿ªæ±‰ï¼Œguide_priceä¸º30.23ï¼Œproduce_timeä¸º2018-09-10ï¼Œcar_typeä¸ºç”µè½¦</p></div><p>ä¿®æ”¹å‰ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018172822.png"></div></div><p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=<span class="string">&quot;updateCarByPOJO&quot;</span>&gt;</span><br><span class="line">  update t_car <span class="type">set</span> </span><br><span class="line">    <span class="variable">car_num</span> <span class="operator">=</span> #&#123;carNum&#125;, brand = #&#123;brand&#125;, </span><br><span class="line">    guide_price = #&#123;guidePrice&#125;, produce_time = #&#123;produceTime&#125;, </span><br><span class="line">    car_type = #&#123;carType&#125; </span><br><span class="line">  <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure><p>Javaä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateCarByPOJO</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    car.setId(<span class="number">34L</span>);</span><br><span class="line">    car.setCarNum(<span class="string">&quot;102&quot;</span>);</span><br><span class="line">    car.setBrand(<span class="string">&quot;æ¯”äºšè¿ªæ±‰&quot;</span>);</span><br><span class="line">    car.setGuidePrice(<span class="number">30.23</span>);</span><br><span class="line">    car.setProduceTime(<span class="string">&quot;2018-09-10&quot;</span>);</span><br><span class="line">    car.setCarType(<span class="string">&quot;ç”µè½¦&quot;</span>);</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;updateCarByPOJO&quot;</span>, car);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018172900.png"></div></div><h2 id="selectï¼ˆRetrieveï¼‰">selectï¼ˆRetrieveï¼‰</h2><p>selectè¯­å¥å’Œå…¶å®ƒè¯­å¥ä¸åŒçš„æ˜¯ï¼šæŸ¥è¯¢å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç»“æœé›†ã€‚</p><h3 id="æŸ¥è¯¢ä¸€æ¡æ•°æ®">æŸ¥è¯¢ä¸€æ¡æ•°æ®</h3><p>éœ€æ±‚ï¼šæŸ¥è¯¢idä¸º1çš„Carä¿¡æ¯</p><p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p><div class="tabs" id="æŸ¥è¯¢ä¸€æ¡æ•°æ®"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æŸ¥è¯¢ä¸€æ¡æ•°æ®-1">SQLè¯­å¥</button></li><li class="tab"><button type="button" data-href="#æŸ¥è¯¢ä¸€æ¡æ•°æ®-2">Javaè¯­å¥</button></li><li class="tab"><button type="button" data-href="#æŸ¥è¯¢ä¸€æ¡æ•°æ®-3">è¿è¡Œç»“æœ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æŸ¥è¯¢ä¸€æ¡æ•°æ®-1"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarById&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æŸ¥è¯¢ä¸€æ¡æ•°æ®-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectCarById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">car</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectCarById&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    System.out.println(car);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æŸ¥è¯¢ä¸€æ¡æ•°æ®-3"><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">### Error querying database.  Cause: org.apache.ibatis.executor.ExecutorException: </span><br><span class="line">    A query was run and no Result Maps were found <span class="keyword">for</span> the Mapped Statement &#x27;car.selectCarById&#x27;.  ã€ç¿»è¯‘ã€‘ï¼šå¯¹äºä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œæ²¡æœ‰æ‰¾åˆ°æŸ¥è¯¢çš„ç»“æœæ˜ å°„ã€‚</span><br><span class="line">    It&#x27;s likely that neither a Result <span class="built_in">Type</span> nor a Result Map was specified.						 ã€ç¿»è¯‘ã€‘ï¼šå¾ˆå¯èƒ½æ—¢æ²¡æœ‰æŒ‡å®šç»“æœç±»å‹ï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®šç»“æœæ˜ å°„ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>è¿è¡Œç»“æœçš„å¤§è‡´æ„æ€æ˜¯ï¼šå¯¹äºä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œéœ€è¦æŒ‡å®šå®ƒçš„<code>ç»“æœç±»å‹</code>æˆ–è€…<code>ç»“æœæ˜ å°„</code>ã€‚</p><p>æ‰€ä»¥å¦‚æœæƒ³è®©mybatisæŸ¥è¯¢ä¹‹åè¿”å›ä¸€ä¸ªJavaå¯¹è±¡çš„è¯ï¼Œè¦å‘Šè¯‰mybatisè¿”å›ä¸€ä¸ªä»€ä¹ˆç±»å‹çš„Javaå¯¹è±¡ï¼Œå¯ä»¥åœ¨<code>&lt;select&gt;</code>æ ‡ç­¾ä¸­æ·»åŠ <code>resultType</code>å±æ€§ï¼Œç”¨æ¥æŒ‡å®šæŸ¥è¯¢è¦è½¬æ¢çš„ç±»å‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018230843.png"></div></div><p>æ­¤æ—¶å°±èƒ½å¤ŸæˆåŠŸè¿è¡Œäº†ï¼Œä½†é€šè¿‡æ§åˆ¶å°çš„æ—¥å¿—ä¿¡æ¯å¯ä»¥å‘ç°Carå¯¹è±¡åªæœ‰idå’Œbrandä¸¤ä¸ªå±æ€§æœ‰å€¼ï¼Œå…¶ä»–å‡ä¸ºnullã€‚</p><p>æŸ¥è¯¢ç»“æœé›†çš„åˆ—åï¼šid, car_num, brand, guide_price, produce_time, car_type<br>Carç±»çš„å±æ€§åï¼šid, carNum, brand, guidePrice, produceTime, carType</p><p>å¯ä»¥å‘ç°ï¼šåªæœ‰idå’Œbrandæ˜¯ä¸€è‡´çš„ï¼Œå…¶ä»–å­—æ®µåå’Œå±æ€§åå¯¹åº”ä¸ä¸Šï¼Œé€šè¿‡èµ·åˆ«åæ¥æµ‹è¯•æ˜¯ä¸æ˜¯å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">  select </span><br><span class="line">    id, car_num as carNum, brand, guide_price as guidePrice, produce_time as produceTime, car_type as carType </span><br><span class="line">  from </span><br><span class="line">    t_car </span><br><span class="line">  where </span><br><span class="line">    id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018231215.png"></div></div><p>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼Œå¦‚æœå½“æŸ¥è¯¢ç»“æœçš„å­—æ®µåå’Œjavaç±»çš„å±æ€§åå¯¹åº”ä¸ä¸Šçš„è¯ï¼Œå¯ä»¥é‡‡ç”¨aså…³é”®å­—èµ·åˆ«åï¼Œ<strong>ä¹‹åå†å­¦ä¹ å…¶ä»–æ–¹æ³•</strong>ã€‚</p><h3 id="æŸ¥è¯¢å¤šæ¡æ•°æ®">æŸ¥è¯¢å¤šæ¡æ•°æ®</h3><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰çš„Carä¿¡æ¯ã€‚</p></div><p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è™½ç„¶ç»“æœæ˜¯Listé›†åˆï¼Œä½†æ˜¯resultTypeå±æ€§éœ€è¦æŒ‡å®šçš„æ˜¯Listé›†åˆä¸­å…ƒç´ çš„ç±»å‹ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--è®°å¾—ä½¿ç”¨asèµ·åˆ«åï¼Œè®©æŸ¥è¯¢ç»“æœçš„å­—æ®µåå’Œjavaç±»çš„å±æ€§åå¯¹åº”ä¸Šã€‚--&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id, car_num as carNum, brand, guide_price as guidePrice, produce_time as produceTime, car_type as carType</span><br><span class="line">  from</span><br><span class="line">  t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Javaä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectCarAll</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;selectCarAll&quot;</span>);</span><br><span class="line">    <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018231337.png"></div></div><h2 id="Mapperçš„namespace">Mapperçš„namespace</h2><p>åœ¨Mapperé…ç½®æ–‡ä»¶ä¸­<code>&lt;mapper&gt;</code>æ ‡ç­¾çš„namespaceå±æ€§å¯ä»¥ç¿»è¯‘ä¸ºå‘½åç©ºé—´ï¼Œè¿™ä¸ªå‘½åç©ºé—´ä¸»è¦æ˜¯ä¸ºäº†<strong>é˜²æ­¢Idå†²çª</strong>ã€‚</p><p>åˆ›å»ºCarMapper2.xmlæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    id, car_num as carNum, brand, guide_price as guidePrice, produce_time as produceTime, car_type as carType</span><br><span class="line">    from</span><br><span class="line">    t_car</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶CarMapper.xmlå’ŒCarMapper2.xmlæ–‡ä»¶ä¸­éƒ½æœ‰ id=â€œselectCarAllâ€ã€‚å°†<code>CarMapper2.xml</code>é…ç½®åˆ°<code>mybatis-config.xml</code>æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper2.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™Javaä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testNamespace</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;selectCarAll&quot;</span>);</span><br><span class="line">    <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">org.apache.ibatis.exceptions.PersistenceException: </span></span><br><span class="line"><span class="function">### <span class="title">Error</span> <span class="title">querying</span> <span class="title">database</span>.  <span class="title">Cause</span>: <span class="title">java.lang.IllegalArgumentException</span>: </span></span><br><span class="line"><span class="function">  <span class="title">selectCarAll</span> <span class="title">is</span> <span class="title">ambiguous</span> <span class="title">in</span> <span class="title">Mapped</span> <span class="title">Statements</span> <span class="title">collection</span> (<span class="title">try</span> <span class="title">using</span> <span class="title">the</span> <span class="title">full</span> <span class="title">name</span> <span class="title">including</span> <span class="title">the</span> <span class="title">namespace</span>, <span class="title">or</span> <span class="title">rename</span> <span class="title">one</span> <span class="title">of</span> <span class="title">the</span> <span class="title">entries</span>) </span></span><br><span class="line"><span class="function">  ã€ç¿»è¯‘ã€‘<span class="title">selectCarAll</span>åœ¨<span class="title">Mapped</span> <span class="title">Statements</span>é›†åˆä¸­ä¸æ˜ç¡®ï¼ˆè¯·å°è¯•ä½¿ç”¨åŒ…å«åç§°ç©ºé—´çš„å…¨åï¼Œæˆ–é‡å‘½åå…¶ä¸­ä¸€ä¸ªæ¡ç›®ï¼‰</span></span><br><span class="line"><span class="function">  ã€å¤§è‡´æ„æ€æ˜¯ã€‘<span class="title">selectCarAll</span>é‡åäº†ï¼Œè¦ä¹ˆåœ¨<span class="title">selectCarAll</span>å‰æ·»åŠ ä¸€ä¸ªåç§°ç©ºé—´ï¼Œè¦ä¹ˆæ”¹ä¸ªå…¶å®ƒåå­—ã€‚</span></span><br></pre></td></tr></table></figure><p>Javaä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testNamespace</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">    <span class="comment">//List&lt;Object&gt; cars = sqlSession.selectList(&quot;car.selectCarAll&quot;);</span></span><br><span class="line">    List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;car2.selectCarAll&quot;</span>);</span><br><span class="line">    <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018231825.png"></div></div><h1>MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper2.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>configuration</code>ï¼šæ ¹æ ‡ç­¾ï¼Œè¡¨ç¤ºé…ç½®ä¿¡æ¯ã€‚</p></li><li><p><code>environments</code>ï¼šç¯å¢ƒï¼ˆå¤šä¸ªï¼‰ï¼Œä»¥â€œsâ€ç»“å°¾è¡¨ç¤ºå¤æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´mybatisçš„ç¯å¢ƒå¯ä»¥é…ç½®å¤šä¸ªæ•°æ®æºã€‚</p><ul><li><code>default</code>å±æ€§ï¼šè¡¨ç¤ºé»˜è®¤ä½¿ç”¨çš„æ˜¯å“ªä¸ªç¯å¢ƒï¼Œdefaultåé¢å¡«å†™çš„æ˜¯environmentçš„idã€‚<strong>defaultçš„å€¼åªéœ€è¦å’Œenvironmentçš„idå€¼ä¸€è‡´å³å¯</strong>ã€‚</li></ul></li><li><p><code>environment</code>ï¼šå…·ä½“çš„ç¯å¢ƒé…ç½®ï¼ˆ<strong>ä¸»è¦åŒ…æ‹¬ï¼šäº‹åŠ¡ç®¡ç†å™¨çš„é…ç½® + æ•°æ®æºçš„é…ç½®</strong>ï¼‰</p><ul><li><code>id</code>å±æ€§ï¼šç»™å½“å‰ç¯å¢ƒä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œè¯¥æ ‡è¯†ç”¨åœ¨environmentsçš„defaultåé¢ï¼Œç”¨æ¥æŒ‡å®šé»˜è®¤ç¯å¢ƒçš„é€‰æ‹©ã€‚</li></ul></li><li><p><code>transactionManager</code>ï¼šé…ç½®äº‹åŠ¡ç®¡ç†å™¨</p><ul><li><code>type</code>å±æ€§ï¼šæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨å…·ä½“ä½¿ç”¨ä»€ä¹ˆæ–¹å¼ï¼Œå¯é€‰å€¼åŒ…æ‹¬ä¸¤ä¸ª<ul><li><strong><code>JDBC</code></strong>ï¼šä½¿ç”¨JDBCåŸç”Ÿçš„äº‹åŠ¡ç®¡ç†æœºåˆ¶ã€‚<strong>åº•å±‚åŸç†ï¼šäº‹åŠ¡å¼€å¯conn.setAutoCommit(false); â€¦å¤„ç†ä¸šåŠ¡â€¦äº‹åŠ¡æäº¤conn.commit();</strong></li><li><strong><code>MANAGED</code></strong>ï¼šäº¤ç»™å…¶å®ƒå®¹å™¨æ¥ç®¡ç†äº‹åŠ¡ï¼Œæ¯”å¦‚WebLogicã€JBOSSç­‰ã€‚å¦‚æœæ²¡æœ‰ç®¡ç†äº‹åŠ¡çš„å®¹å™¨ï¼Œåˆ™æ²¡æœ‰äº‹åŠ¡ã€‚<strong>æ²¡æœ‰äº‹åŠ¡çš„å«ä¹‰ï¼šåªè¦æ‰§è¡Œä¸€æ¡DMLè¯­å¥ï¼Œåˆ™æäº¤ä¸€æ¬¡</strong>ã€‚</li></ul></li></ul></li><li><p><code>dataSource</code>ï¼šæŒ‡å®šæ•°æ®æº</p><ul><li><code>type</code>å±æ€§ï¼šç”¨æ¥æŒ‡å®šå…·ä½“ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥æ± çš„ç­–ç•¥ï¼Œå¯é€‰å€¼åŒ…æ‹¬ä¸‰ä¸ª<ul><li><p><strong><code>UNPOOLED</code></strong>ï¼šé‡‡ç”¨ä¼ ç»Ÿçš„è·å–è¿æ¥çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå®ç°Javax.sql.DataSourceæ¥å£ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨æ± çš„æ€æƒ³ã€‚</p><ul><li>propertyå¯ä»¥æ˜¯ï¼š<ul><li>driver è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåã€‚</li><li>url è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚</li><li>username ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€‚</li><li>password ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚</li><li>defaultTransactionIsolationLevel é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚</li><li>defaultNetworkTimeout ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤ç½‘ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰</li></ul></li></ul></li><li><p><strong>POOLED</strong>ï¼šé‡‡ç”¨ä¼ ç»Ÿçš„javax.sql.DataSourceè§„èŒƒä¸­çš„è¿æ¥æ± ï¼Œmybatisä¸­æœ‰é’ˆå¯¹è§„èŒƒçš„å®ç°ã€‚</p><ul><li>propertyå¯ä»¥æ˜¯ï¼ˆé™¤äº†åŒ…å«<strong>UNPOOLED</strong>ä¸­ä¹‹å¤–ï¼‰ï¼š<ul><li>poolMaximumActiveConnections åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10</li><li>poolMaximumIdleConnections ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚</li><li>å…¶å®ƒâ€¦</li></ul></li></ul></li><li><p><strong>JNDI</strong>ï¼šé‡‡ç”¨æœåŠ¡å™¨æä¾›çš„JNDIæŠ€æœ¯å®ç°ï¼Œæ¥è·å–DataSourceå¯¹è±¡ï¼Œä¸åŒçš„æœåŠ¡å™¨æ‰€èƒ½æ‹¿åˆ°DataSourceæ˜¯ä¸ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯webæˆ–è€…mavençš„warå·¥ç¨‹ï¼ŒJNDIæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚</p><ul><li>propertyå¯ä»¥æ˜¯ï¼ˆæœ€å¤šåªåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼‰ï¼š<ul><li>initial_context è¿™ä¸ªå±æ€§ç”¨æ¥åœ¨ InitialContext ä¸­å¯»æ‰¾ä¸Šä¸‹æ–‡ï¼ˆå³ï¼ŒinitialContext.lookup(initial_context)ï¼‰è¿™æ˜¯ä¸ªå¯é€‰å±æ€§ï¼Œå¦‚æœå¿½ç•¥ï¼Œé‚£ä¹ˆå°†ä¼šç›´æ¥ä» InitialContext ä¸­å¯»æ‰¾ data_source å±æ€§ã€‚</li><li>data_source è¿™æ˜¯å¼•ç”¨æ•°æ®æºå®ä¾‹ä½ç½®çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚æä¾›äº† initial_context é…ç½®æ—¶ä¼šåœ¨å…¶è¿”å›çš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ²¡æœ‰æä¾›æ—¶åˆ™ç›´æ¥åœ¨ InitialContext ä¸­æŸ¥æ‰¾ã€‚</li></ul></li></ul></li></ul></li></ul></li><li><p>mappersï¼šåœ¨mappersæ ‡ç­¾ä¸­å¯ä»¥é…ç½®å¤šä¸ªsqlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„ã€‚</p></li><li><p>mapperï¼šé…ç½®æŸä¸ªsqlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„</p><ul><li>resourceå±æ€§ï¼šä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨æ–¹å¼</li><li>urlå±æ€§ï¼šä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰æ–¹å¼</li></ul></li></ul><h2 id="environment">environment</h2><p>mybatis-003-configuration</p><div class="tabs" id="environment"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#environment-1">mybatis-config.xml</button></li><li class="tab"><button type="button" data-href="#environment-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#environment-3">ConfigurationTest</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="environment-1"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é»˜è®¤ä½¿ç”¨å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;environments default=&quot;dev&quot;&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é»˜è®¤ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;production&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç”Ÿäº§ç¯å¢ƒ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;production&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="environment-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="environment-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigurationTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEnvironment</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">        car.setCarNum(<span class="string">&quot;133&quot;</span>);</span><br><span class="line">        car.setBrand(<span class="string">&quot;ä¸°ç”°éœ¸é“&quot;</span>);</span><br><span class="line">        car.setGuidePrice(<span class="number">50.3</span>);</span><br><span class="line">        car.setProduceTime(<span class="string">&quot;2020-01-10&quot;</span>);</span><br><span class="line">        car.setCarType(<span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸€ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="comment">// ä¸¤ä¸ªæ•°æ®åº“å¯¹åº”ä¸¤ä¸ªSqlSessionFactoryå¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨é»˜è®¤æ•°æ®åº“</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨æŒ‡å®šæ•°æ®åº“</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory1</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>), <span class="string">&quot;dev&quot;</span>);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory1.openSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count1</span> <span class="operator">=</span> sqlSession1.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251018232646.png"></div></div><h2 id="transactionManager">transactionManager</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;environments <span class="keyword">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span><br><span class="line">        &lt;environment id=<span class="string">&quot;dev&quot;</span>&gt;</span><br><span class="line">            &lt;transactionManager type=<span class="string">&quot;MANAGED&quot;</span>/&gt;</span><br><span class="line">            &lt;dataSource type=<span class="string">&quot;POOLED&quot;</span>&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;driver&quot;</span> value=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;mapper resource=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTransactionManager</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    car.setCarNum(<span class="string">&quot;133&quot;</span>);</span><br><span class="line">    car.setBrand(<span class="string">&quot;ä¸°ç”°éœ¸é“&quot;</span>);</span><br><span class="line">    car.setGuidePrice(<span class="number">50.3</span>);</span><br><span class="line">    car.setProduceTime(<span class="string">&quot;2020-01-10&quot;</span>);</span><br><span class="line">    car.setCarType(<span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">    <span class="comment">// è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config2.xml&quot;</span>));</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å½“äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šJDBC</strong></p><ul><li><p>é‡‡ç”¨JDBCçš„åŸç”Ÿäº‹åŠ¡æœºåˆ¶ï¼š</p></li><li><p>å¼€å¯äº‹åŠ¡ï¼šconn.setAutoCommit(false);</p></li><li><p>å¤„ç†ä¸šåŠ¡â€¦</p></li><li><p>æäº¤äº‹åŠ¡ï¼šconn.commit();</p></li></ul><p>ä½¿ç”¨JDBCäº‹åŠ¡ç®¡ç†å™¨çš„è¯ï¼Œåº•å±‚åˆ›å»ºçš„äº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡: JdbcTransactionå¯¹è±¡ã€‚</p><p>å¦‚æœä½ ç¼–å†™çš„ä»£ç æ˜¯ä¸‹é¢çš„ä»£ç :</p><p>SqlSession sqlSession = sqlSessionFactory.openSession(true);</p><p>è¡¨ç¤ºæ²¡æœ‰å¼€å¯äº‹åŠ¡ã€‚å› ä¸ºè¿™ç§æ–¹å¼å‹æ ¹ä¸ä¼šæ‰§è¡Œ: conn.setAutoCommit(false);</p><p>åœ¨JDBCäº‹åŠ¡ä¸­ï¼Œæ²¡æœ‰æ‰§è¡Œconn.setAutoCommit(false);é‚£ä¹ˆautoCommitå°±æ˜¯trueã€‚</p><p>å¦‚æœautoCommitæ˜¯trueï¼Œå°±è¡¨ç¤ºæ²¡æœ‰å¼€å¯äº‹åŠ¡ã€‚åªè¦æ‰§è¡Œä»»æ„ä¸€æ¡DMLè¯­å¥å°±æäº¤ä¸€æ¬¡ã€‚</p><p><strong>å½“äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šMANAGED</strong></p><ul><li>äº¤ç»™å®¹å™¨å»ç®¡ç†äº‹åŠ¡ï¼Œä½†ç›®å‰ä½¿ç”¨çš„æ˜¯æœ¬åœ°ç¨‹åºï¼Œæ²¡æœ‰å®¹å™¨çš„æ”¯æŒï¼Œ<strong>å½“mybatisæ‰¾ä¸åˆ°å®¹å™¨çš„æ”¯æŒæ—¶ï¼šæ²¡æœ‰äº‹åŠ¡</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦æ‰§è¡Œä¸€æ¡DMLè¯­å¥ï¼Œåˆ™æäº¤ä¸€æ¬¡ã€‚</li></ul><p><strong>JDBCä¸­çš„äº‹åŠ¡:</strong></p><p>å¦‚æœä½ æ²¡æœ‰åœ¨JDBCä»£ç ä¸­æ‰§è¡Œ: conn.setAutoCommit(fase);çš„è¯ï¼Œé»˜è®¤çš„autoCommitæ˜¯trueã€‚</p><p>é‡ç‚¹:</p><p>ä»¥åæ³¨æ„äº†ï¼Œåªè¦ä½ çš„autoCommitæ˜¯trueï¼Œå°±è¡¨ç¤ºæ²¡æœ‰å¼€å¯äº‹åŠ¡ã€‚</p><p>åªæœ‰ä½ çš„autoCommitæ˜¯falseçš„æ—¶å€™ï¼Œå°±è¡¨ç¤ºå¼€å¯äº†äº‹åŠ¡ã€‚</p><h2 id="dataSource">dataSource</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">dataSourceé…ç½®:</span></span><br><span class="line"><span class="comment">1.dataSourceè¢«ç§°ä¸ºæ•°æ®æºã€‚</span></span><br><span class="line"><span class="comment">2.dataSourceä½œç”¨æ˜¯ä»€ä¹ˆ? ä¸ºç¨‹åºæä¾›Connectionå¯¹è±¡ã€‚(ä½†å‡¡æ˜¯ç»™ç¨‹åºæä¾›Connectionå¯¹è±¡çš„ï¼Œ</span></span><br><span class="line"><span class="comment">  éƒ½å«åšæ•°æ®æºã€‚)</span></span><br><span class="line"><span class="comment">3.æ•°æ®æºå®é™…ä¸Šæ˜¯ä¸€å¥—è§„èŒƒã€‚JDKä¸­æœ‰è¿™å¥—è§„èŒƒ: javax.sgl.DataSource</span></span><br><span class="line"><span class="comment">	(è¿™ä¸ªæ•°æ®æºçš„è§„èŒƒï¼Œè¿™å¥—æ¥å£å®é™…ä¸Šæ˜¯JDKè§„å®šçš„ã€‚)</span></span><br><span class="line"><span class="comment">4.æˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥ç¼–å†™æ•°æ®æºç»„ä»¶ï¼Œåªè¦å®ç°avax.sgl.Datasourceæ¥å£å°±è¡Œäº†ã€‚</span></span><br><span class="line"><span class="comment">	å®ç°æ¥å£å½“ä¸­æ‰€æœ‰çš„æ–¹æ³•ã€‚è¿™æ ·å°±æœ‰äº†è‡ªå·±çš„æ•°æ®æº,æ¯”å¦‚ä½ å¯ä»¥å†™ä¸€ä¸ªå±äºè‡ªå·±çš„æ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line"><span class="comment">		(æ•°æ®åº“è¿æ¥æ± æ˜¯æä¾›è¿æ¥å¯¹è±¡çš„ï¼Œæ‰€ä»¥æ•°æ®åº“è¿æ¥æ± å°±æ˜¯ä¸€ä¸ªæ•°æ®æº)</span></span><br><span class="line"><span class="comment">5.å¸¸è§çš„æ•°æ®æºç»„ä»¶æœ‰å“ªäº›å‘¢[å¸¸è§çš„æ•°æ®åº“è¿æ¥æ± æœ‰å“ªäº›å‘¢] ?</span></span><br><span class="line"><span class="comment">    é˜¿é‡Œå·´å·´çš„å¾·é²ä¼Šè¿æ¥æ± : druid</span></span><br><span class="line"><span class="comment">    c3p0</span></span><br><span class="line"><span class="comment">    dbcp</span></span><br><span class="line"><span class="comment">6.typeå±æ€§ç”¨æ¥æŒ‡å®šæ•°æ®æºçš„ç±»å‹ï¼Œå°±æ˜¯æŒ‡å®šå…·ä½“ä½¿ç”¨ä»€ä¹ˆæ–¹å¼æ¥è·å–Connectionå¯¹è±¡:</span></span><br><span class="line"><span class="comment">    typeå±æ€§æœ‰ä¸‰ä¸ªå€¼:å¿…é¡»æ˜¯ä¸‰é€‰ä¸€ã€‚</span></span><br><span class="line"><span class="comment">    type=&quot;[UNPOOLEDIPOOLEDIJNDI]&quot;</span></span><br><span class="line"><span class="comment">    UNPOOLED: ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ã€‚æ¯ä¸€æ¬¡è¯·æ±‚è¿‡æ¥ä¹‹åï¼Œéƒ½æ˜¯åˆ›å»ºæ–°çš„Connectionå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">    POOLED: ä½¿ç”¨mybatisè‡ªå·±å®ç°çš„æ•°æ®åº“è¿æ¥æ± ã€‚</span></span><br><span class="line"><span class="comment">    JNDI:é›†æˆå…¶å®ƒç¬¬ä¸‰æ–¹çš„æ•°æ®åº“è¿æ¥æ± ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    JNDIæ˜¯ä¸€å¥—è§„èŒƒã€‚è°å®ç°äº†è¿™å¥—è§„èŒƒå‘¢? å¤§éƒ¨åˆ†çš„webå®¹å™¨éƒ½å®ç°äº†JNDIè§„èŒƒ:</span></span><br><span class="line"><span class="comment">    ä¾‹å¦‚: Tomcatã€Jettyã€WebLogicã€WebSphereï¼Œè¿™äº›æœåŠ¡å™¨(å®¹å™¨)éƒ½å®ç°äº†JNDIè§„èŒƒã€‚</span></span><br><span class="line"><span class="comment">    JNDIæ˜¯: javaå‘½åç›®å½•æ¥å£ã€‚TomcatæœåŠ¡å™¨å®ç°äº†è¿™ä¸ªè§„èŒƒ</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;UNPOOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDataSource</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    car.setCarNum(<span class="string">&quot;133&quot;</span>);</span><br><span class="line">    car.setBrand(<span class="string">&quot;ä¸°ç”°éœ¸é“&quot;</span>);</span><br><span class="line">    car.setGuidePrice(<span class="number">50.3</span>);</span><br><span class="line">    car.setProduceTime(<span class="string">&quot;2020-01-10&quot;</span>);</span><br><span class="line">    car.setCarType(<span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">    <span class="comment">// è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config3.xml&quot;</span>));</span><br><span class="line">    <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// æ‰§è¡ŒSQL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">    <span class="comment">// å…³é—­ä¼šè¯</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“typeæ˜¯UNPOOLEDï¼Œæ§åˆ¶å°è¾“å‡ºï¼š</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1660125487038-29390827-4e20-431a-8d62-f56a40bf0349.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_47%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶mybatis-config3.xmlä¸­çš„é…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;dataSource type=<span class="string">&quot;POOLED&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>Javaæµ‹è¯•ç¨‹åºä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥æ‰§è¡Œï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼š</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1660125701333-b14f63d8-c442-4211-ad77-884f21162357.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_46%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>é€šè¿‡æµ‹è¯•å¾—å‡ºï¼šUNPOOLEDä¸ä¼šä½¿ç”¨è¿æ¥æ± ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šæ–°å»ºJDBCè¿æ¥å¯¹è±¡ã€‚POOLEDä¼šä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚ã€è¿™ä¸ªè¿æ¥æ± æ˜¯mybatisè‡ªå·±å®ç°çš„ã€‚ã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;dataSource type=<span class="string">&quot;JNDI&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>JNDIçš„æ–¹å¼ï¼šè¡¨ç¤ºå¯¹æ¥JNDIæœåŠ¡å™¨ä¸­çš„è¿æ¥æ± ã€‚è¿™ç§æ–¹å¼ç»™äº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹è¿æ¥æ± çš„æ¥å£ã€‚å¦‚æœæƒ³ä½¿ç”¨dbcpã€c3p0ã€druidï¼ˆå¾·é²ä¼Šï¼‰ç­‰ï¼Œéœ€è¦ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p><p>è¿™ç§å†é‡ç‚¹è¯´ä¸€ä¸‹type=&quot;POOLED&quot;çš„æ—¶å€™ï¼Œå®ƒçš„å±æ€§æœ‰å“ªäº›ï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æœ€å¤§è¿æ¥æ•°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolMaximumActiveConnections&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¿™æ˜¯ä¸€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶æ€æ—¥å¿—å¹¶é‡æ–°å°è¯•è·å–ä¸€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹ä¸€ç›´å¤±è´¥ä¸”ä¸æ‰“å°æ—¥å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolTimeToWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20000&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¼ºè¡Œå›å½’æ± çš„æ—¶é—´--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolMaximumCheckoutTime&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20000&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æœ€å¤šç©ºé—²æ•°é‡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolMaximumIdleConnections&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>poolMaximumActiveConnectionsï¼šæœ€å¤§çš„æ´»åŠ¨çš„è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼10</p><p>poolMaximumIdleConnectionsï¼šæœ€å¤§çš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼5</p><p>poolMaximumCheckoutTimeï¼šå¼ºè¡Œå›å½’æ± çš„æ—¶é—´ã€‚é»˜è®¤å€¼20ç§’ã€‚</p><p>poolTimeToWaitï¼šå½“æ— æ³•è·å–åˆ°ç©ºé—²è¿æ¥æ—¶ï¼Œæ¯éš”20ç§’æ‰“å°ä¸€æ¬¡æ—¥å¿—ï¼Œé¿å…å› ä»£ç é…ç½®æœ‰è¯¯ï¼Œå¯¼è‡´å‚»ç­‰ã€‚ï¼ˆæ—¶é•¿æ˜¯å¯ä»¥é…ç½®çš„ï¼‰</p><p>å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–å±æ€§ã€‚å¯¹äºè¿æ¥æ± æ¥è¯´ï¼Œä»¥ä¸Šå‡ ä¸ªå±æ€§æ¯”è¾ƒé‡è¦ã€‚</p><p>æœ€å¤§çš„æ´»åŠ¨çš„è¿æ¥æ•°é‡å°±æ˜¯è¿æ¥æ± è¿æ¥æ•°é‡çš„ä¸Šé™ã€‚é»˜è®¤å€¼10ï¼Œå¦‚æœæœ‰10ä¸ªè¯·æ±‚æ­£åœ¨ä½¿ç”¨è¿™10ä¸ªè¿æ¥ï¼Œç¬¬11ä¸ªè¯·æ±‚åªèƒ½ç­‰å¾…ç©ºé—²è¿æ¥ã€‚</p><p>æœ€å¤§çš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼5ï¼Œå¦‚ä½•å·²ç»æœ‰äº†5ä¸ªç©ºé—²è¿æ¥ï¼Œå½“ç¬¬6ä¸ªè¿æ¥è¦ç©ºé—²ä¸‹æ¥çš„æ—¶å€™ï¼Œè¿æ¥æ± ä¼šé€‰æ‹©å…³é—­è¯¥è¿æ¥å¯¹è±¡ã€‚æ¥å‡å°‘æ•°æ®åº“çš„å¼€é”€ã€‚</p><p>éœ€è¦æ ¹æ®ç³»ç»Ÿçš„å¹¶å‘æƒ…å†µï¼Œæ¥åˆç†è°ƒæ•´è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ä»¥åŠæœ€å¤šç©ºé—²æ•°é‡ã€‚å……åˆ†å‘æŒ¥æ•°æ®åº“è¿æ¥æ± çš„æ€§èƒ½ã€‚ã€å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæµ‹è¯•ï¼Œç„¶åè°ƒæ•´ä¸€ä¸ªåˆç†çš„æ•°é‡ã€‚ã€‘</p><p>ä¸‹å›¾æ˜¯é»˜è®¤é…ç½®ï¼š</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1660126871013-88f83ea4-94e9-4088-bdb4-06a4fd73866a.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_18%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>åœ¨ä»¥ä¸Šé…ç½®çš„åŸºç¡€ä¹‹ä¸Šï¼Œå¯ä»¥ç¼–å†™javaç¨‹åºæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPool</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config3.xml&quot;</span>));</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">Object</span> <span class="variable">selectCarByCarNum</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectCarByCarNum&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;select id=<span class="string">&quot;selectCarByCarNum&quot;</span> resultType=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span><br><span class="line">  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car <span class="type">where</span> <span class="variable">car_num</span> <span class="operator">=</span> <span class="string">&#x27;100&#x27;</span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1660128646511-8df1006a-dd85-48d1-9b88-ce7969d9b546.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_43%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10%2Fresize%2Cw_937%2Climit_0" alt="img"></p><h2 id="4-4-properties">4.4 properties</h2><p>mybatisæä¾›äº†æ›´åŠ çµæ´»çš„é…ç½®ï¼Œè¿æ¥æ•°æ®åº“çš„ä¿¡æ¯å¯ä»¥å•ç‹¬å†™åˆ°ä¸€ä¸ªå±æ€§èµ„æºæ–‡ä»¶ä¸­ï¼Œå‡è®¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºjdbc.propertiesæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/powernode</span></span><br></pre></td></tr></table></figure><p>åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--å¼•å…¥å¤–éƒ¨å±æ€§èµ„æºæ–‡ä»¶--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--$&#123;key&#125;ä½¿ç”¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™Javaç¨‹åºè¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProperties</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config4.xml&quot;</span>));</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="type">Object</span> <span class="variable">car</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectCarByCarNum&quot;</span>);</span><br><span class="line">System.out.println(car);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>propertiesä¸¤ä¸ªå±æ€§ï¼š</strong></p><p><strong>resourceï¼šè¿™ä¸ªå±æ€§ä»ç±»çš„æ ¹è·¯å¾„ä¸‹å¼€å§‹åŠ è½½ã€‚ã€å¸¸ç”¨çš„ã€‚ã€‘</strong></p><p><strong>urlï¼šä»æŒ‡å®šçš„urlåŠ è½½ï¼Œå‡è®¾æ–‡ä»¶æ”¾åœ¨d:/jdbc.propertiesï¼Œè¿™ä¸ªurlå¯ä»¥å†™æˆï¼šfile:///d:/jdbc.propertiesã€‚æ³¨æ„æ˜¯ä¸‰ä¸ªæ–œæ å“¦ã€‚</strong></p><p>æ³¨æ„ï¼šå¦‚æœä¸çŸ¥é“mybatis-config.xmlæ–‡ä»¶ä¸­æ ‡ç­¾çš„ç¼–å†™é¡ºåºçš„è¯ï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹å¼çŸ¥é“å®ƒçš„é¡ºåºï¼š</p><ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼šæŸ¥çœ‹dtdçº¦æŸæ–‡ä»¶ã€‚</li><li>ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡ideaçš„æŠ¥é”™æç¤ºä¿¡æ¯ã€‚ã€ä¸€èˆ¬é‡‡ç”¨è¿™ç§æ–¹å¼ã€‘</li></ul><h2 id="4-5-mapper">4.5 mapper</h2><p>mapperæ ‡ç­¾ç”¨æ¥æŒ‡å®šSQLæ˜ å°„æ–‡ä»¶çš„è·¯å¾„ï¼ŒåŒ…å«å¤šç§æŒ‡å®šæ–¹å¼ï¼Œè¿™é‡Œå…ˆä¸»è¦çœ‹å…¶ä¸­ä¸¤ç§ï¼š</p><p>ç¬¬ä¸€ç§ï¼šresourceï¼Œä»ç±»çš„æ ¹è·¯å¾„ä¸‹å¼€å§‹åŠ è½½ã€æ¯”urlå¸¸ç”¨ã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è¿™æ ·å†™çš„è¯ï¼Œå¿…é¡»ä¿è¯ç±»çš„æ ¹ä¸‹æœ‰CarMapper.xmlæ–‡ä»¶ã€‚</p><p>å¦‚æœç±»çš„æ ¹è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªåŒ…å«åštestï¼ŒCarMapper.xmlå¦‚æœæ”¾åœ¨teståŒ…ä¸‹çš„è¯ï¼Œè¿™ä¸ªé…ç½®åº”è¯¥æ˜¯è¿™æ ·å†™ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;test/CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ï¼šurlï¼Œä»æŒ‡å®šçš„urlä½ç½®åŠ è½½</p><p>å‡è®¾CarMapper.xmlæ–‡ä»¶æ”¾åœ¨dç›˜çš„æ ¹ä¸‹ï¼Œè¿™ä¸ªé…ç½®å°±éœ€è¦è¿™æ ·å†™ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///d:/CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>mapperè¿˜æœ‰å…¶ä»–çš„æŒ‡å®šæ–¹å¼ï¼Œåé¢å†çœ‹ï¼ï¼ï¼</strong></p><h1>äº”ã€æ‰‹å†™MyBatisæ¡†æ¶ï¼ˆæŒæ¡åŸç†ï¼‰</h1><p>è­¦ç¤ºï¼šè¯¥éƒ¨åˆ†å†…å®¹æœ‰éš¾åº¦ï¼ŒåŸºç¡€è¾ƒå¼±çš„ç¨‹åºå‘˜å¯èƒ½æœ‰äº›éƒ¨åˆ†æ˜¯å¬ä¸æ‡‚çš„ï¼Œå¦‚æœæ— æ³•è·Ÿä¸‹æ¥ï¼Œå¯ç›´æ¥è·³è¿‡ï¼Œä¸å½±å“åç»­çŸ¥è¯†ç‚¹çš„å­¦ä¹ ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦èƒ½å¤Ÿè·Ÿä¸‹æ¥ï¼Œå¿…ç„¶ä¼šè®©ä½ åŠ æ·±å¯¹MyBatisæ¡†æ¶çš„ç†è§£ã€‚</p><p><strong>æˆ‘ä»¬ç»™è‡ªå·±çš„æ¡†æ¶èµ·ä¸ªåï¼šGodBatisï¼ˆèµ·åçµæ„Ÿæ¥æºäºï¼šmy god!!! æˆ‘çš„å¤©å‘¢ï¼ï¼‰</strong></p><h2 id="5-1-dom4jè§£æXMLæ–‡ä»¶">5.1 dom4jè§£æXMLæ–‡ä»¶</h2><p>è¯¥éƒ¨åˆ†å†…å®¹ä¸å†èµ˜è¿°ï¼Œä¸ä¼šè§£æXMLçš„ï¼Œè¯·è§‚çœ‹è€æœå‰é¢è®²è§£çš„dom4jè§£æXMLæ–‡ä»¶çš„è§†é¢‘ã€‚</p><p>æ¨¡å—åï¼šparse-xml-by-dom4jï¼ˆæ™®é€šçš„Java Mavenæ¨¡å—ï¼‰</p><p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥dom4jçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.group<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>parse-xml-by-dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--dom4jä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.dom4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--jaxenä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--junitä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šç¼–å†™é…ç½®æ–‡ä»¶godbatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;sqlmapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šè§£ægodbatis-config.xml</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.dom4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Node;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨dom4jè§£æXMLæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ParseXMLByDom4j</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGodBatisConfig</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å–xmlï¼Œè·å–documentå¯¹è±¡</span></span><br><span class="line">        <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(Thread.currentThread().getContextClassLoader().getResourceAsStream(<span class="string">&quot;godbatis-config.xml&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–&lt;environments&gt;æ ‡ç­¾çš„defaultå±æ€§çš„å€¼</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">environmentsElt</span> <span class="operator">=</span> (Element)document.selectSingleNode(<span class="string">&quot;/configuration/environments&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">defaultId</span> <span class="operator">=</span> environmentsElt.attributeValue(<span class="string">&quot;default&quot;</span>);</span><br><span class="line">        System.out.println(defaultId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–environmentæ ‡ç­¾</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">environmentElt</span> <span class="operator">=</span> (Element)document.selectSingleNode(<span class="string">&quot;/configuration/environments/environment[@id=&#x27;&quot;</span> + defaultId + <span class="string">&quot;&#x27;]&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–äº‹åŠ¡ç®¡ç†å™¨ç±»å‹</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">transactionManager</span> <span class="operator">=</span> environmentElt.element(<span class="string">&quot;transactionManager&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">transactionManagerType</span> <span class="operator">=</span> transactionManager.attributeValue(<span class="string">&quot;type&quot;</span>);</span><br><span class="line">        System.out.println(transactionManagerType);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ•°æ®æºç±»å‹</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">dataSource</span> <span class="operator">=</span> environmentElt.element(<span class="string">&quot;dataSource&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dataSourceType</span> <span class="operator">=</span> dataSource.attributeValue(<span class="string">&quot;type&quot;</span>);</span><br><span class="line">        System.out.println(dataSourceType);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†æ•°æ®æºä¿¡æ¯å°è£…åˆ°Mapé›†åˆ</span></span><br><span class="line">        Map&lt;String,String&gt; dataSourceMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        dataSource.elements().forEach(propertyElt -&gt; &#123;</span><br><span class="line">            dataSourceMap.put(propertyElt.attributeValue(<span class="string">&quot;name&quot;</span>), propertyElt.attributeValue(<span class="string">&quot;value&quot;</span>));</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        dataSourceMap.forEach((k, v) -&gt; System.out.println(k + <span class="string">&quot;:&quot;</span> + v));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–sqlmapper.xmlæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">mappersElt</span> <span class="operator">=</span> (Element) document.selectSingleNode(<span class="string">&quot;/configuration/environments/mappers&quot;</span>);</span><br><span class="line">        mappersElt.elements().forEach(mapper -&gt; &#123;</span><br><span class="line">            System.out.println(mapper.attributeValue(<span class="string">&quot;resource&quot;</span>));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660182883453-edbe3196-015a-4c7e-b318-1593089d5496.png" alt="img"></p><p>ç¬¬å››æ­¥ï¼šç¼–å†™é…ç½®æ–‡ä»¶sqlmapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">    insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarByCarNum&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">    select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where car_num = #&#123;carNum&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äº”æ­¥ï¼šè§£æsqlmapper.xml</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSqlMapper</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"><span class="comment">// è¯»å–xmlï¼Œè·å–documentå¯¹è±¡</span></span><br><span class="line"><span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line"><span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(Thread.currentThread().getContextClassLoader().getResourceAsStream(<span class="string">&quot;sqlmapper.xml&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–namespace</span></span><br><span class="line"><span class="type">Element</span> <span class="variable">mapperElt</span> <span class="operator">=</span> (Element) document.selectSingleNode(<span class="string">&quot;/mapper&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">namespace</span> <span class="operator">=</span> mapperElt.attributeValue(<span class="string">&quot;namespace&quot;</span>);</span><br><span class="line">System.out.println(namespace);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–sql id</span></span><br><span class="line">mapperElt.elements().forEach(statementElt -&gt; &#123;</span><br><span class="line">    <span class="comment">// æ ‡ç­¾å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> statementElt.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;name:&quot;</span> + name);</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯selectæ ‡ç­¾ï¼Œè¿˜è¦è·å–å®ƒçš„resultType</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;select&quot;</span>.equals(name)) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resultType</span> <span class="operator">=</span> statementElt.attributeValue(<span class="string">&quot;resultType&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;resultType:&quot;</span> + resultType);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// sql id</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> statementElt.attributeValue(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;sqlId:&quot;</span> + id);</span><br><span class="line">    <span class="comment">// sqlè¯­å¥</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> statementElt.getTextTrim();</span><br><span class="line">    System.out.println(<span class="string">&quot;sql:&quot;</span> + sql);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660183887361-baffabf0-4caa-4e64-86d0-5d5dcfb1edd6.png" alt="img"></p><h2 id="5-2-GodBatis">5.2 GodBatis</h2><p>æ‰‹å†™æ¡†æ¶ä¹‹å‰ï¼Œå¦‚æœæ²¡æœ‰æ€è·¯ï¼Œå¯ä»¥å…ˆå‚è€ƒä¸€ä¸‹mybatisçš„å®¢æˆ·ç«¯ç¨‹åºï¼Œé€šè¿‡å®¢æˆ·ç«¯ç¨‹åºæ¥é€†æ¨éœ€è¦çš„ç±»ï¼Œå‚è€ƒä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="comment">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">        sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">// 4.æ‰§è¡ŒSQL</span></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;111&quot;</span>, <span class="string">&quot;å®é©¬X7&quot;</span>, <span class="string">&quot;70.3&quot;</span>, <span class="string">&quot;2010-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>,car);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">        <span class="comment">// 5.æäº¤</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">// å›æ»š</span></span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.rollback();</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// 6.å…³é—­</span></span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectOne</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="comment">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">        sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">// 4.æ‰§è¡ŒSQL</span></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car)sqlSession.selectOne(<span class="string">&quot;selectCarByCarNum&quot;</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line">        System.out.println(car);</span><br><span class="line">        <span class="comment">// 5.æäº¤</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">// å›æ»š</span></span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.rollback();</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// 6.å…³é—­</span></span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸€æ­¥ï¼šIDEAä¸­åˆ›å»ºæ¨¡å—">ç¬¬ä¸€æ­¥ï¼šIDEAä¸­åˆ›å»ºæ¨¡å—</h3><p>æ¨¡å—ï¼šgodbatisï¼ˆåˆ›å»ºæ™®é€šçš„Java Mavenæ¨¡å—ï¼Œæ‰“åŒ…æ–¹å¼jarï¼‰ï¼Œå¼•å…¥ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.god<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>godbatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--dom4jä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.dom4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--jaxenä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--junitä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥ï¼šèµ„æºå·¥å…·ç±»ï¼Œæ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ">ç¬¬äºŒæ­¥ï¼šèµ„æºå·¥å…·ç±»ï¼Œæ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èµ„æºå·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Resources</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»ç±»è·¯å¾„ä¸­è·å–é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> config</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¾“å…¥æµï¼Œè¯¥è¾“å…¥æµæŒ‡å‘ç±»è·¯å¾„ä¸­çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> InputStream <span class="title function_">getResourcesAsStream</span><span class="params">(String config)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Thread.currentThread().getContextClassLoader().getResourceAsStream(config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰SqlSessionFactoryBuilderç±»">ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰SqlSessionFactoryBuilderç±»</h3><p>æä¾›ä¸€ä¸ªæ— å‚æ•°æ„é€ æ–¹æ³•ï¼Œå†æä¾›ä¸€ä¸ªbuildæ–¹æ³•ï¼Œè¯¥buildæ–¹æ³•è¦è¿”å›SqlSessionFactoryå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SqlSessionFactoryå¯¹è±¡æ„å»ºå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionFactoryBuilder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ„å»ºå™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SqlSessionFactoryBuilder</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * è¯¥æ–¹æ³•ä¸»è¦åŠŸèƒ½æ˜¯ï¼šè¯»å–godbatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¹¶æ„å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputStream æŒ‡å‘æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactory <span class="title function_">build</span><span class="params">(InputStream inputStream)</span>&#123;</span><br><span class="line">        <span class="comment">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ•°æ®æºå¯¹è±¡</span></span><br><span class="line">        <span class="comment">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// è§£æé…ç½®æ–‡ä»¶ï¼Œè·å–æ‰€æœ‰çš„SQLæ˜ å°„å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// å°†ä»¥ä¸Šä¿¡æ¯å°è£…åˆ°SqlSessionFactoryå¯¹è±¡ä¸­</span></span><br><span class="line">        <span class="comment">// è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥ï¼šåˆ†æSqlSessionFactoryç±»ä¸­æœ‰å“ªäº›å±æ€§">ç¬¬å››æ­¥ï¼šåˆ†æSqlSessionFactoryç±»ä¸­æœ‰å“ªäº›å±æ€§</h3><ul><li><p>äº‹åŠ¡ç®¡ç†å™¨</p></li><li><p>GodJDBCTransaction</p></li><li><p>SQLæ˜ å°„å¯¹è±¡é›†åˆ</p></li><li><p>Map&lt;String, GodMappedStatement&gt;</p></li></ul><h3 id="ç¬¬äº”æ­¥ï¼šå®šä¹‰GodJDBCTransaction">ç¬¬äº”æ­¥ï¼šå®šä¹‰GodJDBCTransaction</h3><p>äº‹åŠ¡ç®¡ç†å™¨æœ€å¥½æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç„¶åæ¯ä¸€ä¸ªå…·ä½“çš„äº‹åŠ¡ç®¡ç†å™¨éƒ½å®ç°è¿™ä¸ªæ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº‹åŠ¡ç®¡ç†å™¨æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TransactionManager</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›æ»šäº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­äº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼€å¯è¿æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">openConnection</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Connection <span class="title function_">getConnection</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GodJDBCTransaction</span> <span class="keyword">implements</span> <span class="title class_">TransactionManager</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿æ¥å¯¹è±¡ï¼Œæ§åˆ¶äº‹åŠ¡æ—¶éœ€è¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Connection conn;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°æ®æºå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªåŠ¨æäº¤æ ‡å¿—ï¼š</span></span><br><span class="line"><span class="comment">     * trueè¡¨ç¤ºè‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="comment">     * falseè¡¨ç¤ºä¸è‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> autoCommit;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„é€ äº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> autoCommit</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GodJDBCTransaction</span><span class="params">(DataSource dataSource, <span class="type">boolean</span> autoCommit)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dataSource = dataSource;</span><br><span class="line">        <span class="built_in">this</span>.autoCommit = autoCommit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›æ»šäº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn.rollback();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">openConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.conn = dataSource.getConnection();</span><br><span class="line">            <span class="built_in">this</span>.conn.setAutoCommit(<span class="built_in">this</span>.autoCommit);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬å…­æ­¥ï¼šäº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºï¼Œå®šä¹‰GodUNPOOLEDDataSource">ç¬¬å…­æ­¥ï¼šäº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºï¼Œå®šä¹‰GodUNPOOLEDDataSource</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLFeatureNotSupportedException;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®æºå®ç°ç±»ï¼Œä¸ä½¿ç”¨è¿æ¥æ± </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GodUNPOOLEDDataSource</span> <span class="keyword">implements</span> <span class="title class_">javax</span>.sql.DataSource&#123;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GodUNPOOLEDDataSource</span><span class="params">(String driver, String url, String username, String password)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.url = url;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">(String username, String password)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PrintWriter <span class="title function_">getLogWriter</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLogWriter</span><span class="params">(PrintWriter out)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLoginTimeout</span><span class="params">(<span class="type">int</span> seconds)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLoginTimeout</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Logger <span class="title function_">getParentLogger</span><span class="params">()</span> <span class="keyword">throws</span> SQLFeatureNotSupportedException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">unwrap</span><span class="params">(Class&lt;T&gt; iface)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isWrapperFor</span><span class="params">(Class&lt;?&gt; iface)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸ƒæ­¥ï¼šå®šä¹‰GodMappedStatement">ç¬¬ä¸ƒæ­¥ï¼šå®šä¹‰GodMappedStatement</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SQLæ˜ å°„å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GodMappedStatement</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String sqlId;</span><br><span class="line">    <span class="keyword">private</span> String resultType;</span><br><span class="line">    <span class="keyword">private</span> String sql;</span><br><span class="line">    <span class="keyword">private</span> String parameterType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String sqlType;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;GodMappedStatement&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;sqlId=&#x27;&quot;</span> + sqlId + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, resultType=&#x27;&quot;</span> + resultType + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sql=&#x27;&quot;</span> + sql + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, parameterType=&#x27;&quot;</span> + parameterType + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sqlType=&#x27;&quot;</span> + sqlType + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSqlId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sqlId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlId</span><span class="params">(String sqlId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlId = sqlId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getResultType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> resultType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setResultType</span><span class="params">(String resultType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.resultType = resultType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSql</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sql;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSql</span><span class="params">(String sql)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sql = sql;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getParameterType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> parameterType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setParameterType</span><span class="params">(String parameterType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.parameterType = parameterType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSqlType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sqlType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlType</span><span class="params">(String sqlType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlType = sqlType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GodMappedStatement</span><span class="params">(String sqlId, String resultType, String sql, String parameterType, String sqlType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlId = sqlId;</span><br><span class="line">        <span class="built_in">this</span>.resultType = resultType;</span><br><span class="line">        <span class="built_in">this</span>.sql = sql;</span><br><span class="line">        <span class="built_in">this</span>.parameterType = parameterType;</span><br><span class="line">        <span class="built_in">this</span>.sqlType = sqlType;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬å…«æ­¥ï¼šå®Œå–„SqlSessionFactoryç±»">ç¬¬å…«æ­¥ï¼šå®Œå–„SqlSessionFactoryç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SqlSessionå·¥å‚å¯¹è±¡ï¼Œä½¿ç”¨SqlSessionFactoryå¯ä»¥è·å–ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TransactionManager transactionManager;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, GodMappedStatement&gt; mappedStatements;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SqlSessionFactory</span><span class="params">(TransactionManager transactionManager, Map&lt;String, GodMappedStatement&gt; mappedStatements)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.transactionManager = transactionManager;</span><br><span class="line">        <span class="built_in">this</span>.mappedStatements = mappedStatements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TransactionManager <span class="title function_">getTransactionManager</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTransactionManager</span><span class="params">(TransactionManager transactionManager)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.transactionManager = transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, GodMappedStatement&gt; <span class="title function_">getMappedStatements</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mappedStatements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMappedStatements</span><span class="params">(Map&lt;String, GodMappedStatement&gt; mappedStatements)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mappedStatements = mappedStatements;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¹æ­¥ï¼šå®Œå–„SqlSessionFactoryBuilderä¸­çš„buildæ–¹æ³•">ç¬¬ä¹æ­¥ï¼šå®Œå–„SqlSessionFactoryBuilderä¸­çš„buildæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SqlSessionFactoryå¯¹è±¡æ„å»ºå™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionFactoryBuilder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ„å»ºå™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SqlSessionFactoryBuilder</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * è¯¥æ–¹æ³•ä¸»è¦åŠŸèƒ½æ˜¯ï¼šè¯»å–godbatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¹¶æ„å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputStream æŒ‡å‘æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactory <span class="title function_">build</span><span class="params">(InputStream inputStream)</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">        <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(inputStream);</span><br><span class="line">        <span class="type">Element</span> <span class="variable">environmentsElt</span> <span class="operator">=</span> (Element) document.selectSingleNode(<span class="string">&quot;/configuration/environments&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">defaultEnv</span> <span class="operator">=</span> environmentsElt.attributeValue(<span class="string">&quot;default&quot;</span>);</span><br><span class="line">        <span class="type">Element</span> <span class="variable">environmentElt</span> <span class="operator">=</span> (Element) document.selectSingleNode(<span class="string">&quot;/configuration/environments/environment[@id=&#x27;&quot;</span> + defaultEnv + <span class="string">&quot;&#x27;]&quot;</span>);</span><br><span class="line">        <span class="comment">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ•°æ®æºå¯¹è±¡</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">dataSourceElt</span> <span class="operator">=</span> environmentElt.element(<span class="string">&quot;dataSource&quot;</span>);</span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> getDataSource(dataSourceElt);</span><br><span class="line">        <span class="comment">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">transactionManagerElt</span> <span class="operator">=</span> environmentElt.element(<span class="string">&quot;transactionManager&quot;</span>);</span><br><span class="line">        <span class="type">TransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> getTransactionManager(transactionManagerElt, dataSource);</span><br><span class="line">        <span class="comment">// è§£æé…ç½®æ–‡ä»¶ï¼Œè·å–æ‰€æœ‰çš„SQLæ˜ å°„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">mappers</span> <span class="operator">=</span> environmentsElt.element(<span class="string">&quot;mappers&quot;</span>);</span><br><span class="line">        Map&lt;String, GodMappedStatement&gt; mappedStatements = getMappedStatements(mappers);</span><br><span class="line">        <span class="comment">// å°†ä»¥ä¸Šä¿¡æ¯å°è£…åˆ°SqlSessionFactoryå¯¹è±¡ä¸­</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactory</span>(transactionManager, mappedStatements);</span><br><span class="line">        <span class="comment">// è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, GodMappedStatement&gt; <span class="title function_">getMappedStatements</span><span class="params">(Element mappers)</span> &#123;</span><br><span class="line">        Map&lt;String, GodMappedStatement&gt; mappedStatements = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        mappers.elements().forEach(mapperElt -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> mapperElt.attributeValue(<span class="string">&quot;resource&quot;</span>);</span><br><span class="line">                <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">                <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(Resources.getResourcesAsStream(resource));</span><br><span class="line">                <span class="type">Element</span> <span class="variable">mapper</span> <span class="operator">=</span> (Element) document.selectSingleNode(<span class="string">&quot;/mapper&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">namespace</span> <span class="operator">=</span> mapper.attributeValue(<span class="string">&quot;namespace&quot;</span>);</span><br><span class="line"></span><br><span class="line">                mapper.elements().forEach(sqlMapper -&gt; &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">sqlId</span> <span class="operator">=</span> sqlMapper.attributeValue(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> sqlMapper.getTextTrim();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">parameterType</span> <span class="operator">=</span> sqlMapper.attributeValue(<span class="string">&quot;parameterType&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">resultType</span> <span class="operator">=</span> sqlMapper.attributeValue(<span class="string">&quot;resultType&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">sqlType</span> <span class="operator">=</span> sqlMapper.getName().toLowerCase();</span><br><span class="line">                    <span class="comment">// å°è£…GodMappedStatementå¯¹è±¡</span></span><br><span class="line">                    <span class="type">GodMappedStatement</span> <span class="variable">godMappedStatement</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GodMappedStatement</span>(sqlId, resultType, sql, parameterType, sqlType);</span><br><span class="line">                    mappedStatements.put(namespace + <span class="string">&quot;.&quot;</span> + sqlId, godMappedStatement);</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> mappedStatements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TransactionManager <span class="title function_">getTransactionManager</span><span class="params">(Element transactionManagerElt, DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> transactionManagerElt.attributeValue(<span class="string">&quot;type&quot;</span>).toUpperCase();</span><br><span class="line">        <span class="type">TransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;JDBC&quot;</span>.equals(type)) &#123;</span><br><span class="line">            <span class="comment">// ä½¿ç”¨JDBCäº‹åŠ¡</span></span><br><span class="line">            transactionManager = <span class="keyword">new</span> <span class="title class_">GodJDBCTransaction</span>(dataSource, <span class="literal">false</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;MANAGED&quot;</span>.equals(type)) &#123;</span><br><span class="line">            <span class="comment">// äº‹åŠ¡ç®¡ç†å™¨æ˜¯äº¤ç»™JEEå®¹å™¨çš„</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DataSource <span class="title function_">getDataSource</span><span class="params">(Element dataSourceElt)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–æ‰€æœ‰æ•°æ®æºçš„å±æ€§é…ç½®</span></span><br><span class="line">        Map&lt;String, String&gt; dataSourceMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        dataSourceElt.elements().forEach(propertyElt -&gt; &#123;</span><br><span class="line">            dataSourceMap.put(propertyElt.attributeValue(<span class="string">&quot;name&quot;</span>), propertyElt.attributeValue(<span class="string">&quot;value&quot;</span>));</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">dataSourceType</span> <span class="operator">=</span> dataSourceElt.attributeValue(<span class="string">&quot;type&quot;</span>).toUpperCase();</span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;POOLED&quot;</span>.equals(dataSourceType)) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;UNPOOLED&quot;</span>.equals(dataSourceType)) &#123;</span><br><span class="line">            dataSource = <span class="keyword">new</span> <span class="title class_">GodUNPOOLEDDataSource</span>(dataSourceMap.get(<span class="string">&quot;driver&quot;</span>), dataSourceMap.get(<span class="string">&quot;url&quot;</span>), dataSourceMap.get(<span class="string">&quot;username&quot;</span>), dataSourceMap.get(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;JNDI&quot;</span>.equals(dataSourceType)) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬åæ­¥ï¼šåœ¨SqlSessionFactoryä¸­æ·»åŠ openSessionæ–¹æ³•">ç¬¬åæ­¥ï¼šåœ¨SqlSessionFactoryä¸­æ·»åŠ openSessionæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span>&#123;</span><br><span class="line">    transactionManager.openConnection();</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSession</span>(transactionManager, mappedStatements);</span><br><span class="line">    <span class="keyword">return</span> sqlSession;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬åä¸€æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­commit-rollback-closeæ–¹æ³•">ç¬¬åä¸€æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­commit rollback closeæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.god.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®åº“ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSession</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TransactionManager transactionManager;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, GodMappedStatement&gt; mappedStatements;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SqlSession</span><span class="params">(TransactionManager transactionManager, Map&lt;String, GodMappedStatement&gt; mappedStatements)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.transactionManager = transactionManager;</span><br><span class="line">        <span class="built_in">this</span>.mappedStatements = mappedStatements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            transactionManager.getConnection().commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            transactionManager.getConnection().rollback();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            transactionManager.getConnection().close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬åäºŒæ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„insertæ–¹æ³•">ç¬¬åäºŒæ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„insertæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sqlId è¦æ‰§è¡Œçš„sqlId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> obj   æ’å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">(String sqlId, Object obj)</span> &#123;</span><br><span class="line">    <span class="type">GodMappedStatement</span> <span class="variable">godMappedStatement</span> <span class="operator">=</span> mappedStatements.get(sqlId);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> transactionManager.getConnection();</span><br><span class="line">    <span class="comment">// è·å–sqlè¯­å¥</span></span><br><span class="line">    <span class="comment">// insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">godbatisSql</span> <span class="operator">=</span> godMappedStatement.getSql();</span><br><span class="line">    <span class="comment">// insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,?,?,?,?,?)</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> godbatisSql.replaceAll(<span class="string">&quot;#\\&#123;[a-zA-Z0-9_\\$]*&#125;&quot;</span>, <span class="string">&quot;?&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡ç‚¹ä¸€æ­¥</span></span><br><span class="line">    Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (godbatisSql.indexOf(<span class="string">&quot;#&quot;</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">beginIndex</span> <span class="operator">=</span> godbatisSql.indexOf(<span class="string">&quot;#&quot;</span>) + <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">endIndex</span> <span class="operator">=</span> godbatisSql.indexOf(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        map.put(index++, godbatisSql.substring(beginIndex, endIndex).trim());</span><br><span class="line">        godbatisSql = godbatisSql.substring(endIndex + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> PreparedStatement ps;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ps = connection.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»™?èµ‹å€¼</span></span><br><span class="line">        map.forEach((k, v) -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// è·å–javaå®ä½“ç±»çš„getæ–¹æ³•å</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">getMethodName</span> <span class="operator">=</span> <span class="string">&quot;get&quot;</span> + v.toUpperCase().charAt(<span class="number">0</span>) + v.substring(<span class="number">1</span>);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">getMethod</span> <span class="operator">=</span> obj.getClass().getDeclaredMethod(getMethodName);</span><br><span class="line">                ps.setString(k, getMethod.invoke(obj).toString());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ps.executeUpdate();</span><br><span class="line">        ps.close();</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬åä¸‰æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„selectOneæ–¹æ³•">ç¬¬åä¸‰æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„selectOneæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sqlId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parameterObj</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">selectOne</span><span class="params">(String sqlId, Object parameterObj)</span>&#123;</span><br><span class="line">    <span class="type">GodMappedStatement</span> <span class="variable">godMappedStatement</span> <span class="operator">=</span> mappedStatements.get(sqlId);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> transactionManager.getConnection();</span><br><span class="line">    <span class="comment">// è·å–sqlè¯­å¥</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">godbatisSql</span> <span class="operator">=</span> godMappedStatement.getSql();</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> godbatisSql.replaceAll(<span class="string">&quot;#\\&#123;[a-zA-Z0-9_\\$]*&#125;&quot;</span>, <span class="string">&quot;?&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œsql</span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ps = connection.prepareStatement(sql);</span><br><span class="line">        ps.setString(<span class="number">1</span>, parameterObj.toString());</span><br><span class="line">        rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">            <span class="comment">// å°†ç»“æœé›†å°è£…å¯¹è±¡ï¼Œé€šè¿‡åå°„</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">resultType</span> <span class="operator">=</span> godMappedStatement.getResultType();</span><br><span class="line">            Class&lt;?&gt; aClass = Class.forName(resultType);</span><br><span class="line">            Constructor&lt;?&gt; con = aClass.getDeclaredConstructor();</span><br><span class="line">            obj = con.newInstance();</span><br><span class="line">            <span class="comment">// ç»™å¯¹è±¡objå±æ€§èµ‹å€¼</span></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= columnCount; i++) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">columnName</span> <span class="operator">=</span> rsmd.getColumnName(i);</span><br><span class="line">                <span class="type">String</span> <span class="variable">setMethodName</span> <span class="operator">=</span> <span class="string">&quot;set&quot;</span> + columnName.toUpperCase().charAt(<span class="number">0</span>) + columnName.substring(<span class="number">1</span>);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setMethod</span> <span class="operator">=</span> aClass.getDeclaredMethod(setMethodName, aClass.getDeclaredField(columnName).getType());</span><br><span class="line">                setMethod.invoke(obj, rs.getString(columnName));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-3-GodBatisä½¿ç”¨Mavenæ‰“åŒ…">5.3 GodBatisä½¿ç”¨Mavenæ‰“åŒ…</h2><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660206374772-d21754cb-0c5f-4a14-921e-d083b4a791c3.png" alt="img"></p><p>æŸ¥çœ‹æœ¬åœ°ä»“åº“ä¸­æ˜¯å¦å·²ç»æœ‰jaråŒ…ï¼š</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660206446577-20e8dd84-6b05-48c8-a693-cb0dadfb7979.png" alt="img"></p><h2 id="5-4-ä½¿ç”¨GodBatis">5.4 ä½¿ç”¨GodBatis</h2><p>ä½¿ç”¨GodBatiså°±å’Œä½¿ç”¨MyBatisæ˜¯ä¸€æ ·çš„ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®åº“è¡¨t_user</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660206701289-4ed4661b-7c85-4157-b09c-3a7fe5207399.png" alt="img"></p><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ¨¡å—ï¼Œæ™®é€šçš„Java Mavenæ¨¡å—ï¼šgodbatis-test</p><p>ç¬¬ä¸‰æ­¥ï¼šå¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.powernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>godbatis-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--godbatisä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.god<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>godbatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šç¼–å†™pojoç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.godbatis.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, email=&#x27;&quot;</span> + email + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String id, String name, String email, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äº”æ­¥ï¼šç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼šgodbatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;UNPOOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬å…­æ­¥ï¼šç¼–å†™sqlæ˜ å°„æ–‡ä»¶ï¼šUserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">        insert into t_user(id,name,email,address) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;address&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.godbatis.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.godbatis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.godbatis.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.god.core.Resources;</span><br><span class="line"><span class="keyword">import</span> org.god.core.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.god.core.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.god.core.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GodBatisTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;zhangsan@1234.com&quot;</span>, <span class="string">&quot;åŒ—äº¬å¤§å…´åŒº&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourcesAsStream(<span class="string">&quot;godbatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;user.insertUser&quot;</span>, user);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectUserById</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourcesAsStream(<span class="string">&quot;godbatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;user.selectUserById&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬å…«æ­¥ï¼šè¿è¡Œç»“æœ</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660209177038-ecf701a2-1211-4f0c-b1f6-e2e16c1617d5.png" alt="img"></p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660209186576-54493410-47b7-4496-8007-471473cc6fc6.png" alt="img"></p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660209193124-908993c5-90d6-4426-a598-7aeac2a6b791.png" alt="img"></p><h2 id="5-5-æ€»ç»“MyBatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†">5.5 æ€»ç»“MyBatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">    insert into t_user(id,name,email,address) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;address&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.godbatis.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select id,name,email,address from t_user where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>ä¸ºä»€ä¹ˆinsertè¯­å¥ä¸­ #{} é‡Œå¡«å†™çš„å¿…é¡»æ˜¯å±æ€§åï¼Ÿ</li><li>ä¸ºä»€ä¹ˆselectè¯­å¥æŸ¥è¯¢ç»“æœåˆ—åè¦å±æ€§åä¸€è‡´ï¼Ÿ</li></ul><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1659578619308-ceb8077a-94a7-4f64-b41d-e54b3c14e7fb.png" alt="img"></p><h1>åœ¨WEBä¸­åº”ç”¨MyBatisï¼ˆä½¿ç”¨MVCæ¶æ„æ¨¡å¼ï¼‰</h1><div class="note info no-icon flat"><p><strong>ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡mybatisåœ¨webåº”ç”¨ä¸­æ€ä¹ˆç”¨</li><li>mybatisä¸‰å¤§å¯¹è±¡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</li><li>ThreadLocalåŸç†åŠä½¿ç”¨</li><li>å·©å›ºMVCæ¶æ„æ¨¡å¼</li><li>ä¸ºå­¦ä¹ MyBatisçš„æ¥å£ä»£ç†æœºåˆ¶åšå‡†å¤‡</li></ul></div><ul><li><p>**å®ç°åŠŸèƒ½ï¼š**é“¶è¡Œè´¦æˆ·è½¬è´¦</p></li><li><p>**ä½¿ç”¨æŠ€æœ¯ï¼š**HTML + Servlet + MyBatis</p></li><li><p>**WEBåº”ç”¨çš„åç§°ï¼š**bank</p></li></ul><h2 id="éœ€æ±‚æè¿°">éœ€æ±‚æè¿°</h2><p>å®ç°å°†é’±ä»Aè´¦æˆ·è½¬åˆ°Bè´¦æˆ·ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019000348.png"></div></div><h2 id="æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®">æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019000506.png"></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019000524.png"></div></div><h2 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ­å»º">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ­å»º</h3><ul><li>åˆ›å»ºWEBåº”ç”¨</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019000721.png"></div></div><ul><li>IDEAé…ç½®Tomcatï¼Œè¿™é‡ŒTomcatä½¿ç”¨10+ç‰ˆæœ¬ã€‚å¹¶éƒ¨ç½²åº”ç”¨åˆ°tomcatã€‚</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019000813.png"></div></div><ul><li>é»˜è®¤åˆ›å»ºçš„maven webåº”ç”¨æ²¡æœ‰javaå’Œresourcesç›®å½•ï¼Œè‡ªå·±æ‰‹åŠ¨åŠ ä¸Šå³å¯ã€‚</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019000941.png"></div></div><ul><li>web.xmlæ–‡ä»¶çš„ç‰ˆæœ¬è¾ƒä½ï¼Œå¯ä»¥ä»tomcat10çš„æ ·ä¾‹æ–‡ä»¶ä¸­å¤åˆ¶ï¼Œç„¶åä¿®æ”¹</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee</span></span></span><br><span class="line"><span class="string"><span class="tag">                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--&gt;</span></span><br><span class="line"><span class="comment">metadata-complete=&quot;false&quot;&gt; è¡¨ç¤ºæ”¯æŒé…ç½®æ–‡ä»¶å’Œæ³¨è§£</span></span><br><span class="line"><span class="comment">etadata-complete=&quot;true&quot;&gt; è¡¨ç¤ºåªæ”¯æŒé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">&lt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤index.jspæ–‡ä»¶ï¼Œå› ä¸ºè¯¥é¡¹ç›®ä¸ä½¿ç”¨JSPã€‚åªä½¿ç”¨htmlã€‚</li><li>ç¡®å®špom.xmlæ–‡ä»¶ä¸­çš„æ‰“åŒ…æ–¹å¼æ˜¯waråŒ…ã€‚</li><li>å¼•å…¥ç›¸å…³ä¾èµ–<ul><li>ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿®æ”¹ä¸º17</li><li>å¼•å…¥çš„ä¾èµ–åŒ…æ‹¬ï¼šmybatisï¼Œmysqlé©±åŠ¨ï¼Œjunitï¼Œlogbackï¼Œservletã€‚</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.powernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-004-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mybatis-004-web<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/bank<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatisä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--junitä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--logbackä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--servletä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>mybatis-004-web<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¼•å…¥ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œæ”¾åˆ°resourcesç›®å½•ä¸‹ï¼ˆå…¨éƒ¨æ”¾åˆ°ç±»çš„æ ¹è·¯å¾„ä¸‹ï¼‰<ul><li>mybatis-config.xml</li><li>AccountMapper.xml</li><li>logback.xml</li><li>jdbc.properties</li></ul></li></ul><div class="tabs" id="webç¯å¢ƒæ­å»º"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#webç¯å¢ƒæ­å»º-1">mybatis-config.xml</button></li><li class="tab"><button type="button" data-href="#webç¯å¢ƒæ­å»º-2">AccountMapper.xml</button></li><li class="tab"><button type="button" data-href="#webç¯å¢ƒæ­å»º-3">logback.xml</button></li><li class="tab"><button type="button" data-href="#webç¯å¢ƒæ­å»º-4">jdbc.properties</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="webç¯å¢ƒæ­å»º-1"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¸€å®šè¦æ³¨æ„è¿™é‡Œçš„è·¯å¾„å“¦ï¼ï¼ï¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;AccountMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="webç¯å¢ƒæ­å»º-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="webç¯å¢ƒæ­å»º-3"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="webç¯å¢ƒæ­å»º-4"><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/powernode</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="ç¬¬äºŒæ­¥ï¼šç¼–å†™å‰ç«¯é¡µé¢index-html">ç¬¬äºŒæ­¥ï¼šç¼–å†™å‰ç«¯é¡µé¢index.html</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019141945.png"></div></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é“¶è¡Œè´¦æˆ·è½¬è´¦<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--/bankæ˜¯åº”ç”¨çš„æ ¹ï¼Œéƒ¨ç½²webåº”ç”¨åˆ°tomcatçš„æ—¶å€™ä¸€å®šè¦æ³¨æ„è¿™ä¸ªåå­—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/bank/transfer&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    è½¬å‡ºè´¦æˆ·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fromActno&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    è½¬å…¥è´¦æˆ·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;toActno&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    è½¬è´¦é‡‘é¢ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;money&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è½¬è´¦&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„</h3><p>åˆ›å»ºåŒ…ç»“æ„ï¼š</p><ul><li>com.powernode.bank.pojo</li><li>com.powernode.bank.service</li><li>com.powernode.bank.service.impl</li><li>com.powernode.bank.dao</li><li>com.powernode.bank.dao.impl</li><li>com.powernode.bank.web.controller</li><li>com.powernode.bank.exception</li><li>com.powernode.bank.utilsï¼š<strong>å°†ä¹‹å‰ç¼–å†™çš„SqlSessionUtilå·¥å…·ç±»æ‹·è´åˆ°è¯¥åŒ…ä¸‹ã€‚</strong></li></ul><h3 id="ç¬¬å››æ­¥ï¼šå®šä¹‰å®ä½“ç±»">ç¬¬å››æ­¥ï¼šå®šä¹‰å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String actno;</span><br><span class="line">    <span class="keyword">private</span> Double balance;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(Long id, String actno, Double balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.actno = actno;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äº”æ­¥ï¼šç¼–å†™DAOå±‚æ¥å£å’Œå®ç°ç±»">ç¬¬äº”æ­¥ï¼šç¼–å†™DAOå±‚æ¥å£å’Œå®ç°ç±»</h3><p>åˆ†ædaoä¸­è‡³å°‘è¦æä¾›å‡ ä¸ªæ–¹æ³•ï¼Œæ‰èƒ½å®Œæˆè½¬è´¦ï¼š</p><ul><li>è½¬è´¦å‰éœ€è¦æŸ¥è¯¢ä½™é¢æ˜¯å¦å……è¶³ï¼š<code>selectByActno</code></li><li>è½¬è´¦æ—¶è¦æ›´æ–°è´¦æˆ·ï¼š<code>update</code></li></ul><div class="tabs" id="ç¼–å†™daoå±‚æ¥å£å’Œå®ç°ç±»"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ç¼–å†™daoå±‚æ¥å£å’Œå®ç°ç±»-1">AccountDao</button></li><li class="tab"><button type="button" data-href="#ç¼–å†™daoå±‚æ¥å£å’Œå®ç°ç±»-2">AccountDaoImpl</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ç¼–å†™daoå±‚æ¥å£å’Œå®ç°ç±»-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®è´¦å·è·å–è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> actno è´¦å·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> act è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1è¡¨ç¤ºæ›´æ–°æˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account act)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–å†™daoå±‚æ¥å£å’Œå®ç°ç±»-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="type">Account</span> <span class="variable">act</span> <span class="operator">=</span> (Account)sqlSession.selectOne(<span class="string">&quot;selectByActno&quot;</span>, actno);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">        <span class="keyword">return</span> act;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account act)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;update&quot;</span>, act);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="ç¬¬å…­æ­¥ï¼šç¼–å†™SQLæ˜ å°„æ–‡ä»¶">ç¬¬å…­æ­¥ï¼šç¼–å†™SQLæ˜ å°„æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByActno&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.bank.pojo.Account&quot;</span>&gt;</span></span><br><span class="line">        select * from t_act where actno = #&#123;actno&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">        update t_act set balance = #&#123;balance&#125; where actno = #&#123;actno&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™Serviceå±‚æ¥å£å’Œå®ç°ç±»">ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™Serviceå±‚æ¥å£å’Œå®ç°ç±»</h3><div class="tabs" id="ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-1">AccountService</button></li><li class="tab"><button type="button" data-href="#ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-2">AccountServiceImpl</button></li><li class="tab"><button type="button" data-href="#ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-3">ä½™é¢ä¸è¶³å¼‚å¸¸</button></li><li class="tab"><button type="button" data-href="#ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-4">åº”ç”¨å¼‚å¸¸</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·ä¸šåŠ¡ç±»ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é“¶è¡Œè´¦æˆ·è½¬æ­£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromActno è½¬å‡ºè´¦æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toActno è½¬å…¥è´¦æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money è½¬è´¦é‡‘é¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> MoneyNotEnoughException ä½™é¢ä¸è¶³å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AppException Appå‘ç”Ÿå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyNotEnoughException, AppException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyNotEnoughException, AppException &#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">fromAct</span> <span class="operator">=</span> accountDao.selectByActno(fromActno);</span><br><span class="line">        <span class="keyword">if</span> (fromAct.getBalance() &lt; money) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyNotEnoughException</span>(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸è¶³ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç¨‹åºå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ä½™é¢å……è¶³</span></span><br><span class="line">            <span class="comment">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span></span><br><span class="line">            <span class="type">Account</span> <span class="variable">toAct</span> <span class="operator">=</span> accountDao.selectByActno(toActno);</span><br><span class="line">            fromAct.setBalance(fromAct.getBalance() - money);</span><br><span class="line">            toAct.setBalance(toAct.getBalance() + money);</span><br><span class="line">            <span class="comment">// æ›´æ–°æ•°æ®åº“</span></span><br><span class="line">            accountDao.update(fromAct);</span><br><span class="line">            accountDao.update(toAct);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.bank.exception;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½™é¢ä¸è¶³å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MoneyNotEnoughException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyNotEnoughException</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyNotEnoughException</span><span class="params">(String msg)</span>&#123; <span class="built_in">super</span>(msg); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–å†™serviceå±‚æ¥å£å’Œå®ç°ç±»-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åº”ç”¨å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AppException</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AppException</span><span class="params">(String msg)</span>&#123; <span class="built_in">super</span>(msg); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="ç¬¬å…«æ­¥ï¼šç¼–å†™AccountController">ç¬¬å…«æ­¥ï¼šç¼–å†™AccountController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/transfer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">AccountService</span> <span class="variable">accountService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å–å“åº”æµ</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="comment">// è·å–è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fromActno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fromActno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">toActno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;toActno&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> Integer.parseInt(request.getParameter(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">        <span class="comment">// è°ƒç”¨ä¸šåŠ¡æ–¹æ³•å®Œæˆè½¬è´¦</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            accountService.transfer(fromActno, toActno, money);</span><br><span class="line">            out.print(<span class="string">&quot;&lt;h1&gt;è½¬è´¦æˆåŠŸï¼ï¼ï¼&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MoneyNotEnoughException e) &#123;</span><br><span class="line">            out.print(e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AppException e) &#123;</span><br><span class="line">            out.print(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/bank">http://localhost:8080/bank</a>ï¼Œæµ‹è¯•ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251019145127.png"></div></div><h2 id="MyBatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜">MyBatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜</h2><h3 id="MyBatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ">MyBatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ</h3><h4 id="SqlSessionFactoryBuilder">SqlSessionFactoryBuilder</h4><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯<code>æ–¹æ³•ä½œç”¨åŸŸ</code>ï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ï¼Œè¯¥ç±»ä¸å»ºè®®é•¿æœŸå¤ç”¨ï¼Œåº”å½“åœ¨åˆ›å»ºå®Œæˆåç«‹å³ä¸¢å¼ƒ</p><h4 id="SqlSessionFactory">SqlSessionFactory</h4><p>è¯¥ç±»æ˜¯åº”ç”¨ç¨‹åºä¸­å”¯ä¸€çš„<code>SqlSession</code>ç”Ÿäº§è€…ï¼Œåˆç†çš„ç”¨æ³•æ˜¯åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºè¿è¡ŒæœŸé—´åªåˆ›å»ºä¸€æ¬¡ï¼Œå› ä¸ºåˆ›å»ºå®ƒçš„è¿‡ç¨‹ä»£ä»·æ˜‚è´µï¼ˆéœ€è¦è§£æå…¨éƒ¨é…ç½®å’Œæ˜ å°„æ–‡ä»¶ï¼‰ã€‚å› æ­¤ï¼Œ<code>SqlSessionFactory</code> å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯<code>åº”ç”¨ä½œç”¨åŸŸ</code>ï¼ˆApplication Scopeï¼‰ï¼Œä¹Ÿå°±æ˜¯å•ä¾‹ã€‚ å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥å®‰å…¨åœ°å…±äº«è¿™åŒä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ç”¨å®ƒæ¥è·å–å„è‡ªç‹¬ç«‹çš„ SqlSessionã€‚</p><h4 id="SqlSession">SqlSession</h4><p>è¿™ä¸ªç±»ä»£è¡¨äº†ä¸æ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯ï¼Œç±»ä¼¼äº <code>JDBC</code> ä¸­çš„ Connection å¯¹è±¡ï¼Œå®ƒè´Ÿè´£æ‰§è¡ŒSQLè¯­å¥ã€ç®¡ç†äº‹åŠ¡ï¼Œå¹¶ç»´æŠ¤ç€ä¼šè¯çº§åˆ«çš„ä¸€çº§ç¼“å­˜ã€‚ <code>SqlSession</code>æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒç»ä¸èƒ½è¢«å¤šä¸ªçº¿ç¨‹å…±äº«ã€‚ å› æ­¤ï¼ŒSqlSession å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯<code>è¯·æ±‚ä½œç”¨åŸŸ</code>æˆ–<code>æ–¹æ³•ä½œç”¨åŸŸ</code>ã€‚ ä½ åº”è¯¥åœ¨å¼€å§‹ä¸€ä¸ªæ•°æ®åº“æ“ä½œæˆ–äº‹åŠ¡æ—¶æ‰“å¼€å®ƒï¼Œå¹¶ç¡®ä¿åœ¨æ“ä½œç»“æŸæ—¶ç«‹å³å…³é—­å®ƒï¼ˆå³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼‰ï¼Œä»¥é‡Šæ”¾å®ƒæ‰€æŒæœ‰çš„æ•°æ®åº“è¿æ¥èµ„æºã€‚ å¦‚æœå¿˜è®°å…³é—­ï¼Œå°†å¯¼è‡´ä¸¥é‡çš„å¹¶å‘é—®é¢˜å’Œæ•°æ®åº“è¿æ¥æ± è€—å°½ã€‚</p><h3 id="äº‹åŠ¡é—®é¢˜">äº‹åŠ¡é—®é¢˜</h3><p>åœ¨ä¹‹å‰çš„è½¬è´¦ä¸šåŠ¡ä¸­ï¼Œæ›´æ–°äº†ä¸¤ä¸ªè´¦æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒä»¬çš„<code>åŒæ—¶æˆåŠŸ</code>æˆ–<code>åŒæ—¶å¤±è´¥</code>ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨<code>äº‹åŠ¡</code>æœºåˆ¶ï¼Œåœ¨transferæ–¹æ³•å¼€å§‹æ‰§è¡Œæ—¶å¼€å¯äº‹åŠ¡ï¼Œç›´åˆ°ä¸¤ä¸ªæ›´æ–°éƒ½æˆåŠŸä¹‹åï¼Œå†æäº¤äº‹åŠ¡ï¼Œæˆ‘ä»¬å°è¯•å°†transferæ–¹æ³•è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyNotEnoughException, AppException &#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">fromAct</span> <span class="operator">=</span> accountDao.selectByActno(fromActno);</span><br><span class="line">        <span class="keyword">if</span> (fromAct.getBalance() &lt; money) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyNotEnoughException</span>(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸è¶³ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç¨‹åºå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ä½™é¢å……è¶³</span></span><br><span class="line">            <span class="comment">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span></span><br><span class="line">            <span class="type">Account</span> <span class="variable">toAct</span> <span class="operator">=</span> accountDao.selectByActno(toActno);</span><br><span class="line">            fromAct.setBalance(fromAct.getBalance() - money);</span><br><span class="line">            toAct.setBalance(toAct.getBalance() + money);</span><br><span class="line">            <span class="comment">// æ›´æ–°æ•°æ®åº“ï¼ˆæ·»åŠ äº‹åŠ¡ï¼‰</span></span><br><span class="line">            <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">            accountDao.update(fromAct);</span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿå¼‚å¸¸</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            s.toString();</span><br><span class="line">            accountDao.update(toAct);</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="å®ç‰©é—®é¢˜"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å®ç‰©é—®é¢˜-1">è¿è¡Œå‰æ•°æ®åº“ä¸­çš„æ•°æ®</button></li><li class="tab"><button type="button" data-href="#å®ç‰©é—®é¢˜-2">æ‰§è¡Œç¨‹åº</button></li><li class="tab"><button type="button" data-href="#å®ç‰©é—®é¢˜-3">å†æ¬¡æŸ¥çœ‹æ•°æ®åº“è¡¨</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å®ç‰©é—®é¢˜-1"><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020191250.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å®ç‰©é—®é¢˜-2"><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020191250.png"></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020191416.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å®ç‰©é—®é¢˜-3"><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020191526.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note danger no-icon flat"><p>æ˜æ˜è½¬è´¦å¤±è´¥äº†ï¼Œä½†é’±å´å°‘äº†ï¼Œè€Œå¯¹é¢çš„é’±æ²¡æœ‰å¢åŠ ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸»è¦æ˜¯å› ä¸ºserviceå’Œdaoä¸­ä½¿ç”¨çš„SqlSessionå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ª</p></div><p>è§£å†³æ–¹æ³•ï¼šä¸ºäº†ä¿è¯<code>service</code>å’Œ<code>dao</code>ä¸­ä½¿ç”¨çš„SqlSessionå¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œå¯ä»¥å°†SqlSessionå¯¹è±¡å­˜æ”¾åˆ°ThreadLocalå½“ä¸­ã€‚ä¿®æ”¹SqlSessionUtilå·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            sqlSessionFactory = sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;SqlSession&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯è°ƒç”¨ä¸€æ¬¡openSession()å¯è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯æ”¯æŒè‡ªåŠ¨æäº¤ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–°çš„ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (sqlSession == <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            local.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­SqlSessionå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSession</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(SqlSession sqlSession)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">        local.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹daoä¸­çš„æ–¹æ³•ï¼šå°†AccountDaoImplä¸­æ‰€æœ‰æ–¹æ³•ä¸­çš„æäº¤commitå’Œå…³é—­closeä»£ç å…¨éƒ¨åˆ é™¤ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="type">Account</span> <span class="variable">act</span> <span class="operator">=</span> (Account)sqlSession.selectOne(<span class="string">&quot;account.selectByActno&quot;</span>, actno);</span><br><span class="line">        <span class="keyword">return</span> act;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account act)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;account.update&quot;</span>, act);</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹serviceä¸­çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyNotEnoughException, AppException &#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">fromAct</span> <span class="operator">=</span> accountDao.selectByActno(fromActno);</span><br><span class="line">        <span class="keyword">if</span> (fromAct.getBalance() &lt; money) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyNotEnoughException</span>(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸è¶³ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç¨‹åºå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ä½™é¢å……è¶³</span></span><br><span class="line">            <span class="comment">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span></span><br><span class="line">            <span class="type">Account</span> <span class="variable">toAct</span> <span class="operator">=</span> accountDao.selectByActno(toActno);</span><br><span class="line">            fromAct.setBalance(fromAct.getBalance() - money);</span><br><span class="line">            toAct.setBalance(toAct.getBalance() + money);</span><br><span class="line">            <span class="comment">// æ›´æ–°æ•°æ®åº“ï¼ˆæ·»åŠ äº‹åŠ¡ï¼‰</span></span><br><span class="line">            <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">            accountDao.update(fromAct);</span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿå¼‚å¸¸</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            s.toString();</span><br><span class="line">            accountDao.update(toAct);</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            SqlSessionUtil.close(sqlSession);  <span class="comment">// åªä¿®æ”¹äº†è¿™ä¸€è¡Œä»£ç ã€‚</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æµ‹è¯•ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020192322.png"></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020192238.png"></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020192349.png"></div></div><p>æ­¤æ—¶è½¬è´¦å¤±è´¥,è´¦æˆ·é‡Œçš„ä½™é¢æ²¡æœ‰è¢«ä¿®æ”¹</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020192405.png"></div></div><h2 id="åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜">åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜</h2><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹DaoImplçš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="type">Account</span> <span class="variable">act</span> <span class="operator">=</span> (Account)sqlSession.selectOne(<span class="string">&quot;account.selectByActno&quot;</span>, actno);</span><br><span class="line">        <span class="keyword">return</span> act;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account act)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;account.update&quot;</span>, act);</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸éš¾å‘ç°ï¼Œè¿™ä¸ªdaoå®ç°ç±»ä¸­çš„æ–¹æ³•ä»£ç å¾ˆå›ºå®šï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€è¡Œä»£ç ï¼Œé€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨insertã€deleteã€updateã€selectç­‰æ–¹æ³•ï¼Œè¿™ä¸ªç±»ä¸­çš„æ–¹æ³•æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œæ—¢ç„¶æ˜¯è¿™æ ·ï¼Œ<strong>è¿™ä¸ªç±»æˆ‘ä»¬èƒ½ä¸èƒ½åŠ¨æ€çš„ç”Ÿæˆ</strong>ï¼Œä»¥åå¯ä»¥ä¸å†™è¿™ä¸ªç±»å—ï¼Ÿç­”æ¡ˆï¼šå¯ä»¥ã€‚</p><h1>ä½¿ç”¨javassistç”Ÿæˆç±»</h1><p>æ¥è‡ªç™¾åº¦ç™¾ç§‘ï¼š</p><blockquote><p>Javassistæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†æã€ç¼–è¾‘å’Œåˆ›å»ºJavaå­—èŠ‚ç çš„ç±»åº“ã€‚æ˜¯ç”±ä¸œäº¬å·¥ä¸šå¤§å­¦çš„æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ç³»çš„ Shigeru Chiba ï¼ˆåƒå¶ æ»‹ï¼‰æ‰€åˆ›å»ºçš„ã€‚å®ƒå·²åŠ å…¥äº†å¼€æ”¾æºä»£ç JBoss åº”ç”¨æœåŠ¡å™¨é¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Javassistå¯¹å­—èŠ‚ç æ“ä½œä¸ºJBosså®ç°åŠ¨æ€&quot;AOP&quot;æ¡†æ¶ã€‚</p></blockquote><h2 id="Javassistçš„ä½¿ç”¨">Javassistçš„ä½¿ç”¨</h2><p>è¦ä½¿ç”¨javassistï¼Œé¦–å…ˆè¦å¼•å…¥å®ƒçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.29.1-GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ·ä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavassistTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// è·å–ç±»æ± </span></span><br><span class="line">        <span class="type">ClassPool</span> <span class="variable">pool</span> <span class="operator">=</span> ClassPool.getDefault();</span><br><span class="line">        <span class="comment">// åˆ›å»ºç±»</span></span><br><span class="line">        <span class="type">CtClass</span> <span class="variable">ctClass</span> <span class="operator">=</span> pool.makeClass(<span class="string">&quot;com.powernode.javassist.Test&quot;</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–¹æ³•</span></span><br><span class="line">        <span class="comment">// 1.è¿”å›å€¼ç±»å‹ 2.æ–¹æ³•å 3.å½¢å¼å‚æ•°åˆ—è¡¨ 4.æ‰€å±ç±»</span></span><br><span class="line">        <span class="type">CtMethod</span> <span class="variable">ctMethod</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CtMethod</span>(CtClass.voidType, <span class="string">&quot;execute&quot;</span>, <span class="keyword">new</span> <span class="title class_">CtClass</span>[]&#123;&#125;, ctClass);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ–¹æ³•çš„ä¿®é¥°ç¬¦åˆ—è¡¨</span></span><br><span class="line">        ctMethod.setModifiers(Modifier.PUBLIC);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ–¹æ³•ä½“</span></span><br><span class="line">        ctMethod.setBody(<span class="string">&quot;&#123;System.out.println(\&quot;hello world\&quot;);&#125;&quot;</span>);</span><br><span class="line">        <span class="comment">// ç»™ç±»æ·»åŠ æ–¹æ³•</span></span><br><span class="line">        ctClass.addMethod(ctMethod);</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        Class&lt;?&gt; aClass = ctClass.toClass();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> aClass.newInstance();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> aClass.getDeclaredMethod(<span class="string">&quot;execute&quot;</span>);</span><br><span class="line">        method.invoke(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œè¦æ³¨æ„ï¼šåŠ ä¸¤ä¸ªå‚æ•°ï¼Œè¦ä¸ç„¶ä¼šæœ‰å¼‚å¸¸ã€‚</p><ul><li>â€“add-opens java.base/java.lang=ALL-UNNAMED</li><li>â€“add-opens java.base/sun.net.util=ALL-UNNAMED</li></ul><div class="tabs" id="javassistçš„ä½¿ç”¨"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#javassistçš„ä½¿ç”¨-1">IDEA 2023æ–°ç‰ˆåŠä»¥å</button></li><li class="tab"><button type="button" data-href="#javassistçš„ä½¿ç”¨-2">IDEA æ—§ç‰ˆ</button></li><li class="tab"><button type="button" data-href="#javassistçš„ä½¿ç”¨-3">è¿è¡Œç»“æœ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="javassistçš„ä½¿ç”¨-1"><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020212505.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="javassistçš„ä½¿ç”¨-2"><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020212529.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="javassistçš„ä½¿ç”¨-3"><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020212548.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="ä½¿ç”¨Javassistç”ŸæˆDaoImplç±»">ä½¿ç”¨Javassistç”ŸæˆDaoImplç±»</h2><p>ä½¿ç”¨JavassiståŠ¨æ€ç”ŸæˆDaoImplç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenerateDaoByJavassist</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®daoæ¥å£ç”Ÿæˆdaoæ¥å£çš„ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSession   sqlä¼šè¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> daoInterface daoæ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> daoæ¥å£ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getMapper</span><span class="params">(SqlSession sqlSession, Class daoInterface)</span> &#123;</span><br><span class="line">        <span class="type">ClassPool</span> <span class="variable">pool</span> <span class="operator">=</span> ClassPool.getDefault();</span><br><span class="line">        <span class="comment">// ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">        <span class="type">CtClass</span> <span class="variable">ctClass</span> <span class="operator">=</span> pool.makeClass(daoInterface.getPackageName() + <span class="string">&quot;.impl.&quot;</span> + daoInterface.getSimpleName() + <span class="string">&quot;Impl&quot;</span>);</span><br><span class="line">        <span class="comment">// æ¥å£</span></span><br><span class="line">        <span class="type">CtClass</span> <span class="variable">ctInterface</span> <span class="operator">=</span> pool.makeClass(daoInterface.getName());</span><br><span class="line">        <span class="comment">// ä»£ç†ç±»å®ç°æ¥å£</span></span><br><span class="line">        ctClass.addInterface(ctInterface);</span><br><span class="line">        <span class="comment">// è·å–æ‰€æœ‰çš„æ–¹æ³•</span></span><br><span class="line">        Method[] methods = daoInterface.getDeclaredMethods();</span><br><span class="line">        Arrays.stream(methods).forEach(method -&gt; &#123;</span><br><span class="line">            <span class="comment">// æ‹¼æ¥æ–¹æ³•çš„ç­¾å</span></span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">methodStr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">returnTypeName</span> <span class="operator">=</span> method.getReturnType().getName();</span><br><span class="line">            methodStr.append(returnTypeName);</span><br><span class="line">            methodStr.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> method.getName();</span><br><span class="line">            methodStr.append(methodName);</span><br><span class="line">            methodStr.append(<span class="string">&quot;(&quot;</span>);</span><br><span class="line">            Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; parameterTypes.length; i++) &#123;</span><br><span class="line">                methodStr.append(parameterTypes[i].getName());</span><br><span class="line">                methodStr.append(<span class="string">&quot; arg&quot;</span>);</span><br><span class="line">                methodStr.append(i);</span><br><span class="line">                <span class="keyword">if</span> (i != parameterTypes.length - <span class="number">1</span>) &#123;</span><br><span class="line">                    methodStr.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            methodStr.append(<span class="string">&quot;)&#123;&quot;</span>);</span><br><span class="line">            <span class="comment">// æ–¹æ³•ä½“å½“ä¸­çš„ä»£ç æ€ä¹ˆå†™ï¼Ÿ</span></span><br><span class="line">            <span class="comment">// è·å–sqlIdï¼ˆè¿™é‡Œéå¸¸é‡è¦ï¼šå› ä¸ºè¿™è¡Œä»£ç å¯¼è‡´ä»¥ånamespaceå¿…é¡»æ˜¯æ¥å£çš„å…¨é™å®šæ¥å£åï¼ŒsqlIdå¿…é¡»æ˜¯æ¥å£ä¸­æ–¹æ³•çš„æ–¹æ³•åã€‚ï¼‰</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sqlId</span> <span class="operator">=</span> daoInterface.getName() + <span class="string">&quot;.&quot;</span> + methodName;</span><br><span class="line">            <span class="comment">// è·å–SqlCommondType</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sqlCommondTypeName</span> <span class="operator">=</span> sqlSession.getConfiguration().getMappedStatement(sqlId).getSqlCommandType().name();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;SELECT&quot;</span>.equals(sqlCommondTypeName)) &#123;</span><br><span class="line">                methodStr.append(<span class="string">&quot;org.apache.ibatis.session.SqlSession sqlSession = com.powernode.bank.utils.SqlSessionUtil.openSession();&quot;</span>);</span><br><span class="line">                methodStr.append(<span class="string">&quot;Object obj = sqlSession.selectOne(\&quot;&quot;</span> + sqlId + <span class="string">&quot;\&quot;, arg0);&quot;</span>);</span><br><span class="line">                methodStr.append(<span class="string">&quot;return (&quot;</span> + returnTypeName + <span class="string">&quot;)obj;&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;UPDATE&quot;</span>.equals(sqlCommondTypeName)) &#123;</span><br><span class="line">                methodStr.append(<span class="string">&quot;org.apache.ibatis.session.SqlSession sqlSession = com.powernode.bank.utils.SqlSessionUtil.openSession();&quot;</span>);</span><br><span class="line">                methodStr.append(<span class="string">&quot;int count = sqlSession.update(\&quot;&quot;</span> + sqlId + <span class="string">&quot;\&quot;, arg0);&quot;</span>);</span><br><span class="line">                methodStr.append(<span class="string">&quot;return count;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            methodStr.append(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">            System.out.println(methodStr);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// åˆ›å»ºCtMethodå¯¹è±¡</span></span><br><span class="line">                <span class="type">CtMethod</span> <span class="variable">ctMethod</span> <span class="operator">=</span> CtMethod.make(methodStr.toString(), ctClass);</span><br><span class="line">                ctMethod.setModifiers(Modifier.PUBLIC);</span><br><span class="line">                <span class="comment">// å°†æ–¹æ³•æ·»åŠ åˆ°ç±»</span></span><br><span class="line">                ctClass.addMethod(ctMethod);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (CannotCompileException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line">            Class&lt;?&gt; aClass = ctClass.toClass();</span><br><span class="line">            Constructor&lt;?&gt; defaultCon = aClass.getDeclaredConstructor();</span><br><span class="line">            <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> defaultCon.newInstance();</span><br><span class="line">            <span class="keyword">return</span> o;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹AccountMapper.xmlæ–‡ä»¶ï¼šnamespaceå¿…é¡»æ˜¯daoæ¥å£çš„å…¨é™å®šåç§°ï¼Œidå¿…é¡»æ˜¯daoæ¥å£ä¸­çš„æ–¹æ³•åï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.bank.dao.AccountDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByActno&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.bank.pojo.Account&quot;</span>&gt;</span></span><br><span class="line">        select * from t_act where actno = #&#123;actno&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">        update t_act set balance = #&#123;balance&#125; where actno = #&#123;actno&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹serviceç±»ä¸­è·å–daoå¯¹è±¡çš„ä»£ç ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020213123.png"></div></div><p>å¯åŠ¨æœåŠ¡å™¨ï¼š<strong>å¯åŠ¨è¿‡ç¨‹ä¸­æ˜¾ç¤ºï¼ŒtomcatæœåŠ¡å™¨è‡ªåŠ¨æ·»åŠ äº†ä»¥ä¸‹çš„ä¸¤ä¸ªè¿è¡Œå‚æ•°ã€‚æ‰€ä»¥ä¸éœ€è¦å†å•ç‹¬é…ç½®ã€‚</strong></p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020213147.png"></div></div><h1>MyBatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨</h1><div class="note info no-icon flat"><p>å…¶å®ä»¥ä¸Šæ‰€è®²å†…å®¹mybatiså†…éƒ¨å·²ç»å®ç°äº†ã€‚ç›´æ¥è°ƒç”¨ä»¥ä¸‹ä»£ç å³å¯è·å–daoæ¥å£çš„ä»£ç†ç±»</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> (AccountDao)sqlSession.getMapper(AccountDao.class);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸Šä»£ç çš„å‰ææ˜¯ï¼š<strong>AccountMapper.xmlæ–‡ä»¶ä¸­çš„namespaceå¿…é¡»å’Œdaoæ¥å£çš„å…¨é™å®šåç§°ä¸€è‡´ï¼Œidå¿…é¡»å’Œdaoæ¥å£ä¸­æ–¹æ³•åä¸€è‡´ã€‚</strong></p><p>å°†serviceä¸­è·å–daoå¯¹è±¡çš„ä»£ç å†æ¬¡ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1660611871663-27d92f0e-e0f5-4ab5-9a6e-be949a5b5469.png" alt="img"></p><h1>MyBatiså°æŠ€å·§</h1><h2 id="å’Œ">#{}å’Œ${}</h2><ul><li><p><code>#&#123;&#125;</code>ï¼šå…ˆç¼–è¯‘sqlè¯­å¥ï¼Œå†ç»™å ä½ç¬¦ä¼ å€¼ï¼Œåº•å±‚æ˜¯PreparedStatementå®ç°ã€‚å¯ä»¥é˜²æ­¢sqlæ³¨å…¥ï¼Œæ¯”è¾ƒå¸¸ç”¨ã€‚</p></li><li><p><code>$&#123;&#125;</code>ï¼šå…ˆè¿›è¡Œsqlè¯­å¥æ‹¼æ¥ï¼Œç„¶åå†ç¼–è¯‘sqlè¯­å¥ï¼Œåº•å±‚æ˜¯Statementå®ç°ã€‚å­˜åœ¨sqlæ³¨å…¥ç°è±¡ã€‚åªæœ‰åœ¨éœ€è¦è¿›è¡Œsqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æƒ…å†µä¸‹æ‰ä¼šç”¨åˆ°ã€‚</p></li></ul><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ ¹æ®car_typeæŸ¥è¯¢æ±½è½¦</p></div><h3 id="">#{}</h3><p>ç¯å¢ƒå‡†å¤‡ï¼š</p><div class="tabs" id="111"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#111-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#111-2">jdbc.properties</button></li><li class="tab"><button type="button" data-href="#111-3">logback.xml</button></li><li class="tab"><button type="button" data-href="#111-4">utilså·¥å…·ç±»</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="111-1"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.powernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-005-antic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatisä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--junitä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--logbackä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="111-2"><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/powernode</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="111-3"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æŒ‰ç…§æ¯å¤©ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">FileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/TestWeb.log.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">FileNamePattern</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MaxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">MaxHistory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶æœ€å¤§çš„å¤§å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MaxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">MaxFileSize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--mybatis log configure--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ«,logbackæ—¥å¿—çº§åˆ«åŒ…æ‹¬äº”ä¸ªï¼šTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="111-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            sqlSessionFactory = sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;SqlSession&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯è°ƒç”¨ä¸€æ¬¡openSession()å¯è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯æ”¯æŒè‡ªåŠ¨æäº¤ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–°çš„ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (sqlSession == <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            local.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­SqlSessionå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSession</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(SqlSession sqlSession)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">        local.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tabs" id="222"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#222-1">Car</button></li><li class="tab"><button type="button" data-href="#222-2">mapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#222-3">mybatis-config.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="222-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String carNum;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> Double guidePrice;</span><br><span class="line">    <span class="keyword">private</span> String produceTime;</span><br><span class="line">    <span class="keyword">private</span> String carType;</span><br><span class="line">    <span class="comment">// æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// set getæ–¹æ³•</span></span><br><span class="line">    <span class="comment">// toStringæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="222-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®car_numè·å–Car</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> carType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Car&gt; <span class="title function_">selectByCarType</span><span class="params">(String carType)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="222-3"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>ç¼–å†™æµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * CarMapperæµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByCarType</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> (CarMapper) SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">        List&lt;Car&gt; cars = mapper.selectByCarType(<span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">        cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020215435.png"></div></div><p>é€šè¿‡æ‰§è¡Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œsqlè¯­å¥ä¸­æ˜¯å¸¦æœ‰ <code>?</code> çš„ï¼Œè¿™ä¸ª <code>?</code> å°±æ˜¯ä¹‹å‰åœ¨JDBCä¸­æ‰€å­¦çš„å ä½ç¬¦ï¼Œä¸“é—¨ç”¨æ¥æ¥æ”¶å€¼çš„ã€‚</p><p>æŠŠâ€œç‡ƒæ²¹è½¦â€ä»¥Stringç±»å‹çš„å€¼ï¼Œä¼ é€’ç»™ ?</p><p><strong><code>#&#123;&#125;</code>å®ƒä¼šå…ˆè¿›è¡Œsqlè¯­å¥çš„é¢„ç¼–è¯‘ï¼Œç„¶åå†ç»™å ä½ç¬¦ä¼ å€¼</strong></p><h3 id="-2">${}</h3><p>åŒæ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>$&#123;&#125;</code>æ¥å®Œæˆ</p><p>CarMapper.xmlæ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCarType&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">        where</span><br><span class="line">            <span class="comment">&lt;!--car_type = #&#123;carType&#125;--&gt;</span></span><br><span class="line">            car_type = $&#123;carType&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œæµ‹è¯•ç¨‹åºï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020215638.png"></div></div><p>è¿™æ—¶å€™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè§‚å¯Ÿç”Ÿæˆçš„sqlè¯­å¥ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020215747.png"></div></div><p>æ˜¾ç„¶<code>$&#123;&#125;</code>æ˜¯å…ˆè¿›è¡Œsqlè¯­å¥çš„<code>æ‹¼æ¥</code>ï¼Œç„¶åå†ç¼–è¯‘ï¼Œç‡ƒæ²¹è½¦æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨Sqlè¯­å¥ä¸­åº”å½“æ·»åŠ å•å¼•å·</p><p>ä¿®æ”¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCarType&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">        where</span><br><span class="line">            <span class="comment">&lt;!--car_type = #&#123;carType&#125;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--car_type = $&#123;carType&#125;--&gt;</span></span><br><span class="line">            car_type = &#x27;$&#123;carType&#125;&#x27;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note warning no-icon flat"><p>åœ¨æ—¥å¸¸çš„æ™®é€šéœ€æ±‚ä¸­ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨<code>#{}</code>çš„æ–¹å¼ã€‚<br><strong>åŸåˆ™ï¼šèƒ½ç”¨ #{} å°±ä¸ç”¨ ${}</strong></p></div><h3 id="ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨">ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨${}</h3><h4 id="å…³é”®å­—æ‹¼æ¥">å…³é”®å­—æ‹¼æ¥</h4><p>å½“éœ€è¦è¿›è¡Œsqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æ—¶å€™ã€‚å¿…é¡»ä½¿ç”¨<code>$&#123;&#125;</code></p><p>éœ€æ±‚ï¼šé€šè¿‡å‘sqlè¯­å¥ä¸­æ³¨å…¥<code>asc</code>æˆ–<code>desc</code>å…³é”®å­—ï¼Œæ¥å®Œæˆæ•°æ®çš„å‡åºæˆ–é™åºæ’åˆ—ã€‚</p><ul><li><strong>å°è¯•ä½¿ç”¨#{}ï¼š</strong></li></ul><div class="tabs" id="å°è¯•ä½¿ç”¨"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å°è¯•ä½¿ç”¨-1">CarMapper.java</button></li><li class="tab"><button type="button" data-href="#å°è¯•ä½¿ç”¨-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å°è¯•ä½¿ç”¨-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰çš„Car</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ascOrDesc ascæˆ–desc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAll</span><span class="params">(String ascOrDesc)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å°è¯•ä½¿ç”¨-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">  from</span><br><span class="line">  t_car</span><br><span class="line">  order by carNum #&#123;key&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æµ‹è¯•ç¨‹åº:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> (CarMapper) SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List&lt;Car&gt; cars = mapper.selectAll(<span class="string">&quot;desc&quot;</span>);</span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020220310.png"></div></div><p>æŠ¥é”™çš„åŸå› æ˜¯sqlè¯­å¥ä¸åˆæ³•ï¼Œå› ä¸ºé‡‡ç”¨è¿™ç§æ–¹å¼ä¼ å€¼ï¼Œç¨‹åºä¼šè®¤ä¸ºdescæ˜¯ä¸€ä¸ªå­—æ®µåï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œæœ€ç»ˆSQLè¯­å¥ä¼šæ˜¯è¿™æ ·ï¼š</p><blockquote><p>select id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType from t_car order by carNum â€˜descâ€™</p></blockquote><p>descæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä¸èƒ½å¸¦å•å¼•å·çš„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œsqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨<code>$&#123;&#125;</code></p><ul><li><strong>ä½¿ç”¨${}æ”¹é€ </strong></li></ul><p>ä¿®æ”¹xmlæ–‡ä»¶ä¸­çš„<code>#&#123;&#125;</code>ä¸º<code>$&#123;&#125;</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">  from</span><br><span class="line">  t_car</span><br><span class="line">  <span class="comment">&lt;!--order by carNum #&#123;key&#125;--&gt;</span></span><br><span class="line">  order by carNum $&#123;key&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œæµ‹è¯•ç¨‹åºï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020220310.png"></div></div><h4 id="æ‹¼æ¥è¡¨å">æ‹¼æ¥è¡¨å</h4><div class="note info no-icon flat"><p>ä¸šåŠ¡èƒŒæ™¯ï¼šå®é™…å¼€å‘ä¸­ï¼Œè‹¥æ•°æ®é‡å·¨å¤§å¯èƒ½é‡‡ç”¨åˆ†è¡¨çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œæ¯”å¦‚æ¯å¤©ç”Ÿæˆä¸€å¼ è¡¨ï¼Œè¡¨çš„åå­—ä¸æ—¥æœŸæŒ‚é’©ï¼Œä¾‹å¦‚ï¼š2022å¹´8æœˆ1æ—¥ç”Ÿæˆçš„è¡¨ï¼št_user20220108ï¼Œ2000å¹´1æœˆ1æ—¥ç”Ÿæˆçš„è¡¨ï¼št_user20000101ã€‚æ­¤æ—¶å‰ç«¯æŸ¥è¯¢æ—¶ä¼šæäº¤ä¸€ä¸ªå…·ä½“çš„æ—¥æœŸï¼Œè€Œåç«¯åˆ™æ ¹æ®æ—¥æœŸåŠ¨æ€æ‹¼æ¥è¡¨åã€‚</p></div><p>ä½¿ç”¨<code>#&#123;&#125;</code>æ‹¼æ¥è¡¨åä¼šæ˜¯è¿™æ ·ï¼šselect * from â€˜t_carâ€™<br>ä½¿ç”¨<code>$&#123;&#125;</code>æ‹¼æ¥è¡¨åä¼šæ˜¯è¿™æ ·ï¼šselect * from t_car</p><div class="tabs" id="æ‹¼æ¥è¡¨å"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ‹¼æ¥è¡¨å-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#æ‹¼æ¥è¡¨å-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ‹¼æ¥è¡¨å-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®è¡¨åæŸ¥è¯¢æ‰€æœ‰çš„Car</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAllByTableName</span><span class="params">(String tableName)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‹¼æ¥è¡¨å-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByTableName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">  from</span><br><span class="line">  $&#123;tableName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAllByTableName</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List&lt;Car&gt; cars = mapper.selectAllByTableName(<span class="string">&quot;t_car&quot;</span>);</span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020224121.png"></div></div><h4 id="æ‰¹é‡åˆ é™¤">æ‰¹é‡åˆ é™¤</h4><div class="note info no-icon flat"><p>ä¸šåŠ¡èƒŒæ™¯ï¼šä¸€æ¬¡åˆ é™¤å¤šæ¡è®°å½•ã€‚</p></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020224248.png"></div></div><p>å¯¹åº”çš„sqlè¯­å¥ï¼š</p><blockquote><ul><li>delete from t_user where id = 1 or id = 2 or id = 3;</li></ul></blockquote><ul><li>delete from t_user where id in(1, 2, 3);</li></ul><p>å‡è®¾ç°åœ¨ä½¿ç”¨inçš„æ–¹å¼å¤„ç†ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„å­—ç¬¦ä¸²ï¼š1, 2, 3</p><ul><li><p>ä½¿ç”¨<code>#&#123;&#125;</code> ï¼šdelete from t_user where id in(â€˜1,2,3â€™)<br><strong>æ‰§è¡Œé”™è¯¯ï¼š1292 - Truncated incorrect DOUBLE value: â€˜1,2,3â€™</strong></p></li><li><p>ä½¿ç”¨<code>$&#123;&#125;</code> ï¼šdelete from t_user where id in(1, 2, 3)</p></li></ul><div class="tabs" id="æ‰¹é‡åˆ é™¤"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ‰¹é‡åˆ é™¤-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡åˆ é™¤-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ‰¹é‡åˆ é™¤-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatch</span><span class="params">(String ids)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡åˆ é™¤-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatch&quot;</span>&gt;</span></span><br><span class="line">  delete from t_car where id in($&#123;ids&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatch</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.deleteBatch(<span class="string">&quot;1,2,3&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">    SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020224616.png"></div></div><h3 id="æ¨¡ç³ŠæŸ¥è¯¢">æ¨¡ç³ŠæŸ¥è¯¢</h3><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæŸ¥è¯¢å¥”é©°ç³»åˆ—çš„æ±½è½¦ã€‚ã€åªè¦å“ç‰Œbrandä¸­å«æœ‰å¥”é©°ä¸¤ä¸ªå­—çš„éƒ½æŸ¥è¯¢å‡ºæ¥ã€‚ã€‘</p></div><h4 id="ä½¿ç”¨">ä½¿ç”¨${}</h4><div class="tabs" id="æ¨¡ç³ŠæŸ¥è¯¢1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ¨¡ç³ŠæŸ¥è¯¢1-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#æ¨¡ç³ŠæŸ¥è¯¢1-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ¨¡ç³ŠæŸ¥è¯¢1-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å“ç‰Œè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> likeBrank</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectLikeByBrand</span><span class="params">(String likeBrank)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ¨¡ç³ŠæŸ¥è¯¢1-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeByBrand&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">  from</span><br><span class="line">  t_car</span><br><span class="line">  where</span><br><span class="line">  brand like &#x27;%$&#123;brand&#125;%&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectLikeByBrand</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List&lt;Car&gt; cars = mapper.selectLikeByBrand(<span class="string">&quot;å¥”é©°&quot;</span>);</span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020225010.png"></div></div><h4 id="ä½¿ç”¨-2">ä½¿ç”¨#{}</h4><p><strong>ç¬¬ä¸€ç§ï¼šconcatå‡½æ•°</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeByBrand&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">  from</span><br><span class="line">  t_car</span><br><span class="line">  where</span><br><span class="line">  brand like concat(&#x27;%&#x27;,#&#123;brand&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020225641.png"></div></div><p><strong>ç¬¬äºŒç§ï¼šåŒå¼•å·æ–¹å¼</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeByBrand&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">  from</span><br><span class="line">  t_car</span><br><span class="line">  where</span><br><span class="line">  brand like &quot;%&quot;#&#123;brand&#125;&quot;%&quot;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020225829.png"></div></div><h2 id="typeAliases">typeAliases</h2><p>åœ¨CarMapper.xmlé…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">        order by carNum $&#123;key&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCarType&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">        where</span><br><span class="line">            car_type = &#x27;$&#123;carType&#125;&#x27;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>resultTypeå±æ€§ç”¨æ¥æŒ‡å®šæŸ¥è¯¢ç»“æœé›†çš„å°è£…ç±»å‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦å†™åŒ…çš„å…¨ç±»åï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡typeAliasesæ ‡ç­¾æ¥èµ·åˆ«åï¼Œè¿™æ ·ï¼Œä»¥åä½¿ç”¨åˆ«åæ¥ä»£æ›¿åŒ…å+ç±»åçš„æ–¹å¼æ¥è·å–å¯¹è±¡ã€‚</p><h3 id="ç¬¬ä¸€ç§æ–¹å¼ï¼štypeAlias">ç¬¬ä¸€ç§æ–¹å¼ï¼štypeAlias</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Car&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆè¦æ³¨æ„typeAliasesæ ‡ç­¾çš„æ”¾ç½®ä½ç½®ï¼Œå¦‚æœä¸æ¸…æ¥šçš„è¯ï¼Œå¯ä»¥çœ‹çœ‹é”™è¯¯æç¤ºä¿¡æ¯ã€‚</li><li>typeAliasesæ ‡ç­¾ä¸­çš„typeAliaså¯ä»¥å†™å¤šä¸ªã€‚</li><li>typeAliasï¼š<ul><li>typeå±æ€§ï¼šæŒ‡å®šç»™å“ªä¸ªç±»èµ·åˆ«å</li><li>aliaså±æ€§ï¼šåˆ«åã€‚<ul><li>**aliaså±æ€§ä¸æ˜¯å¿…é¡»çš„ï¼Œ**å¦‚æœç¼ºçœçš„è¯ï¼Œtypeå±æ€§æŒ‡å®šçš„ç±»å‹åçš„ç®€ç±»åä½œä¸ºåˆ«åã€‚</li><li>**aliasæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ã€‚**ä¹Ÿå°±æ˜¯è¯´å‡è®¾alias=â€œCarâ€ï¼Œå†ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥CARï¼Œä¹Ÿå¯ä»¥carï¼Œä¹Ÿå¯ä»¥Carï¼Œéƒ½è¡Œã€‚</li></ul></li></ul></li></ul><h3 id="ç¬¬äºŒç§æ–¹å¼ï¼špackage">ç¬¬äºŒç§æ–¹å¼ï¼špackage</h3><p>å¦‚æœä¸€ä¸ªåŒ…ä¸‹çš„ç±»å¤ªå¤šï¼Œæ¯ä¸ªç±»éƒ½è¦èµ·åˆ«åï¼Œä¼šå¯¼è‡´typeAliasæ ‡ç­¾é…ç½®è¾ƒå¤šï¼Œæ‰€ä»¥mybatisä¹Ÿæä¾›packageçš„é…ç½®æ–¹å¼ï¼Œåªéœ€è¦æŒ‡å®šåŒ…åï¼Œè¯¥åŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½è‡ªåŠ¨èµ·åˆ«åï¼Œåˆ«åå°±æ˜¯ç®€ç±»åã€‚å¹¶ä¸”åˆ«åä¸åŒºåˆ†å¤§å°å†™ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.powernode.mybatis.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>packageä¹Ÿå¯ä»¥é…ç½®å¤šä¸ªï¼Œé€šå¸¸ä½¿ç”¨é€—å·åˆ†éš”ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªåŒ…å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.example.model,com.example.dto&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ä¹Ÿå¯ä»¥é…ç½®å¤šä¸ª &lt;package&gt; æ ‡ç­¾ï¼Œä½†æ›´å¸¸è§å’Œç®€æ´çš„æ˜¯ä½¿ç”¨é€—å·åˆ†éš” --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¦ä¸€ç§æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">    &lt;package name=&quot;com.example.model&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;package name=&quot;com.example.dto&quot;/&gt; </span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note warning no-icon flat"><p>å®é™…ä¸Šï¼ŒMyBatis åœ¨è§£æåŒ…ååˆ—è¡¨æ—¶ï¼Œæ”¯æŒçš„é»˜è®¤åˆ†éš”ç¬¦åŒ…æ‹¬é€—å·ï¼ˆ,ï¼‰ã€åˆ†å·ï¼ˆ;ï¼‰ã€ç©ºæ ¼ï¼ˆï¼‰ã€åˆ¶è¡¨ç¬¦ï¼ˆ\tï¼‰å’Œæ¢è¡Œç¬¦ï¼ˆ\nï¼‰ã€‚ä½†é€—å·æ˜¯æœ€å¸¸ç”¨å’Œæ¨èçš„æ–¹å¼ã€‚</p></div><h3 id="åœ¨SQLæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹">åœ¨SQLæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;CAR&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">        order by carNum $&#123;key&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCarType&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">        where</span><br><span class="line">            car_type = &#x27;$&#123;carType&#125;&#x27;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mappers">mappers</h2><p>SQLæ˜ å°„æ–‡ä»¶çš„é…ç½®æ–¹å¼åŒ…æ‹¬å››ç§ï¼š</p><ul><li>resourceï¼šä»ç±»è·¯å¾„ä¸­åŠ è½½</li><li>urlï¼šä»æŒ‡å®šçš„å…¨é™å®šèµ„æºè·¯å¾„ä¸­åŠ è½½</li><li>classï¼šä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å</li><li>packageï¼šå°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨</li></ul><h3 id="resource">resource</h3><p>è¿™ç§æ–¹å¼æ˜¯ä»ç±»è·¯å¾„ä¸­åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼è¦æ±‚SQLæ˜ å°„æ–‡ä»¶å¿…é¡»æ”¾åœ¨resourcesç›®å½•ä¸‹æˆ–å…¶å­ç›®å½•ä¸‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="url">url</h3><p>è¿™ç§æ–¹å¼æ˜¾ç„¶ä½¿ç”¨äº†ç»å¯¹è·¯å¾„çš„æ–¹å¼ï¼Œè¿™ç§é…ç½®å¯¹SQLæ˜ å°„æ–‡ä»¶å­˜æ”¾çš„ä½ç½®æ²¡æœ‰è¦æ±‚ï¼Œéšæ„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="class">class</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020233631.png"></div></div><p>å¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li>SQLæ˜ å°„æ–‡ä»¶å’Œmapperæ¥å£æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚</li><li>SQLæ˜ å°„æ–‡ä»¶çš„åå­—ä¹Ÿå¿…é¡»å’Œmapperæ¥å£åä¸€è‡´ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.BlogMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.PostMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°†CarMapper.xmlæ–‡ä»¶ç§»åŠ¨åˆ°å’Œmapperæ¥å£åŒä¸€ä¸ªç›®å½•ä¸‹ï¼š</p><ul><li>åœ¨resourcesç›®å½•ä¸‹æ–°å»ºï¼šcom/powernode/mybatis/mapperã€è¿™é‡Œåƒä¸‡è¦æ³¨æ„ï¼š<strong>ä¸èƒ½è¿™æ ·æ–°å»º com.powernode.mybatis.dao</strong>ã€‘</li><li>å°†CarMapper.xmlæ–‡ä»¶ç§»åŠ¨åˆ°mapperç›®å½•ä¸‹</li><li>ä¿®æ”¹mybatis-config.xmlæ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="package">package</h3><p>å¦‚æœclassè¾ƒå¤šï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§packageçš„æ–¹å¼ï¼Œä½†å‰ææ¡ä»¶å’Œä¸Šä¸€ç§æ–¹å¼ä¸€æ ·ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.powernode.mybatis.mapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ideaé…ç½®æ–‡ä»¶æ¨¡æ¿">ideaé…ç½®æ–‡ä»¶æ¨¡æ¿</h2><p>mybatis-config.xmlå’ŒSqlMapper.xmlæ–‡ä»¶å¯ä»¥åœ¨IDEAä¸­æå‰åˆ›å»ºå¥½æ¨¡æ¿ï¼Œä»¥åé€šè¿‡æ¨¡æ¿åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020233939.png"></div></div><h2 id="æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®">æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®</h2><p><strong>å‰æï¼šä¸»é”®æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</strong><br>ä¸šåŠ¡èƒŒæ™¯ï¼šä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè§’è‰²ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251020234134.png"></div></div><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ’å…¥ä¸€ä¸ªç”¨æˆ·æ•°æ®çš„åŒæ—¶éœ€è¦ç»™è¯¥ç”¨æˆ·åˆ†é…è§’è‰²ï¼šéœ€è¦å°†ç”Ÿæˆçš„ç”¨æˆ·çš„idæ’å…¥åˆ°è§’è‰²è¡¨çš„user_idå­—æ®µä¸Šã€‚å¦‚ä½•è·å¾—è¯¥ä¸»é”®ï¼Ÿ</p><ul><li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼šå¯ä»¥å…ˆæ’å…¥ç”¨æˆ·æ•°æ®ï¼Œå†å†™ä¸€æ¡æŸ¥è¯¢è¯­å¥è·å–idï¼Œç„¶åå†æ’å…¥user_idå­—æ®µã€‚ã€æ¯”è¾ƒéº»çƒ¦ã€‘</p></li><li><p>ç¬¬äºŒç§æ–¹å¼ï¼šmybatisæä¾›äº†ä¸€ç§æ–¹å¼æ›´åŠ ä¾¿æ·ã€‚</p></li></ul></div><p>Mybatisæä¾›çš„æ–¹æ³•ï¼š</p><div class="tabs" id="è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> car</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertUseGeneratedKeys</span><span class="params">(Car car)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">useGeneratedKeys=&quot;true&quot; ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼ã€‚</span></span><br><span class="line"><span class="comment">keyProperty=&quot;idâ€ æŒ‡å®šä¸»é”®å€¼èµ‹å€¼ç»™å¯¹è±¡çš„å“ªä¸ªå±æ€§ã€‚è¿™ä¸ªå°±è¡¨ç¤ºå°†ä¸»é”®å€¼è´¢å€¼ç»™Carå¯¹è±¡çš„idå±Šæ€§ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUseGeneratedKeys&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">  insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1>MyBatiså‚æ•°å¤„ç†</h1><p>è¡¨ï¼št_student</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021115750.png"></div></div><p>è¡¨ä¸­ç°æœ‰æ•°æ®ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021115813.png"></div></div><p>pojoç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Double height;</span><br><span class="line">    <span class="keyword">private</span> Character sex;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="comment">// constructor</span></span><br><span class="line">    <span class="comment">// setter and getter</span></span><br><span class="line">    <span class="comment">// toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•ä¸ªç®€å•ç±»å‹å‚æ•°">å•ä¸ªç®€å•ç±»å‹å‚æ•°</h2><p>ç®€å•ç±»å‹åŒ…æ‹¬ï¼š</p><ul><li>byte short int long float double char</li><li>Byte Short Integer Long Float Double Character</li><li>String</li><li>java.util.Date</li><li>java.sql.Date</li></ul><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ ¹æ®nameæŸ¥ã€æ ¹æ®idæŸ¥ã€æ ¹æ®birthæŸ¥ã€æ ¹æ®sexæŸ¥</p></div><div class="tabs" id="å•ä¸ªç®€å•å‚æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å•ä¸ªç®€å•å‚æ•°-1">StudentMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#å•ä¸ªç®€å•å‚æ•°-2">StudentMapper.xml</button></li><li class="tab"><button type="button" data-href="#å•ä¸ªç®€å•å‚æ•°-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å•ä¸ªç®€å•å‚æ•°-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­¦ç”Ÿæ•°æ®Sqlæ˜ å°„å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®nameæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Student <span class="title function_">selectById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®birthæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> birth</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectByBirth</span><span class="params">(Date birth)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®sexæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectBySex</span><span class="params">(Character sex)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å•ä¸ªç®€å•å‚æ•°-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student where name = #&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByBirth&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student where birth = #&#123;birth&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBySex&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student where sex = #&#123;sex&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å•ä¸ªç®€å•å‚æ•°-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(StudentMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByName</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Student&gt; students = mapper.selectByName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">        students.forEach(student -&gt; System.out.println(student));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectById(<span class="number">2L</span>);</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByBirth</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">birth</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>).parse(<span class="string">&quot;2022-08-16&quot;</span>);</span><br><span class="line">            List&lt;Student&gt; students = mapper.selectByBirth(birth);</span><br><span class="line">            students.forEach(student -&gt; System.out.println(student));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySex</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Student&gt; students = mapper.selectBySex(<span class="string">&#x27;ç”·&#x27;</span>);</span><br><span class="line">        students.forEach(student -&gt; System.out.println(student));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼Œç®€å•ç±»å‹å¯¹äºmybatisæ¥è¯´å¯ä»¥è‡ªåŠ¨ç±»å‹è¯†åˆ«çš„ï¼š</p><ul><li>ä¹Ÿå°±æ˜¯è¯´å¯¹äºmybatisæ¥è¯´ï¼Œå®ƒæ˜¯å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºps.setXxxx()æ–¹æ³•çš„ã€‚<strong>ps.setString()è¿˜æ˜¯ps.setInt()ã€‚å®ƒå¯ä»¥è‡ªåŠ¨æ¨æ–­ã€‚</strong></li></ul><p>å…¶å®SQLæ˜ å°„æ–‡ä»¶ä¸­çš„é…ç½®æ¯”è¾ƒå®Œæ•´çš„å†™æ³•æ˜¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">  select * from t_student where name = #&#123;name, javaType=String, jdbcType=VARCHAR&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­sqlè¯­å¥ä¸­çš„javaTypeï¼ŒjdbcTypeï¼Œä»¥åŠselectæ ‡ç­¾ä¸­çš„parameterTypeå±æ€§ï¼Œéƒ½æ˜¯ç”¨æ¥å¸®åŠ©mybatisè¿›è¡Œç±»å‹ç¡®å®šçš„ã€‚ä¸è¿‡è¿™äº›é…ç½®å¤šæ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚å› ä¸ºmybatiså®ƒæœ‰å¼ºå¤§çš„è‡ªåŠ¨ç±»å‹æ¨æ–­æœºåˆ¶ã€‚</p><ul><li>javaTypeï¼šå¯ä»¥çœç•¥</li><li>jdbcTypeï¼šå¯ä»¥çœç•¥</li><li>parameterTypeï¼šå¯ä»¥çœç•¥</li></ul><p><strong>å¦‚æœå‚æ•°åªæœ‰ä¸€ä¸ªçš„è¯ï¼Œ#{} é‡Œé¢çš„å†…å®¹å°±éšä¾¿å†™äº†ã€‚å¯¹äº ${} æ¥è¯´ï¼Œæ³¨æ„åŠ å•å¼•å·ã€‚</strong></p><h2 id="Mapå‚æ•°">Mapå‚æ•°</h2><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ ¹æ®nameå’ŒageæŸ¥è¯¢</p></div><div class="tabs" id="mapå‚æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mapå‚æ•°-1">StudentMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#mapå‚æ•°-2">StudentMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mapå‚æ•°-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®nameå’ŒageæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> paramMap</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Student&gt; <span class="title function_">selectByParamMap</span><span class="params">(Map&lt;String,Object&gt; paramMap)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mapå‚æ•°-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByParamMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">  select * from t_student where name = #&#123;nameKey&#125; and age = #&#123;ageKey&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><strong>è¯¥æ–¹å¼æ˜¯æ‰‹åŠ¨å°è£…Mapé›†åˆï¼Œå°†æ¯ä¸ªæ¡ä»¶ä»¥<code>key</code>å’Œ<code>value</code>çš„å½¢å¼å­˜æ”¾åˆ°é›†åˆä¸­ã€‚ç„¶ååœ¨ä½¿ç”¨çš„æ—¶å€™é€šè¿‡#{mapé›†åˆçš„key}æ¥å–å€¼ã€‚</strong></p><h2 id="å®ä½“ç±»å‚æ•°">å®ä½“ç±»å‚æ•°</h2><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ’å…¥ä¸€æ¡Studentæ•°æ®</p></div><div class="tabs" id="å®ä½“ç±»å‚æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å®ä½“ç±»å‚æ•°-1">StudentMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#å®ä½“ç±»å‚æ•°-2">studentMapper.xml</button></li><li class="tab"><button type="button" data-href="#å®ä½“ç±»å‚æ•°-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å®ä½“ç±»å‚æ•°-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿å­˜å­¦ç”Ÿæ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(Student student)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å®ä½“ç±»å‚æ•°-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">  insert into t_student values(null,#&#123;name&#125;,#&#123;age&#125;,#&#123;height&#125;,#&#123;birth&#125;,#&#123;sex&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å®ä½“ç±»å‚æ•°-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    student.setName(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">    student.setAge(<span class="number">30</span>);</span><br><span class="line">    student.setHeight(<span class="number">1.70</span>);</span><br><span class="line">    student.setSex(<span class="string">&#x27;ç”·&#x27;</span>);</span><br><span class="line">    student.setBirth(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.insert(student);</span><br><span class="line">    SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note warning no-icon flat"><p><strong>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š#{} é‡Œé¢å†™çš„æ˜¯å±æ€§åå­—ã€‚è¿™ä¸ªå±æ€§åå…¶æœ¬è´¨ä¸Šæ˜¯ï¼šset/getæ–¹æ³•åå»æ‰set/getä¹‹åçš„åå­—ã€‚</strong></p></div><h2 id="å¤šå‚æ•°">å¤šå‚æ•°</h2><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šé€šè¿‡nameå’ŒsexæŸ¥è¯¢</p></div><div class="tabs" id="å¤šå‚æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å¤šå‚æ•°-1">StudentMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#å¤šå‚æ•°-2">StudentMapper.xml</button></li><li class="tab"><button type="button" data-href="#å¤šå‚æ•°-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å¤šå‚æ•°-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®nameå’ŒsexæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sex</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Student&gt; <span class="title function_">selectByNameAndSex</span><span class="params">(String name, Character sex)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¤šå‚æ•°-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByNameAndSex&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">  select * from t_student where name = #&#123;name&#125; and sex = #&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¤šå‚æ•°-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByNameAndSex</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Student&gt; students = mapper.selectByNameAndSex(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&#x27;å¥³&#x27;</span>);</span><br><span class="line">    students.forEach(student -&gt; System.out.println(student));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021121433.png"></div></div><p>è¯¥å¼‚å¸¸ä¿¡æ¯æè¿°äº†ï¼šnameå‚æ•°æ‰¾ä¸åˆ°ï¼Œå¯ç”¨çš„å‚æ•°åŒ…æ‹¬[arg1, arg0, param1, param2]</p><p>ä¿®æ”¹StudentMapper.xmlé…ç½®æ–‡ä»¶ï¼šå°è¯•ä½¿ç”¨[arg1, arg0, param1, param2]</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByNameAndSex&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--select * from t_student where name = #&#123;name&#125; and sex = #&#123;sex&#125;--&gt;</span></span><br><span class="line">  select * from t_student where name = #&#123;arg0&#125; and sex = #&#123;arg1&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021141713.png"></div></div><p>å†æ¬¡å°è¯•ä¿®æ”¹StudentMapper.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByNameAndSex&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--select * from t_student where name = #&#123;name&#125; and sex = #&#123;sex&#125;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--select * from t_student where name = #&#123;arg0&#125; and sex = #&#123;arg1&#125;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--select * from t_student where name = #&#123;param1&#125; and sex = #&#123;param2&#125;--&gt;</span></span><br><span class="line">  select * from t_student where name = #&#123;arg0&#125; and sex = #&#123;param2&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>arg0 æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</li><li>param1æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</li><li>arg1 æ˜¯ç¬¬äºŒä¸ªå‚æ•°</li><li>param2æ˜¯ç¬¬äºŒä¸ªå‚æ•°</li></ul><div class="note info no-icon flat"><p>å®ç°åŸç†ï¼š<strong>å®é™…ä¸Šåœ¨mybatisåº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªmapé›†åˆï¼Œä»¥arg0/param1ä¸ºkeyï¼Œä»¥æ–¹æ³•ä¸Šçš„å‚æ•°ä¸ºvalue</strong></p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;arg0&quot;</span>, name);</span><br><span class="line">map.put(<span class="string">&quot;arg1&quot;</span>, sex);</span><br><span class="line">map.put(<span class="string">&quot;param1&quot;</span>, name);</span><br><span class="line">map.put(<span class="string">&quot;param2&quot;</span>, sex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€ä»¥å¯ä»¥è¿™æ ·å–å€¼ï¼š#&#123;arg0&#125; #&#123;arg1&#125; #&#123;param1&#125; #&#123;param2&#125;</span></span><br><span class="line"><span class="comment">// å…¶æœ¬è´¨å°±æ˜¯#&#123;mapé›†åˆçš„key&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Paramæ³¨è§£ï¼ˆå‘½åå‚æ•°ï¼‰">@Paramæ³¨è§£ï¼ˆå‘½åå‚æ•°ï¼‰</h2><p>å¯ä»¥ä¸ç”¨arg0 arg1 param1 param2,ä½¿ç”¨@Paramæ³¨è§£æ¥ä½¿ç”¨è‡ªå®šä¹‰çš„keyï¼Œè¿™æ ·å¯ä»¥å¢å¼ºå¯è¯»æ€§ã€‚</p><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šæ ¹æ®nameå’ŒageæŸ¥è¯¢</p></div><div class="tabs" id="@paramæ³¨è§£"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#@paramæ³¨è§£-1">StudentMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#@paramæ³¨è§£-2">StudentMapper.xml</button></li><li class="tab"><button type="button" data-href="#@paramæ³¨è§£-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="@paramæ³¨è§£-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®nameå’ŒageæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Student&gt; <span class="title function_">selectByNameAndAge</span><span class="params">(<span class="meta">@Param(value=&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;age&quot;)</span> <span class="type">int</span> age)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="@paramæ³¨è§£-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByNameAndAge&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">  select * from t_student where name = #&#123;name&#125; and age = #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="@paramæ³¨è§£-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByNameAndAge</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Student&gt; stus = mapper.selectByNameAndAge(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">20</span>);</span><br><span class="line">    stus.forEach(student -&gt; System.out.println(student));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Paramæºç åˆ†æ">@Paramæºç åˆ†æ</h2><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021142148.png"></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021142203.png"></div></div><h1>MyBatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜</h1><h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2><p>å¼•å…¥ä¾èµ–ï¼šmysqlé©±åŠ¨ä¾èµ–ã€mybatisä¾èµ–ã€logbackä¾èµ–ã€junitä¾èµ–ã€‚<br>å¼•å…¥é…ç½®æ–‡ä»¶ï¼šjdbc.propertiesã€mybatis-config.xmlã€logback.xml<br>åˆ›å»ºpojoç±»ï¼šCar<br>åˆ›å»ºMapperæ¥å£ï¼šCarMapper<br>åˆ›å»ºMapperæ¥å£å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ï¼šcom/powernode/mybatis/mapper/CarMapper.xml<br>åˆ›å»ºå•å…ƒæµ‹è¯•ï¼šCarMapperTest<br>æ‹·è´å·¥å…·ç±»ï¼šSqlSessionUtil</p><h2 id="è¿”å›Carå®ä½“ç±»">è¿”å›Carå®ä½“ç±»</h2><p>å½“æŸ¥è¯¢çš„ç»“æœï¼Œæœ‰å¯¹åº”çš„å®ä½“ç±»ï¼Œå¹¶ä¸”æŸ¥è¯¢ç»“æœåªæœ‰ä¸€æ¡æ—¶ï¼š</p><div class="tabs" id="è¿”å›carå®ä½“ç±»"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è¿”å›carå®ä½“ç±»-1">CarMapper.selectById</button></li><li class="tab"><button type="button" data-href="#è¿”å›carå®ä½“ç±»-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#è¿”å›carå®ä½“ç±»-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è¿”å›carå®ä½“ç±»-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idä¸»é”®æŸ¥è¯¢ï¼šç»“æœæœ€å¤šåªæœ‰ä¸€æ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Car <span class="title function_">selectById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è¿”å›carå®ä½“ç±»-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">        select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è¿”å›carå®ä½“ç±»-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> mapper.selectById(<span class="number">35L</span>);</span><br><span class="line">        System.out.println(car);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021142538.png"></div></div><p><strong>æŸ¥è¯¢ç»“æœæ˜¯ä¸€æ¡çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨Listé›†åˆ</strong></p><h2 id="è¿”å›List-Car">è¿”å›List<car></car></h2><div class="note info no-icon flat"><p>å½“æŸ¥è¯¢çš„è®°å½•æ¡æ•°æ˜¯å¤šæ¡çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨é›†åˆæ¥æ”¶ã€‚å¦‚æœä½¿ç”¨å•ä¸ªå®ä½“ç±»æ¥æ”¶ä¼šå‡ºç°å¼‚å¸¸ã€‚</p></div><div class="tabs" id="è¿”å›list-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è¿”å›list-2-1">CarMapper.selectAll</button></li><li class="tab"><button type="button" data-href="#è¿”å›list-2-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#è¿”å›list-2-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è¿”å›list-2-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰çš„Car</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è¿”å›list-2-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è¿”å›list-2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List&lt;Car&gt; cars = mapper.selectAll();</span><br><span class="line">    cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021142838.png"></div></div><h2 id="è¿”å›Map">è¿”å›Map</h2><p>å½“è¿”å›çš„æ•°æ®ï¼Œæ²¡æœ‰åˆé€‚çš„å®ä½“ç±»å¯¹åº”çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨Mapé›†åˆæ¥æ”¶ã€‚å°†å­—æ®µååškeyï¼Œå­—æ®µå€¼ä½œä¸ºvalueã€‚</p><p>æŸ¥è¯¢å¦‚æœå¯ä»¥ä¿è¯åªæœ‰ä¸€æ¡æ•°æ®ï¼Œåˆ™è¿”å›ä¸€ä¸ªMapé›†åˆå³å¯ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251021143029.png"></div></div><div class="tabs" id="è¿”å›map"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è¿”å›map-1">CarMapper.selectByIdRetMap</button></li><li class="tab"><button type="button" data-href="#è¿”å›map-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#è¿”å›map-3">æµ‹è¯•æ–¹æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è¿”å›map-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡idæŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œè¿”å›Mapé›†åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">selectByIdRetMap</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è¿”å›map-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByIdRetMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è¿”å›map-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAllByResultMap</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">carMapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List&lt;Car&gt; cars = carMapper.selectAllByResultMap();</span><br><span class="line">    System.out.println(cars);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info no-icon flat"><p><strong>resultMap=â€œmapâ€ï¼Œè¿™æ˜¯å› ä¸ºmybatiså†…ç½®äº†å¾ˆå¤šåˆ«åã€‚ã€å‚è§mybatiså¼€å‘æ‰‹å†Œã€‘</strong></p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByIdRetMap</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; car = mapper.selectByIdRetMap(<span class="number">35L</span>);</span><br><span class="line">    System.out.println(car);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note info no-icon flat"><p>å¦‚æœè¿”å›ä¸€æ¡è®°å½•åˆ™ç›´æ¥è¿”å›Mapé›†åˆå³å¯ï¼Œä½†å¦‚æœè¿”å›å¤šæ¡è®°å½•ã€‚åˆ™æœ€å¥½è¿”å›ä¸€ä¸ªListé›†åˆï¼Œå¦åˆ™ä¼šå‡ºç°å¼‚å¸¸ï¼š<code>TooManyResultsException</code></p></div><h2 id="è¿”å›List-Map">è¿”å›List<map></map></h2><p>æŸ¥è¯¢ç»“æœæ¡æ•°å¤§äºç­‰äº1æ¡æ•°æ®ï¼Œåˆ™å¯ä»¥è¿”å›ä¸€ä¸ªå­˜å‚¨Mapé›†åˆçš„Listé›†åˆã€‚<code>List&lt;Map&gt;</code>ç­‰åŒäº<code>List&lt;Car&gt;</code></p><p>åªæ˜¯è¿”å›çš„æ¥æ”¶å€¼æ¢ä¸º<code>List&lt;Map&gt;</code>ï¼Œå…¶ä»–ä¸éœ€è¦æ”¹å˜ã€‚</p><h2 id="resultMapç»“æœæ˜ å°„">resultMapç»“æœæ˜ å°„</h2><p>æŸ¥è¯¢ç»“æœçš„åˆ—åå’Œjavaå¯¹è±¡çš„å±æ€§åå¯¹åº”ä¸ä¸Šæ€ä¹ˆåŠï¼Ÿ</p><ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼šas ç»™åˆ—èµ·åˆ«å</li><li>ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„</li><li>ç¬¬ä¸‰ç§æ–¹å¼ï¼šæ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼ˆé…ç½®settingsï¼‰</li></ul><h3 id="ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„">ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„</h3><p>ä¸»è¦ä¸ºCarMapper.xmlæ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ª<code>resultMap</code>æ ‡ç­¾</p><div class="tabs" id="ä½¿ç”¨resultmapè¿›è¡Œç»“æœæ˜ å°„"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä½¿ç”¨resultmapè¿›è¡Œç»“æœæ˜ å°„-1">CarMapperæ¥å£</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä½¿ç”¨resultmapè¿›è¡Œç»“æœæ˜ å°„-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰Carï¼Œä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAllByResultMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœæ­£å¸¸ã€‚</p><h3 id="æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„">æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„</h3><p>ä½¿ç”¨è¿™ç§æ–¹å¼çš„å‰ææ˜¯ï¼šå±æ€§åéµå¾ªJavaçš„å‘½åè§„èŒƒï¼Œæ•°æ®åº“è¡¨çš„åˆ—åéµå¾ªSQLçš„å‘½åè§„èŒƒã€‚</p><p>Javaå‘½åè§„èŒƒï¼šé¦–å­—æ¯å°å†™ï¼Œåé¢æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œéµå¾ªé©¼å³°å‘½åæ–¹å¼ã€‚</p><p>SQLå‘½åè§„èŒƒï¼šå…¨éƒ¨å°å†™ï¼Œå•è¯ä¹‹é—´é‡‡ç”¨ä¸‹åˆ’çº¿åˆ†å‰²ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹çš„å¯¹åº”å…³ç³»ï¼š</p><table><thead><tr><th><strong>å®ä½“ç±»ä¸­çš„å±æ€§å</strong></th><th><strong>æ•°æ®åº“è¡¨çš„åˆ—å</strong></th></tr></thead><tbody><tr><td>carNum</td><td>car_num</td></tr><tr><td>carType</td><td>car_type</td></tr><tr><td>produceTime</td><td>produce_time</td></tr></tbody></table><p>å¦‚ä½•å¯ç”¨è¯¥åŠŸèƒ½ï¼Œåœ¨mybatis-config.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ”¾åœ¨propertiesæ ‡ç­¾åé¢--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">/**</span><br><span class="line">* æŸ¥è¯¢æ‰€æœ‰Carï¼Œå¯ç”¨é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">List<span class="tag">&lt;<span class="name">Car</span>&gt;</span> selectAllByMapUnderscoreToCamelCase();</span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByMapUnderscoreToCamelCase&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">@Test</span><br><span class="line">public void testSelectAllByMapUnderscoreToCamelCase()&#123;</span><br><span class="line">    CarMapper carMapper = SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List<span class="tag">&lt;<span class="name">Car</span>&gt;</span> cars = carMapper.selectAllByMapUnderscoreToCamelCase();</span><br><span class="line">    System.out.println(cars);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœæ­£å¸¸ã€‚</p><h1>åŠ¨æ€SQL</h1><p>æœ‰çš„ä¸šåŠ¡åœºæ™¯ä¹Ÿéœ€è¦SQLè¯­å¥è¿›è¡ŒåŠ¨æ€æ‹¼æ¥ï¼Œä¾‹å¦‚ï¼š</p><ul><li>æ‰¹é‡åˆ é™¤æ—¶ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„idä¸åŒåˆ é™¤ä¸åŒæ•°æ®ã€‚</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023143918.png"></div></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,......è¿™é‡Œçš„å€¼æ˜¯åŠ¨æ€çš„ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„idä¸åŒï¼Œå€¼æ˜¯ä¸åŒçš„);</span><br></pre></td></tr></table></figure><ul><li>å¤šæ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ¡ä»¶ä¸åŒï¼ŒæŸ¥è¯¢ä¸åŒæ•°æ®ã€‚</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023144017.png"></div></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> brand <span class="keyword">like</span> <span class="string">&#x27;ä¸°ç”°%&#x27;</span> <span class="keyword">and</span> guide_price <span class="operator">&gt;</span> <span class="number">30</span> <span class="keyword">and</span> .....;</span><br></pre></td></tr></table></figure><h2 id="ifæ ‡ç­¾">ifæ ‡ç­¾</h2><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šå¤šæ¡ä»¶æŸ¥è¯¢ã€‚</p></div><p>å¯èƒ½çš„æ¡ä»¶åŒ…æ‹¬ï¼šå“ç‰Œï¼ˆbrandï¼‰ã€æŒ‡å¯¼ä»·æ ¼ï¼ˆguide_priceï¼‰ã€æ±½è½¦ç±»å‹ï¼ˆcar_typeï¼‰</p><p>å…ˆåˆæ­¥å°è¯•ä¸€ä¸‹ç¼–å†™SQLè¯­å¥ï¼š</p><div class="tabs" id="if-æ ‡ç­¾"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#if-æ ‡ç­¾-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#if-æ ‡ç­¾-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#if-æ ‡ç­¾-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="if-æ ‡ç­¾-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line">    List&lt;Car&gt; <span class="title function_">selectByMultiCondition</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;carType&quot;)</span> String carType)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="if-æ ‡ç­¾-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">        select * from t_car where</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and car_type = #&#123;carType&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="if-æ ‡ç­¾-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMultiCondition</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">        List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;ä¸°ç”°&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">        System.out.println(cars);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023144748.png"></div></div><p>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºç©ºï¼Œå‰©ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¸ä¸ºç©ºï¼Œä¼šæ˜¯æ€æ ·å‘¢,åé¢ä¸¤æ¡è¯­å¥çš„andè¿˜ä¼šä¿ç•™å—ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023183215.png"></div></div><p>å‘ç°æŠ¥é”™äº†ï¼Œè¯´æ˜SQLè¯­æ³•æœ‰é—®é¢˜ï¼Œwhereåé¢å‡ºç°äº†andã€‚è¿™è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><ul><li>å¯ä»¥whereåé¢æ·»åŠ ä¸€ä¸ªæ’æˆç«‹çš„æ¡ä»¶ã€‚</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023183338.png"></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023183407.png"></div></div><p>å‘ç°å¦‚æœä¸‰ä¸ªæ¡ä»¶éƒ½æ˜¯ç©ºï¼Œæ­¤æ—¶èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023183512.png"></div></div><p>ä¸‰ä¸ªæ¡ä»¶éƒ½ä¸ä¸ºç©ºå‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;ä¸°ç”°&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023183623.png"></div></div><h2 id="whereæ ‡ç­¾">whereæ ‡ç­¾</h2><div class="note info no-icon flat"><p>whereæ ‡ç­¾çš„ä½œç”¨ï¼šè®©whereå­å¥æ›´åŠ åŠ¨æ€æ™ºèƒ½</p><ul><li>æ‰€æœ‰æ¡ä»¶éƒ½ä¸ºç©ºæ—¶ï¼Œwhereæ ‡ç­¾ä¿è¯ä¸ä¼šç”Ÿæˆwhereå­å¥ã€‚</li><li>è‡ªåŠ¨å»é™¤æŸäº›æ¡ä»¶<strong>å‰é¢</strong>å¤šä½™çš„andæˆ–orã€‚ã€‚</li></ul></div><p>ç»§ç»­ä½¿ç”¨ifæ ‡ç­¾ä¸­çš„éœ€æ±‚ã€‚</p><div class="tabs" id="whereæ ‡ç­¾"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#whereæ ‡ç­¾-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#whereæ ‡ç­¾-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="whereæ ‡ç­¾-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Carï¼Œä½¿ç”¨whereæ ‡ç­¾</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> brand</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> guidePrice</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> carType</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectByMultiConditionWithWhere</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;carType&quot;)</span> String carType)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="whereæ ‡ç­¾-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiConditionWithWhere&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      and brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      and guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      and car_type = #&#123;carType&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023184627.png"></div></div><p>å¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½æ˜¯ç©ºå‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiConditionWithWhere(<span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023184706.png"></div></div><p>å®ƒå¯ä»¥è‡ªåŠ¨å»æ‰å‰é¢å¤šä½™çš„andï¼Œé‚£å¯ä»¥è‡ªåŠ¨å»æ‰åé¢å¤šä½™çš„andå—ï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiConditionWithWhere&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      brand like #&#123;brand&#125;&quot;%&quot; and</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      guide_price &gt;= #&#123;guidePrice&#125; and</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      car_type = #&#123;carType&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®©æœ€åä¸€ä¸ªæ¡ä»¶ä¸ºç©º</span></span><br><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiConditionWithWhere(<span class="string">&quot;ä¸°ç”°&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023185032.png"></div></div><p>å¾ˆæ˜¾ç„¶ï¼Œåé¢å¤šä½™çš„andæ˜¯ä¸ä¼šè¢«å»é™¤çš„ã€‚</p><h2 id="trimæ ‡ç­¾">trimæ ‡ç­¾</h2><p>trimæ ‡ç­¾çš„å±æ€§ï¼š</p><ul><li>prefixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„è¯­å¥å‰<strong>æ·»åŠ </strong>å†…å®¹</li><li>suffixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„è¯­å¥å<strong>æ·»åŠ </strong>å†…å®¹</li><li>prefixOverridesï¼šå‰ç¼€<strong>è¦†ç›–æ‰ï¼ˆå»æ‰ï¼‰</strong></li><li>suffixOverridesï¼šåç¼€<strong>è¦†ç›–æ‰ï¼ˆå»æ‰ï¼‰</strong></li></ul><div class="tabs" id="trimæ ‡ç­¾"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#trimæ ‡ç­¾-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#trimæ ‡ç­¾-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#trimæ ‡ç­¾-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="trimæ ‡ç­¾-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; <span class="title function_">selectByMultiConditionWithTrim</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;carType&quot;)</span> String carType)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="trimæ ‡ç­¾-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiConditionWithTrim&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car</span><br><span class="line">  <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and|or&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      brand like #&#123;brand&#125;&quot;%&quot; and</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      guide_price &gt;= #&#123;guidePrice&#125; and</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      car_type = #&#123;carType&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="trimæ ‡ç­¾-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMultiConditionWithTrim</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    List&lt;Car&gt; cars = mapper.selectByMultiConditionWithTrim(<span class="string">&quot;ä¸°ç”°&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    System.out.println(cars);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>å¦‚æœæ‰€æœ‰æ¡ä»¶ä¸ºç©ºï¼Œwhereä¼šè¢«åŠ ä¸Šå—ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiConditionWithTrim(<span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023185312.png"></div></div><h2 id="setæ ‡ç­¾">setæ ‡ç­¾</h2><p>ä¸»è¦ä½¿ç”¨åœ¨updateè¯­å¥ä¸­ï¼Œç”¨æ¥ç”Ÿæˆsetå…³é”®å­—ï¼ŒåŒæ—¶å»æ‰æœ€åå¤šä½™çš„â€œ,â€</p><p>æ¯”å¦‚åªæ›´æ–°æäº¤ä¸ä¸ºç©ºçš„å­—æ®µï¼Œå¦‚æœæäº¤çš„æ•°æ®æ˜¯ç©ºæˆ–è€…&quot;&quot;ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µæˆ‘ä»¬å°†ä¸æ›´æ–°ã€‚</p><div class="tabs" id="setæ ‡ç­¾"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#setæ ‡ç­¾-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#setæ ‡ç­¾-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#setæ ‡ç­¾-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="setæ ‡ç­¾-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateWithSet</span><span class="params">(Car car)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="setæ ‡ç­¾-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateWithSet&quot;</span>&gt;</span></span><br><span class="line">  update t_car</span><br><span class="line">  <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carNum != null and carNum != &#x27;&#x27;&quot;</span>&gt;</span>car_num = #&#123;carNum&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span>brand = #&#123;brand&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span>guide_price = #&#123;guidePrice&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;produceTime != null and produceTime != &#x27;&#x27;&quot;</span>&gt;</span>produce_time = #&#123;produceTime&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span>car_type = #&#123;carType&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="setæ ‡ç­¾-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateWithSet</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="number">38L</span>,<span class="string">&quot;1001&quot;</span>,<span class="string">&quot;ä¸°ç”°éœ¸é“2&quot;</span>,<span class="number">10.0</span>,<span class="string">&quot;&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.updateWithSet(car);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">    SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="choose-when-otherwise">choose when otherwise</h2><p>è¿™ä¸‰ä¸ªæ ‡ç­¾æ˜¯åœ¨ä¸€èµ·ä½¿ç”¨çš„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">when</span>&gt;</span><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">when</span>&gt;</span><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">when</span>&gt;</span><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span><span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç­‰åŒäºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªæœ‰ä¸€ä¸ªåˆ†æ”¯ä¼šè¢«é€‰æ‹©ï¼ï¼ï¼ï¼</p><div class="note info no-icon flat"><p>éœ€æ±‚ï¼šå…ˆæ ¹æ®å“ç‰ŒæŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰æä¾›å“ç‰Œï¼Œå†æ ¹æ®æŒ‡å¯¼ä»·æ ¼æŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰æä¾›æŒ‡å¯¼ä»·æ ¼ï¼Œå°±æ ¹æ®ç”Ÿäº§æ—¥æœŸæŸ¥è¯¢ã€‚</p></div><div class="tabs" id="choose"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#choose-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#choose-2">CarMapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="choose-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; <span class="title function_">selectWithChoose</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;produceTime&quot;)</span> String produceTime)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="choose-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectWithChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">  select * from t_car</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        produce_time &gt;= #&#123;produceTime&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023202316.png"></div></div><h2 id="foreachæ ‡ç­¾">foreachæ ‡ç­¾</h2><p>å¾ªç¯æ•°ç»„æˆ–é›†åˆï¼ŒåŠ¨æ€ç”Ÿæˆsqlï¼Œæ¯”å¦‚è¿™æ ·çš„SQLï¼š</p><div class="tabs" id="foreachæ ‡ç­¾"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#foreachæ ‡ç­¾-1">æ‰¹é‡åˆ é™¤</button></li><li class="tab"><button type="button" data-href="#foreachæ ‡ç­¾-2">æ‰¹é‡æ·»åŠ </button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="foreachæ ‡ç­¾-1"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">or</span> id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">or</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="foreachæ ‡ç­¾-2"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> t_car <span class="keyword">values</span></span><br><span class="line">  (<span class="keyword">null</span>,<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;å‡¯ç¾ç‘&#x27;</span>,<span class="number">35.0</span>,<span class="string">&#x27;2010-10-11&#x27;</span>,<span class="string">&#x27;ç‡ƒæ²¹è½¦&#x27;</span>),</span><br><span class="line">  (<span class="keyword">null</span>,<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;æ¯”äºšè¿ªå”&#x27;</span>,<span class="number">31.0</span>,<span class="string">&#x27;2020-11-11&#x27;</span>,<span class="string">&#x27;æ–°èƒ½æº&#x27;</span>),</span><br><span class="line">  (<span class="keyword">null</span>,<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;æ¯”äºšè¿ªå®‹&#x27;</span>,<span class="number">32.0</span>,<span class="string">&#x27;2020-10-11&#x27;</span>,<span class="string">&#x27;æ–°èƒ½æº&#x27;</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="æ‰¹é‡åˆ é™¤-2">æ‰¹é‡åˆ é™¤</h3><ul><li>ç”¨inæ¥åˆ é™¤</li></ul><div class="tabs" id="æ‰¹é‡åˆ é™¤-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ‰¹é‡åˆ é™¤-2-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡åˆ é™¤-2-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡åˆ é™¤-2-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ‰¹é‡åˆ é™¤-2-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é€šè¿‡foreachå®Œæˆæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchByForeach</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> Long[] ids)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡åˆ é™¤-2-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatchByForeach&quot;</span>&gt;</span></span><br><span class="line">  delete from t_car where id in</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">    #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡åˆ é™¤-2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchByForeach</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.deleteBatchByForeach(<span class="keyword">new</span> <span class="title class_">Long</span>[]&#123;<span class="number">40L</span>, <span class="number">41L</span>, <span class="number">42L</span>&#125;);</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">    SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023202719.png"></div></div><ul><li>ç”¨oræ¥åˆ é™¤</li></ul><div class="tabs" id="æ‰¹é‡åˆ é™¤1-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ‰¹é‡åˆ é™¤1-2-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡åˆ é™¤1-2-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡åˆ é™¤1-2-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ‰¹é‡åˆ é™¤1-2-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é€šè¿‡foreachå®Œæˆæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchByForeach2</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> Long[] ids)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡åˆ é™¤1-2-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatchByForeach2&quot;</span>&gt;</span></span><br><span class="line">  delete from t_car where</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">    id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡åˆ é™¤1-2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchByForeach2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.deleteBatchByForeach2(<span class="keyword">new</span> <span class="title class_">Long</span>[]&#123;<span class="number">40L</span>, <span class="number">41L</span>, <span class="number">42L</span>&#125;);</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">    SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023202859.png"></div></div><h3 id="æ‰¹é‡æ·»åŠ ">æ‰¹é‡æ·»åŠ </h3><div class="tabs" id="æ‰¹é‡æ·»åŠ 1-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ‰¹é‡æ·»åŠ 1-2-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡æ·»åŠ 1-2-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#æ‰¹é‡æ·»åŠ 1-2-3">æµ‹è¯•ä»£ç </button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ‰¹é‡æ·»åŠ 1-2-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">insertBatchByForeach</span><span class="params">(<span class="meta">@Param(&quot;cars&quot;)</span> List&lt;Car&gt; cars)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡æ·»åŠ 1-2-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertBatchByForeach&quot;</span>&gt;</span></span><br><span class="line">  insert into t_car values </span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;cars&quot;</span> <span class="attr">item</span>=<span class="string">&quot;car&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">    (null,#&#123;car.carNum&#125;,#&#123;car.brand&#125;,#&#123;car.guidePrice&#125;,#&#123;car.produceTime&#125;,#&#123;car.carType&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ‰¹é‡æ·»åŠ 1-2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertBatchByForeach</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;å…°åšåŸºå°¼&quot;</span>, <span class="number">100.0</span>, <span class="string">&quot;1998-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;å…°åšåŸºå°¼&quot;</span>, <span class="number">100.0</span>, <span class="string">&quot;1998-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;å…°åšåŸºå°¼&quot;</span>, <span class="number">100.0</span>, <span class="string">&quot;1998-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">    List&lt;Car&gt; cars = Arrays.asList(car1, car2, car3);</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.insertBatchByForeach(cars);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•&quot;</span> + count);</span><br><span class="line">    SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251023203312.png"></div></div><h2 id="sqlæ ‡ç­¾ä¸includeæ ‡ç­¾">sqlæ ‡ç­¾ä¸includeæ ‡ç­¾</h2><p><code>sqlæ ‡ç­¾</code>ç”¨æ¥å£°æ˜sqlç‰‡æ®µ<br><code>includeæ ‡ç­¾</code>ç”¨æ¥å°†å£°æ˜çš„sqlç‰‡æ®µåŒ…å«åˆ°æŸä¸ªsqlè¯­å¥å½“ä¸­<br>ä½œç”¨ï¼šä»£ç å¤ç”¨ã€‚æ˜“ç»´æŠ¤ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;carCols&quot;</span>&gt;</span>id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllRetMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;carCols&quot;</span>/&gt;</span> from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllRetListMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;carCols&quot;</span>/&gt;</span> carType from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByIdRetMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;carCols&quot;</span>/&gt;</span> from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h1>MyBatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½</h1><h2 id="ç¯å¢ƒå‡†å¤‡-2">ç¯å¢ƒå‡†å¤‡</h2><p>ä¾èµ–ï¼šmybatisä¾èµ–ã€mysqlé©±åŠ¨ä¾èµ–ã€junitä¾èµ–ã€logbackä¾èµ–</p><p>é…ç½®æ–‡ä»¶ï¼šmybatis-config.xmlã€logback.xmlã€jdbc.properties</p><p>æ‹·è´å·¥å…·ç±»ï¼šSqlSessionUtil</p><p>å‡†å¤‡æ•°æ®åº“è¡¨ï¼šä¸€ä¸ªç­çº§å¯¹åº”å¤šä¸ªå­¦ç”Ÿã€‚ç­çº§è¡¨ï¼št_clazzã€‚å­¦ç”Ÿè¡¨ï¼št_student</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1704781490591-2940ead2-4686-4774-ad12-55fbd29859f7.png" alt="img"></p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1661132819754-23adfa1c-b325-41bc-8520-0355fe4c41cc.png" alt="img"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/22016332/1704781512657-8485057a-2c28-4df3-a5df-a800804888f7.png" alt="img"></p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1661132610940-7d55793b-df68-48f4-924f-99db58220da9.png" alt="img"></p><p>åˆ›å»ºpojoï¼šStudentã€Clazz</p><div class="tabs" id="åˆ›å»ºpojo"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ›å»ºpojo-1">Student</button></li><li class="tab"><button type="button" data-href="#åˆ›å»ºpojo-2">Clazz</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ›å»ºpojo-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer sid;</span><br><span class="line">    <span class="keyword">private</span> String sname;</span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ›å»ºpojo-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Clazz</span> &#123;</span><br><span class="line">     <span class="keyword">private</span> Integer cid;</span><br><span class="line">    <span class="keyword">private</span> String cname;</span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>åˆ›å»ºmapperæ¥å£ï¼šStudentMapperã€ClazzMapper</p><div class="tabs" id="åˆ›å»ºmapperæ¥å£"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ›å»ºmapperæ¥å£-1">StudentMapper</button></li><li class="tab"><button type="button" data-href="#åˆ›å»ºmapperæ¥å£-2">ClazzMapper</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ›å»ºmapperæ¥å£-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span> &#123;</span><br><span class="line">    Student <span class="title function_">selectBySid</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ›å»ºmapperæ¥å£-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClazzMapper</span> &#123;</span><br><span class="line">    Clazz <span class="title function_">selectByCid</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>åˆ›å»ºmapperæ˜ å°„æ–‡ä»¶ï¼šStudentMapper.xmlã€ClazzMapper.xml</p><h2 id="å¤šå¯¹ä¸€">å¤šå¯¹ä¸€</h2><p>å¤šç§æ–¹å¼ï¼Œå¸¸è§çš„åŒ…æ‹¬ä¸‰ç§ï¼š</p><ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼šä¸€æ¡SQLè¯­å¥ï¼Œçº§è”å±æ€§æ˜ å°„ã€‚</li><li>ç¬¬äºŒç§æ–¹å¼ï¼šä¸€æ¡SQLè¯­å¥ï¼Œassociationã€‚</li><li>ç¬¬ä¸‰ç§æ–¹å¼ï¼šä¸¤æ¡SQLè¯­å¥ï¼Œåˆ†æ­¥æŸ¥è¯¢ã€‚ï¼ˆè¿™ç§æ–¹å¼å¸¸ç”¨ï¼šä¼˜ç‚¹ä¸€æ˜¯å¯å¤ç”¨ã€‚ä¼˜ç‚¹äºŒæ˜¯æ”¯æŒæ‡’åŠ è½½ã€‚ï¼‰</li></ul><p><strong>å¤šå¯¹ä¸€çš„ç†è§£</strong></p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024170351.png"></div></div><h3 id="ç¬¬ä¸€ç§æ–¹å¼ï¼šçº§è”å±æ€§æ˜ å°„">ç¬¬ä¸€ç§æ–¹å¼ï¼šçº§è”å±æ€§æ˜ å°„</h3><p>pojoç±»Studentä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ï¼šClazz clazz; è¡¨ç¤ºå­¦ç”Ÿå…³è”çš„ç­çº§å¯¹è±¡ã€‚</p><div class="tabs" id="çº§è”å±æ€§æ˜ å°„"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#çº§è”å±æ€§æ˜ å°„-1">Student</button></li><li class="tab"><button type="button" data-href="#çº§è”å±æ€§æ˜ å°„-2">StudentMapper.xml</button></li><li class="tab"><button type="button" data-href="#çº§è”å±æ€§æ˜ å°„-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="çº§è”å±æ€§æ˜ å°„-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer sid;</span><br><span class="line">    <span class="keyword">private</span> String sname;</span><br><span class="line">    <span class="keyword">private</span> Clazz clazz;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="çº§è”å±æ€§æ˜ å°„-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;clazz.cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;clazz.cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBySid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentResultMap&quot;</span>&gt;</span></span><br><span class="line">        select s.*, c.* from t_student s join t_clazz c on s.cid = c.cid where sid = #&#123;sid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="çº§è”å±æ€§æ˜ å°„-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySid</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(StudentMapper.class);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectBySid(<span class="number">1</span>);</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024170808.png"></div></div><h3 id="ç¬¬äºŒç§æ–¹å¼ï¼šassociation">ç¬¬äºŒç§æ–¹å¼ï¼šassociation</h3><p>å…¶ä»–ä½ç½®éƒ½ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹resultMapä¸­çš„é…ç½®ï¼šassociationå³å¯ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>associationç¿»è¯‘ä¸ºï¼šå…³è”ã€‚<br>å­¦ç”Ÿå¯¹è±¡å…³è”ä¸€ä¸ªç­çº§å¯¹è±¡ã€‚</p><h3 id="ç¬¬ä¸‰ç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢">ç¬¬ä¸‰ç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</h3><p>å…¶ä»–ä½ç½®ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹ä»¥åŠæ·»åŠ ä»¥ä¸‹ä¸‰å¤„ï¼š</p><p>ç¬¬ä¸€å¤„ï¼šassociationä¸­selectä½ç½®å¡«å†™sqlIdã€‚sqlId=namespace+idã€‚å…¶ä¸­columnå±æ€§ä½œä¸ºè¿™æ¡å­sqlè¯­å¥çš„æ¡ä»¶ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBySid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentResultMap&quot;</span>&gt;</span></span><br><span class="line">  select s.* from t_student s where sid = #&#123;sid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒå¤„ï¼šåœ¨ClazzMapperæ¥å£ä¸­æ·»åŠ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Clazz;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Clazzæ˜ å°„å™¨æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClazzMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®cidè·å–Clazzä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Clazz <span class="title function_">selectByCid</span><span class="params">(Integer cid)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰å¤„ï¼šåœ¨ClazzMapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line">        select * from t_clazz where cid = #&#123;cid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çœ‹åˆ°å…ˆåæœ‰ä¸¤æ¡sqlè¯­å¥æ‰§è¡Œï¼š</p><p><img src="%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%B4%E6%98%8E/1661151746372-e3c91810-bb5f-4308-8dd5-e421e11bff50.png" alt="img"></p><p>åˆ†æ­¥ä¼˜ç‚¹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªä¼˜ç‚¹ï¼šä»£ç å¤ç”¨æ€§å¢å¼ºã€‚</li><li>ç¬¬äºŒä¸ªä¼˜ç‚¹ï¼šæ”¯æŒå»¶è¿ŸåŠ è½½ã€‚ã€æš‚æ—¶è®¿é—®ä¸åˆ°çš„æ•°æ®å¯ä»¥å…ˆä¸æŸ¥è¯¢ã€‚æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚ã€‘</li></ul><h2 id="13-2-å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½">13.2 å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½</h2><p>è¦æƒ³æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨associationæ ‡ç­¾ä¸­æ·»åŠ fetchType=&quot;lazy&quot;å³å¯ã€‚</p><p>ä¿®æ”¹StudentMapper.xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">fetchType</span>=<span class="string">&quot;lazy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨åªæŸ¥è¯¢å­¦ç”Ÿåå­—ï¼Œä¿®æ”¹æµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySid</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(StudentMapper.class);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectBySid(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//System.out.println(student);</span></span><br><span class="line">        <span class="comment">// åªè·å–å­¦ç”Ÿå§“å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sname</span> <span class="operator">=</span> student.getSname();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿå§“åï¼š&quot;</span> + sname);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661151882965-633f8039-c309-4657-8ed1-44f836d5b1e4.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_23%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>å¦‚æœåç»­éœ€è¦ä½¿ç”¨åˆ°å­¦ç”Ÿæ‰€åœ¨ç­çº§çš„åç§°ï¼Œè¿™ä¸ªæ—¶å€™æ‰ä¼šæ‰§è¡Œå…³è”çš„sqlè¯­å¥ï¼Œä¿®æ”¹æµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySid</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(StudentMapper.class);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectBySid(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//System.out.println(student);</span></span><br><span class="line">        <span class="comment">// åªè·å–å­¦ç”Ÿå§“å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sname</span> <span class="operator">=</span> student.getSname();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿå§“åï¼š&quot;</span> + sname);</span><br><span class="line">        <span class="comment">// åˆ°è¿™é‡Œä¹‹åï¼Œæƒ³è·å–ç­çº§åå­—äº†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cname</span> <span class="operator">=</span> student.getClazz().getCname();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿçš„ç­çº§åç§°ï¼š&quot;</span> + cname);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661151926961-a0affa2d-2d89-4b67-8cc0-bf8604ded4fc.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_22%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>é€šè¿‡ä»¥ä¸Šçš„æ‰§è¡Œç»“æœå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰å½“ä½¿ç”¨åˆ°ç­çº§åç§°ä¹‹åï¼Œæ‰ä¼šæ‰§è¡Œå…³è”çš„sqlè¯­å¥ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚</p><p>åœ¨mybatisä¸­å¦‚ä½•å¼€å¯å…¨å±€çš„å»¶è¿ŸåŠ è½½å‘¢ï¼Ÿéœ€è¦settingé…ç½®ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661136161612-a7c3cc7f-fe89-4245-a297-1572d8384566.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_43%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æŠŠfetchType=&quot;lazy&quot;å»æ‰ã€‚</strong></p><p>æ‰§è¡Œä»¥ä¸‹ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySid</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(StudentMapper.class);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectBySid(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//System.out.println(student);</span></span><br><span class="line">        <span class="comment">// åªè·å–å­¦ç”Ÿå§“å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sname</span> <span class="operator">=</span> student.getSname();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿå§“åï¼š&quot;</span> + sname);</span><br><span class="line">        <span class="comment">// åˆ°è¿™é‡Œä¹‹åï¼Œæƒ³è·å–ç­çº§åå­—äº†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cname</span> <span class="operator">=</span> student.getClazz().getCname();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿçš„ç­çº§åç§°ï¼š&quot;</span> + cname);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661151954051-4b5b94f7-a69d-4d21-b220-1a840862fb85.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_22%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>é€šè¿‡ä»¥ä¸Šçš„æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å·²ç»å¼€å¯äº†å…¨å±€å»¶è¿ŸåŠ è½½ç­–ç•¥ã€‚</p><p>å¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½ä¹‹åï¼Œæ‰€æœ‰çš„sqléƒ½ä¼šæ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œå¦‚æœæŸä¸ªsqlä½ ä¸å¸Œæœ›å®ƒæ”¯æŒå»¶è¿ŸåŠ è½½æ€ä¹ˆåŠå‘¢ï¼Ÿå°†fetchTypeè®¾ç½®ä¸ºeagerï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661151998854-a31c19fb-0af9-4d69-894d-e8086d9c0333.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_22%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>è¿™æ ·çš„è¯ï¼Œé’ˆå¯¹æŸä¸ªç‰¹å®šçš„sqlï¼Œä½ å°±å…³é—­äº†å»¶è¿ŸåŠ è½½æœºåˆ¶ã€‚</p><p>åæœŸæˆ‘ä»¬è¦ä¸è¦å¼€å¯å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Œä¸»è¦çœ‹å®é™…çš„ä¸šåŠ¡éœ€æ±‚æ˜¯æ€æ ·çš„ã€‚</p><h2 id="13-3-ä¸€å¯¹å¤š">13.3 ä¸€å¯¹å¤š</h2><p>ä¸€å¯¹å¤šçš„å®ç°ï¼Œé€šå¸¸æ˜¯åœ¨ä¸€çš„ä¸€æ–¹ä¸­æœ‰Listé›†åˆå±æ€§ã€‚</p><p>åœ¨Clazzç±»ä¸­æ·»åŠ List<student>stus; å±æ€§ã€‚</student></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Clazz</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer cid;</span><br><span class="line">    <span class="keyword">private</span> String cname;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; stus;</span><br><span class="line">    <span class="comment">// set getæ–¹æ³•</span></span><br><span class="line">    <span class="comment">// æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// toStringæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¯¹å¤šçš„å®ç°é€šå¸¸åŒ…æ‹¬ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><ul><li>ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection</li><li>ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</li></ul><p><strong>ä¸€å¯¹å¤šçš„ç†è§£</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/22016332/1704786830294-d89d7770-7ab5-4cae-871d-1c3880567a12.png" alt="img"></p><h3 id="ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection">ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Clazz;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Clazzæ˜ å°„å™¨æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€æœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClazzMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®cidè·å–Clazzä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Clazz <span class="title function_">selectByCid</span><span class="params">(Integer cid)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç­çº§ç¼–å·æŸ¥è¯¢ç­çº§ä¿¡æ¯ã€‚åŒæ—¶ç­çº§ä¸­æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯ä¹Ÿè¦æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Clazz <span class="title function_">selectClazzAndStusByCid</span><span class="params">(Integer cid)</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;resultMap id=<span class="string">&quot;clazzResultMap&quot;</span> type=<span class="string">&quot;Clazz&quot;</span>&gt;</span><br><span class="line">  &lt;id property=<span class="string">&quot;cid&quot;</span> column=<span class="string">&quot;cid&quot;</span>/&gt;</span><br><span class="line">  &lt;result property=<span class="string">&quot;cname&quot;</span> column=<span class="string">&quot;cname&quot;</span>/&gt;</span><br><span class="line">  &lt;collection property=<span class="string">&quot;stus&quot;</span> ofType=<span class="string">&quot;Student&quot;</span>&gt;</span><br><span class="line">    &lt;id property=<span class="string">&quot;sid&quot;</span> column=<span class="string">&quot;sid&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;sname&quot;</span> column=<span class="string">&quot;sname&quot;</span>/&gt;</span><br><span class="line">  &lt;/collection&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">&quot;selectClazzAndStusByCid&quot;</span> resultMap=<span class="string">&quot;clazzResultMap&quot;</span>&gt;</span><br><span class="line">  select * from t_clazz c join t_student s on c.cid = s.cid where c.cid = #&#123;cid&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ˜¯ofTypeï¼Œè¡¨ç¤ºâ€œé›†åˆä¸­çš„ç±»å‹â€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.ClazzMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Clazz;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClazzMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectClazzAndStusByCid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ClazzMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(ClazzMapper.class);</span><br><span class="line">        <span class="type">Clazz</span> <span class="variable">clazz</span> <span class="operator">=</span> mapper.selectClazzAndStusByCid(<span class="number">1001</span>);</span><br><span class="line">        System.out.println(clazz);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661149977323-90515301-4b5b-4e3e-a17f-04d5473766e7.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_46%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><h3 id="ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢">ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</h3><p>ä¿®æ”¹ä»¥ä¸‹ä¸‰ä¸ªä½ç½®å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;clazzResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ä¸»è¦çœ‹è¿™é‡Œ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;stus&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.StudentMapper.selectByCid&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--sqlè¯­å¥ä¹Ÿå˜åŒ–äº†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectClazzAndStusByCid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;clazzResultMap&quot;</span>&gt;</span></span><br><span class="line">  select * from t_clazz c where c.cid = #&#123;cid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">/**</span><br><span class="line">* æ ¹æ®ç­çº§ç¼–å·è·å–æ‰€æœ‰çš„å­¦ç”Ÿã€‚</span><br><span class="line">* @param cid</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">List<span class="tag">&lt;<span class="name">Student</span>&gt;</span> selectByCid(Integer cid);</span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">  select * from t_student where cid = #&#123;cid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1661151398803-0c0e196e-6c0a-42fb-b9ee-abd42fea2026.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_47%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><h2 id="13-4-ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½">13.4 ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½</h2><p>ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½æœºåˆ¶å’Œå¤šå¯¹ä¸€æ˜¯ä¸€æ ·çš„ã€‚åŒæ ·æ˜¯é€šè¿‡ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>ç¬¬ä¸€ç§ï¼šfetchType=â€œlazyâ€</li><li>ç¬¬äºŒç§ï¼šä¿®æ”¹å…¨å±€çš„é…ç½®settingï¼Œ**lazyLoadingEnabled=trueï¼Œ**å¦‚æœå¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½ï¼Œæƒ³è®©æŸä¸ªsqlä¸ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼šfetchType=â€œeagerâ€</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1659578619308-ceb8077a-94a7-4f64-b41d-e54b3c14e7fb.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_34%2Ctext_5Yqo5Yqb6IqC54K5%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><h1>MyBatisçš„ç¼“å­˜</h1><div class="note info no-icon flat"><p>ç¼“å­˜çš„ä½œç”¨ï¼šé€šè¿‡å‡å°‘IOçš„æ–¹å¼ï¼Œæ¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p></div><p>mybatisçš„ç¼“å­˜ï¼šå°†selectè¯­å¥çš„æŸ¥è¯¢ç»“æœæ”¾åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰å½“ä¸­ï¼Œä¸‹ä¸€æ¬¡è¿˜æ˜¯è¿™æ¡selectè¯­å¥çš„è¯ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œä¸å†æŸ¥æ•°æ®åº“ã€‚ä¸€æ–¹é¢æ˜¯å‡å°‘äº†IOã€‚å¦ä¸€æ–¹é¢ä¸å†æ‰§è¡Œç¹ççš„æŸ¥æ‰¾ç®—æ³•ã€‚æ•ˆç‡å¤§å¤§æå‡ã€‚</p><p>mybatisç¼“å­˜åŒ…æ‹¬ï¼š</p><ul><li>ä¸€çº§ç¼“å­˜ï¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å­˜å‚¨åˆ°SqlSessionä¸­ã€‚</li><li>äºŒçº§ç¼“å­˜ï¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å­˜å‚¨åˆ°SqlSessionFactoryä¸­ã€‚</li><li>é›†æˆå…¶å®ƒç¬¬ä¸‰æ–¹çš„ç¼“å­˜ï¼šæ¯”å¦‚EhCacheã€Javaè¯­è¨€å¼€å‘çš„ã€‘ã€Memcacheã€Cè¯­è¨€å¼€å‘çš„ã€‘ç­‰ã€‚</li></ul><p><strong>ç¼“å­˜åªé’ˆå¯¹äºDQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼“å­˜æœºåˆ¶åªå¯¹åº”selectè¯­å¥ã€‚</strong></p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024171637.png"></div></div><h2 id="ä¸€çº§ç¼“å­˜">ä¸€çº§ç¼“å­˜</h2><p>ä¸€çº§ç¼“å­˜é»˜è®¤å¼€å¯,ä¸éœ€è¦åšä»»ä½•é…ç½®ã€‚</p><p>åŸç†ï¼šåªè¦ä½¿ç”¨åŒä¸€ä¸ªSqlSessionå¯¹è±¡æ‰§è¡ŒåŒä¸€æ¡SQLè¯­å¥ï¼Œå°±ä¼šèµ°ç¼“å­˜ã€‚</p><div class="tabs" id="ä¸€çº§ç¼“å­˜"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸€çº§ç¼“å­˜-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#ä¸€çº§ç¼“å­˜-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#ä¸€çº§ç¼“å­˜-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸€çº§ç¼“å­˜-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idè·å–Carä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Car <span class="title function_">selectById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸€çº§ç¼“å­˜-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">    select * from t_car where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸€çº§ç¼“å­˜-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨æˆ‘ä»¬å°è£…çš„SqlSessionUtilå·¥å…·ç±»ã€‚</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> builder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CarMapper.class);</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> mapper1.selectById(<span class="number">83L</span>);</span><br><span class="line">        System.out.println(car1);</span><br><span class="line"></span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession1.getMapper(CarMapper.class);</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> mapper2.selectById(<span class="number">83L</span>);</span><br><span class="line">        System.out.println(car2);</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper3</span> <span class="operator">=</span> sqlSession2.getMapper(CarMapper.class);</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car3</span> <span class="operator">=</span> mapper3.selectById(<span class="number">83L</span>);</span><br><span class="line">        System.out.println(car3);</span><br><span class="line"></span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper4</span> <span class="operator">=</span> sqlSession2.getMapper(CarMapper.class);</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car4</span> <span class="operator">=</span> mapper4.selectById(<span class="number">83L</span>);</span><br><span class="line">        System.out.println(car4);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š<br>æ¯æ¬¡åªæ‰§è¡Œäº†ä¸€æ¡æŸ¥è¯¢è¯­å¥ä½†è¿”å›äº†ä¸¤æ¡æ•°æ®</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024171918.png"></div></div><p>ä»€ä¹ˆæƒ…å†µä¸‹ä¸èµ°ç¼“å­˜ï¼Ÿ</p><ul><li>ç¬¬ä¸€ç§ï¼šä½¿ç”¨ä¸åŒçš„SqlSessionå¯¹è±¡ã€‚</li><li>ç¬¬äºŒç§ï¼šæŸ¥è¯¢æ¡ä»¶å˜åŒ–ã€‚</li></ul><p>ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µåŒ…æ‹¬ä¸¤ç§ï¼š</p><ul><li>ç¬¬ä¸€ç§ï¼šç¬¬ä¸€æ¬¡æŸ¥è¯¢å’Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¹‹é—´ï¼Œæ‰‹åŠ¨æ¸…ç©ºäº†ä¸€çº§ç¼“å­˜ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSession.clearCache();</span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒç§ï¼šç¬¬ä¸€æ¬¡æŸ¥è¯¢å’Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¹‹é—´ï¼Œæ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œã€‚ã€è¿™ä¸ªå¢åˆ æ”¹å’Œå“ªå¼ è¡¨æ²¡æœ‰å…³ç³»ï¼Œåªè¦æœ‰insert delete updateæ“ä½œï¼Œä¸€çº§ç¼“å­˜å°±ä¼šå¤±æ•ˆã€‚ã€‘</li></ul><div class="tabs" id="ç¬¬äºŒç§å¤±æ•ˆ"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ç¬¬äºŒç§å¤±æ•ˆ-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#ç¬¬äºŒç§å¤±æ•ˆ-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#ç¬¬äºŒç§å¤±æ•ˆ-3">æ‰§è¡Œç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ç¬¬äºŒç§å¤±æ•ˆ-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä¿å­˜è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertAccount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¬¬äºŒç§å¤±æ•ˆ-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAccount&quot;</span>&gt;</span></span><br><span class="line">  insert into t_act values(3, &#x27;act003&#x27;, 10000)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¬¬äºŒç§å¤±æ•ˆ-3"><p>åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šå†æ·»åŠ ä¸Šä¸€ä¸ªæ’å…¥æ“ä½œ</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024172343.png"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024172937.png"></div></div><h2 id="äºŒçº§ç¼“å­˜">äºŒçº§ç¼“å­˜</h2><p>äºŒçº§ç¼“å­˜çš„èŒƒå›´æ˜¯SqlSessionFactoryã€‚</p><p>ä½¿ç”¨äºŒçº§ç¼“å­˜éœ€è¦å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><ol><li><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;&gt;</code> å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚é»˜è®¤å°±æ˜¯trueï¼Œæ— éœ€è®¾ç½®ã€‚</li><li>åœ¨éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„SqlMapper.xmlæ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š<code>&lt;cache /&gt;</code></li><li>ä½¿ç”¨äºŒçº§ç¼“å­˜çš„å®ä½“ç±»å¯¹è±¡å¿…é¡»æ˜¯<code>å¯åºåˆ—åŒ–</code>çš„ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»å®ç°java.io.Serializableæ¥å£</li><li>SqlSessionå¯¹è±¡å…³é—­æˆ–æäº¤ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè¢«å†™å…¥åˆ°äºŒçº§ç¼“å­˜å½“ä¸­ã€‚æ­¤æ—¶äºŒçº§ç¼“å­˜æ‰å¯ç”¨ã€‚</li></ol><p>æµ‹è¯•äºŒçº§ç¼“å­˜ï¼š</p><div class="tabs" id="äºŒçº§ç¼“å­˜"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#äºŒçº§ç¼“å­˜-1">Carç±»</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="äºŒçº§ç¼“å­˜-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"><span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024210754.png"></div></div><div class="note warning no-icon flat"><p><strong>äºŒçº§ç¼“å­˜çš„å¤±æ•ˆï¼šåªè¦ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´å‡ºç°äº†å¢åˆ æ”¹æ“ä½œã€‚äºŒçº§ç¼“å­˜å°±ä¼šå¤±æ•ˆã€‚ã€ä¸€çº§ç¼“å­˜ä¹Ÿä¼šå¤±æ•ˆã€‘</strong></p></div><p><strong>äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®ï¼š</strong></p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024210849.png"></div></div><ol><li><p>evictionï¼šæŒ‡å®šä»ç¼“å­˜ä¸­ç§»é™¤æŸä¸ªå¯¹è±¡çš„æ·˜æ±°ç®—æ³•ã€‚é»˜è®¤é‡‡ç”¨LRUç­–ç•¥ã€‚</p><ul><li>LRUï¼šLeast Recently Usedã€‚æœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚ä¼˜å…ˆæ·˜æ±°åœ¨é—´éš”æ—¶é—´å†…ä½¿ç”¨é¢‘ç‡æœ€ä½çš„å¯¹è±¡ã€‚(å…¶å®è¿˜æœ‰ä¸€ç§æ·˜æ±°ç®—æ³•LFUï¼Œæœ€ä¸å¸¸ç”¨ã€‚)</li><li>FIFOï¼šFirst In First Outã€‚ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç¼“å­˜å™¨ã€‚å…ˆè¿›å…¥äºŒçº§ç¼“å­˜çš„å¯¹è±¡æœ€å…ˆè¢«æ·˜æ±°ã€‚</li><li>SOFTï¼šè½¯å¼•ç”¨ã€‚æ·˜æ±°è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚å…·ä½“ç®—æ³•å’ŒJVMçš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å…³ã€‚</li><li>WEAKï¼šå¼±å¼•ç”¨ã€‚æ·˜æ±°å¼±å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚å…·ä½“ç®—æ³•å’ŒJVMçš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å…³ã€‚</li></ul></li><li><p>flushIntervalï¼š</p><ul><li>äºŒçº§ç¼“å­˜çš„åˆ·æ–°æ—¶é—´é—´éš”ã€‚å•ä½æ¯«ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ã€‚å°±ä»£è¡¨ä¸åˆ·æ–°ç¼“å­˜ï¼Œåªè¦å†…å­˜è¶³å¤Ÿå¤§ï¼Œä¸€ç›´ä¼šå‘äºŒçº§ç¼“å­˜ä¸­ç¼“å­˜æ•°æ®ã€‚é™¤éæ‰§è¡Œäº†å¢åˆ æ”¹ã€‚</li></ul></li><li><p>readOnlyï¼š</p><ul><li>trueï¼šå¤šæ¡ç›¸åŒçš„sqlè¯­å¥æ‰§è¡Œä¹‹åè¿”å›çš„å¯¹è±¡æ˜¯å…±äº«çš„åŒä¸€ä¸ªã€‚æ€§èƒ½å¥½ã€‚ä½†æ˜¯å¤šçº¿ç¨‹å¹¶å‘å¯èƒ½ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚</li><li>falseï¼šå¤šæ¡ç›¸åŒçš„sqlè¯­å¥æ‰§è¡Œä¹‹åè¿”å›çš„å¯¹è±¡æ˜¯å‰¯æœ¬ï¼Œè°ƒç”¨äº†cloneæ–¹æ³•ã€‚æ€§èƒ½ä¸€èˆ¬ã€‚ä½†å®‰å…¨ã€‚</li></ul></li><li><p>sizeï¼š</p><ul><li>è®¾ç½®äºŒçº§ç¼“å­˜ä¸­æœ€å¤šå¯å­˜å‚¨çš„javaå¯¹è±¡æ•°é‡ã€‚é»˜è®¤å€¼1024ã€‚</li></ul></li></ol><h2 id="MyBatisé›†æˆEhCache">MyBatisé›†æˆEhCache</h2><div class="note info no-icon flat"><p>é›†æˆEhCacheæ˜¯ä¸ºäº†ä»£æ›¿mybatisè‡ªå¸¦çš„äºŒçº§ç¼“å­˜ã€‚ä¸€çº§ç¼“å­˜æ˜¯æ— æ³•æ›¿ä»£çš„ã€‚</p></div><p>mybatiså¯¹å¤–æä¾›äº†æ¥å£ï¼Œä¹Ÿå¯ä»¥é›†æˆç¬¬ä¸‰æ–¹çš„ç¼“å­˜ç»„ä»¶ã€‚æ¯”å¦‚EhCacheã€Memcacheç­‰ã€‚éƒ½å¯ä»¥ã€‚</p><p>EhCacheæ˜¯Javaå†™çš„ã€‚Memcacheæ˜¯Cè¯­è¨€å†™çš„ã€‚æ‰€ä»¥mybatisé›†æˆEhCacheè¾ƒä¸ºå¸¸è§ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼Œå°±å¯ä»¥å®Œæˆé›†æˆï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥mybatisæ•´åˆehcacheçš„ä¾èµ–ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatisé›†æˆehcacheçš„ç»„ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šåœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹æ–°å»ºechcache.xmlæ–‡ä»¶ï¼Œå¹¶æä¾›ä»¥ä¸‹é…ç½®ä¿¡æ¯ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;http://ehcache.org/ehcache.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç£ç›˜å­˜å‚¨:å°†ç¼“å­˜ä¸­æš‚æ—¶ä¸ä½¿ç”¨çš„å¯¹è±¡,è½¬ç§»åˆ°ç¡¬ç›˜,ç±»ä¼¼äºWindowsç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;e:/ehcache&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!--defaultCacheï¼šé»˜è®¤çš„ç®¡ç†ç­–ç•¥--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--eternalï¼šè®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œå¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsï¼ŒtimeToLiveSecondsåˆ¤æ–­--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--maxElementsInMemoryï¼šåœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--overflowToDiskï¼šå¦‚æœå†…å­˜ä¸­æ•°æ®è¶…è¿‡å†…å­˜é™åˆ¶ï¼Œæ˜¯å¦è¦ç¼“å­˜åˆ°ç£ç›˜ä¸Š--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--diskPersistentï¼šæ˜¯å¦åœ¨ç£ç›˜ä¸ŠæŒä¹…åŒ–ã€‚æŒ‡é‡å¯jvmåï¼Œæ•°æ®æ˜¯å¦æœ‰æ•ˆã€‚é»˜è®¤ä¸ºfalse--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--timeToIdleSecondsï¼šå¯¹è±¡ç©ºé—²æ—¶é—´(å•ä½ï¼šç§’)ï¼ŒæŒ‡å¯¹è±¡åœ¨å¤šé•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®å°±ä¼šå¤±æ•ˆã€‚åªå¯¹eternalä¸ºfalseçš„æœ‰æ•ˆã€‚é»˜è®¤å€¼0ï¼Œè¡¨ç¤ºä¸€ç›´å¯ä»¥è®¿é—®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--timeToLiveSecondsï¼šå¯¹è±¡å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’)ï¼ŒæŒ‡å¯¹è±¡ä»åˆ›å»ºåˆ°å¤±æ•ˆæ‰€éœ€è¦çš„æ—¶é—´ã€‚åªå¯¹eternalä¸ºfalseçš„æœ‰æ•ˆã€‚é»˜è®¤å€¼0ï¼Œè¡¨ç¤ºä¸€ç›´å¯ä»¥è®¿é—®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--memoryStoreEvictionPolicyï¼šç¼“å­˜çš„3 ç§æ¸…ç©ºç­–ç•¥--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--FIFOï¼šfirst in first out (å…ˆè¿›å…ˆå‡º)--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--LFUï¼šLess Frequently Used (æœ€å°‘ä½¿ç”¨).æ„æ€æ˜¯ä¸€ç›´ä»¥æ¥æœ€å°‘è¢«ä½¿ç”¨çš„ã€‚ç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªhit å±æ€§ï¼Œhit å€¼æœ€å°çš„å°†ä¼šè¢«æ¸…å‡ºç¼“å­˜--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--LRUï¼šLeast Recently Used(æœ€è¿‘æœ€å°‘ä½¿ç”¨). (ehcache é»˜è®¤å€¼).ç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå½“ç¼“å­˜å®¹é‡æ»¡äº†ï¼Œè€Œåˆéœ€è¦è…¾å‡ºåœ°æ–¹æ¥ç¼“å­˜æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆç°æœ‰ç¼“å­˜å…ƒç´ ä¸­æ—¶é—´æˆ³ç¦»å½“å‰æ—¶é—´æœ€è¿œçš„å…ƒç´ å°†è¢«æ¸…å‡ºç¼“å­˜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span> <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">overflowToDisk</span>=<span class="string">&quot;false&quot;</span> <span class="attr">diskPersistent</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;0&quot;</span> <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;600&quot;</span> <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹SqlMapper.xmlæ–‡ä»¶ä¸­çš„<cache>æ ‡ç­¾ï¼Œæ·»åŠ typeå±æ€§ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šç¼–å†™æµ‹è¯•ç¨‹åºä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> mapper1.selectById(<span class="number">83L</span>);</span><br><span class="line">    System.out.println(car1);</span><br><span class="line">    </span><br><span class="line">    sqlSession1.close();</span><br><span class="line">    </span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession2.getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> mapper2.selectById(<span class="number">83L</span>);</span><br><span class="line">    System.out.println(car2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024211139.png"></div></div><h1>MyBatisé€†å‘å·¥ç¨‹</h1><p>æ‰€è°“çš„é€†å‘å·¥ç¨‹æ˜¯ï¼šæ ¹æ®æ•°æ®åº“è¡¨é€†å‘ç”ŸæˆJavaçš„pojoç±»ï¼ŒSqlMapper.xmlæ–‡ä»¶ï¼Œä»¥åŠMapperæ¥å£ç±»ç­‰ã€‚</p><p>è¦å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œéœ€è¦å€ŸåŠ©åˆ«äººå†™å¥½çš„é€†å‘å·¥ç¨‹æ’ä»¶ã€‚</p><p>æ€è€ƒï¼šä½¿ç”¨è¿™ä¸ªæ’ä»¶çš„è¯ï¼Œéœ€è¦ç»™è¿™ä¸ªæ’ä»¶é…ç½®å“ªäº›ä¿¡æ¯ï¼Ÿ</p><ul><li>pojoç±»åã€åŒ…åä»¥åŠç”Ÿæˆä½ç½®ã€‚</li><li>SqlMapper.xmlæ–‡ä»¶åä»¥åŠç”Ÿæˆä½ç½®ã€‚</li><li>Mapperæ¥å£åä»¥åŠç”Ÿæˆä½ç½®ã€‚</li><li>è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ã€‚</li><li>æŒ‡å®šå“ªäº›è¡¨å‚ä¸é€†å‘å·¥ç¨‹ã€‚</li><li>â€¦</li></ul><h2 id="é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ">é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ</h2><ul><li>åœ¨pomä¸­æ·»åŠ é€†å‘å·¥ç¨‹æ’ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šåˆ¶æ„å»ºè¿‡ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å¯é…ç½®å¤šä¸ªæ’ä»¶--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å…¶ä¸­çš„ä¸€ä¸ªæ’ä»¶ï¼šmybatisé€†å‘å·¥ç¨‹æ’ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ’ä»¶çš„GAVåæ ‡--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--å…è®¸è¦†ç›–--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--æ’ä»¶çš„ä¾èµ–--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é…ç½®generatorConfig.xml</li></ul><p>è¯¥æ–‡ä»¶å¿…é¡»æ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ï¼Œä¸”æ–‡ä»¶åå¿…é¡»å«åšï¼šgeneratorConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        targetRuntimeæœ‰ä¸¤ä¸ªå€¼ï¼š</span></span><br><span class="line"><span class="comment">            MyBatis3Simpleï¼šç”Ÿæˆçš„æ˜¯åŸºç¡€ç‰ˆï¼Œåªæœ‰åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ã€‚</span></span><br><span class="line"><span class="comment">            MyBatis3ï¼šç”Ÿæˆçš„æ˜¯å¢å¼ºç‰ˆï¼Œé™¤äº†åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ä¹‹å¤–è¿˜æœ‰å¤æ‚çš„å¢åˆ æ”¹æŸ¥ã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é˜²æ­¢ç”Ÿæˆé‡å¤ä»£ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.generator.plugins.UnmergeableXmlMappersPlugin&quot;</span>/&gt;</span></span><br><span class="line">      </span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¯å¦å»æ‰ç”Ÿæˆæ—¥æœŸ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressDate&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¯å¦å»é™¤æ³¨é‡Š--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--è¿æ¥æ•°æ®åº“ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”ŸæˆpojoåŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.powernode.mybatis.pojo&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¯å¦å¼€å¯å­åŒ…--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¯å¦å»é™¤å­—æ®µåçš„å‰åç©ºç™½--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”ŸæˆSQLæ˜ å°„æ–‡ä»¶çš„åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.powernode.mybatis.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;src/main/resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¯å¦å¼€å¯å­åŒ…--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”ŸæˆMapperæ¥å£çš„åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;xmlMapper&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">&quot;com.powernode.mybatis.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨åå’Œå¯¹åº”çš„å®ä½“ç±»å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_car&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Car&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥ï¼šè¿è¡Œæ’ä»¶">ç¬¬å››æ­¥ï¼šè¿è¡Œæ’ä»¶</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024215701.png"></div></div><h2 id="æµ‹è¯•é€†å‘å·¥ç¨‹">æµ‹è¯•é€†å‘å·¥ç¨‹</h2><ul><li>ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</li></ul><ul><li>ä¾èµ–ï¼šmybatisä¾èµ–ã€mysqlé©±åŠ¨ä¾èµ–ã€junitä¾èµ–ã€logbackä¾èµ–ã€Lombokä¾èµ–</li><li>jdbc.properties</li><li>mybatis-config.xml</li><li>logback.xml</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GeneratorTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenerator</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line">        <span class="comment">// å¢</span></span><br><span class="line">        <span class="comment">/*Car car = new Car();</span></span><br><span class="line"><span class="comment">        car.setCarNum(&quot;1111&quot;);</span></span><br><span class="line"><span class="comment">        car.setBrand(&quot;æ¯”äºšè¿ªå”&quot;);</span></span><br><span class="line"><span class="comment">        car.setGuidePrice(new BigDecimal(30.0));</span></span><br><span class="line"><span class="comment">        car.setProduceTime(&quot;2010-10-12&quot;);</span></span><br><span class="line"><span class="comment">        car.setCarType(&quot;ç‡ƒæ²¹è½¦&quot;);</span></span><br><span class="line"><span class="comment">        int count = mapper.insert(car);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot; + count);*/</span></span><br><span class="line">        <span class="comment">// åˆ </span></span><br><span class="line">        <span class="comment">/*int count = mapper.deleteByPrimaryKey(83L);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&quot; + count);*/</span></span><br><span class="line">        <span class="comment">// æ”¹</span></span><br><span class="line">        <span class="comment">// æ ¹æ®ä¸»é”®ä¿®æ”¹</span></span><br><span class="line">        <span class="comment">/*Car car = new Car();</span></span><br><span class="line"><span class="comment">        car.setId(89L);</span></span><br><span class="line"><span class="comment">        car.setGuidePrice(new BigDecimal(20.0));</span></span><br><span class="line"><span class="comment">        car.setCarType(&quot;æ–°èƒ½æº&quot;);</span></span><br><span class="line"><span class="comment">        int count = mapper.updateByPrimaryKey(car);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&quot; + count);*/</span></span><br><span class="line">        <span class="comment">// æ ¹æ®ä¸»é”®é€‰æ‹©æ€§ä¿®æ”¹</span></span><br><span class="line">        <span class="comment">/*car = new Car();</span></span><br><span class="line"><span class="comment">        car.setId(89L);</span></span><br><span class="line"><span class="comment">        car.setCarNum(&quot;3333&quot;);</span></span><br><span class="line"><span class="comment">        car.setBrand(&quot;å®é©¬520Li&quot;);</span></span><br><span class="line"><span class="comment">        car.setProduceTime(&quot;1999-01-10&quot;);</span></span><br><span class="line"><span class="comment">        count = mapper.updateByPrimaryKeySelective(car);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&quot; + count);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŸ¥ä¸€ä¸ª</span></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> mapper.selectByPrimaryKey(<span class="number">89L</span>);</span><br><span class="line">        System.out.println(car);</span><br><span class="line">        <span class="comment">// æŸ¥æ‰€æœ‰</span></span><br><span class="line">        List&lt;Car&gt; cars = mapper.selectByExample(<span class="literal">null</span>);</span><br><span class="line">        cars.forEach(c -&gt; System.out.println(c));</span><br><span class="line">        <span class="comment">// å¤šæ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">// QBC é£æ ¼ï¼šQuery By Criteria ä¸€ç§æŸ¥è¯¢æ–¹å¼ï¼Œæ¯”è¾ƒé¢å‘å¯¹è±¡ï¼Œçœ‹ä¸åˆ°sqlè¯­å¥ã€‚</span></span><br><span class="line">        <span class="type">CarExample</span> <span class="variable">carExample</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CarExample</span>();</span><br><span class="line">        carExample.createCriteria()</span><br><span class="line">                .andBrandEqualTo(<span class="string">&quot;ä¸°ç”°éœ¸é“&quot;</span>)</span><br><span class="line">                .andGuidePriceGreaterThan(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">60.0</span>));<span class="comment">//æ¯”è¿™ä¸ªä»·æ ¼å¤§çš„</span></span><br><span class="line">        carExample.or().andProduceTimeBetween(<span class="string">&quot;2000-10-11&quot;</span>, <span class="string">&quot;2022-10-11&quot;</span>);</span><br><span class="line"></span><br><span class="line">        mapper.selectByExample(carExample);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>MyBatisä½¿ç”¨PageHelper</h1><h2 id="limitåˆ†é¡µ">limitåˆ†é¡µ</h2><p>mysqlçš„limitåé¢ä¸¤ä¸ªæ•°å­—ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ•°å­—ï¼šstartIndexï¼ˆèµ·å§‹ä¸‹æ ‡ã€‚ä¸‹æ ‡ä»0å¼€å§‹ã€‚ï¼‰</li><li>ç¬¬äºŒä¸ªæ•°å­—ï¼špageSizeï¼ˆæ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ¡æ•°ï¼‰</li></ul><p>å‡è®¾å·²çŸ¥é¡µç pageNumï¼Œè¿˜æœ‰æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ¡æ•°pageSizeï¼Œç¬¬ä¸€ä¸ªæ•°å­—å¯ä»¥åŠ¨æ€çš„è·å–å—ï¼Ÿ</p><ul><li>startIndex = (pageNum - 1) * pageSize</li></ul><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024215858.png"></div></div><p>æ‰€ä»¥ï¼Œæ ‡å‡†é€šç”¨çš„mysqlåˆ†é¡µSQLï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">  tableName ...... </span><br><span class="line">limit </span><br><span class="line">  (pageNum <span class="operator">-</span> <span class="number">1</span>) <span class="operator">*</span> pageSize, pageSize</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨mybatisåº”è¯¥æ€ä¹ˆåšï¼Ÿ</p><div class="tabs" id="limitåˆ†é¡µ"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#limitåˆ†é¡µ-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#limitåˆ†é¡µ-2">CarMapper.xml</button></li><li class="tab"><button type="button" data-href="#limitåˆ†é¡µ-3">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="limitåˆ†é¡µ-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * é€šè¿‡åˆ†é¡µçš„æ–¹å¼è·å–Caråˆ—è¡¨</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> startIndex é¡µç </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> pageSize æ¯é¡µæ˜¾ç¤ºè®°å½•æ¡æ•°</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    List&lt;Car&gt; <span class="title function_">selectAllByPage</span><span class="params">(<span class="meta">@Param(&quot;startIndex&quot;)</span> Integer startIndex, <span class="meta">@Param(&quot;pageSize&quot;)</span> Integer pageSize)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="limitåˆ†é¡µ-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByPage&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">        select * from t_car limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="limitåˆ†é¡µ-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¡µç </span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// æ¯é¡µæ˜¾ç¤ºè®°å½•æ¡æ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">        <span class="comment">// èµ·å§‹ä¸‹æ ‡</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">startIndex</span> <span class="operator">=</span> (pageNum - <span class="number">1</span>) * pageSize;</span><br><span class="line"></span><br><span class="line">        List&lt;Car&gt; cars = mapper.selectAllByPage(startIndex, pageSize);</span><br><span class="line">        cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line"></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/20251024220415.png"></div></div><p>è·å–æ•°æ®ä¸éš¾ï¼Œéš¾çš„æ˜¯è·å–åˆ†é¡µç›¸å…³çš„æ•°æ®æ¯”è¾ƒéš¾ã€‚å¯ä»¥å€ŸåŠ©mybatisçš„PageHelperæ’ä»¶ã€‚</p><h2 id="PageHelperæ’ä»¶">PageHelperæ’ä»¶</h2><p>ä½¿ç”¨PageHelperæ’ä»¶è¿›è¡Œåˆ†é¡µï¼Œæ›´åŠ çš„ä¾¿æ·ã€‚</p><ul><li>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒæ­¥ï¼šåœ¨mybatis-config.xmlæ–‡ä»¶ä¸­é…ç½®æ’ä»¶</li></ul><p>typeAliasesæ ‡ç­¾ä¸‹é¢è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;selectAll&quot;</span> resultType=<span class="string">&quot;Car&quot;</span>&gt;</span><br><span class="line">  select * from t_car</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><div class="note info no-icon flat"><p>å…³é”®ç‚¹ï¼š</p><ul><li>åœ¨æŸ¥è¯¢è¯­å¥ä¹‹å‰å¼€å¯åˆ†é¡µåŠŸèƒ½ã€‚</li><li>åœ¨æŸ¥è¯¢è¯­å¥ä¹‹åå°è£…PageInfoå¯¹è±¡ã€‚ï¼ˆPageInfoå¯¹è±¡å°†æ¥ä¼šå­˜å‚¨åˆ°requeståŸŸå½“ä¸­ã€‚åœ¨é¡µé¢ä¸Šå±•ç¤ºã€‚ï¼‰</li></ul></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPageHelper</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å¯åˆ†é¡µ</span></span><br><span class="line">    PageHelper.startPage(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</span></span><br><span class="line">    List&lt;Car&gt; cars = mapper.selectAll();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–åˆ†é¡µä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    PageInfo&lt;Car&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(cars, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(pageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><blockquote><p>PageInfo{pageNum=2, pageSize=2, size=2, startRow=3, endRow=4, total=6, pages=3, list=Page{count=true, pageNum=2, pageSize=2, startRow=2, endRow=4, total=6, pages=3, reasonable=false, pageSizeZero=false}[Car{id=86, carNum=â€˜1234â€™, brand=â€˜ä¸°ç”°éœ¸é“â€™, guidePrice=50.5, produceTime=â€˜2020-10-11â€™, carType=â€˜ç‡ƒæ²¹è½¦â€™}, Car{id=87, carNum=â€˜1234â€™, brand=â€˜ä¸°ç”°éœ¸é“â€™, guidePrice=50.5, produceTime=â€˜2020-10-11â€™, carType=â€˜ç‡ƒæ²¹è½¦â€™}], prePage=1, nextPage=3, isFirstPage=false, isLastPage=false, hasPreviousPage=true, hasNextPage=true, navigatePages=5, navigateFirstPage=1, navigateLastPage=3, navigatepageNums=[1, 2, 3]}</p></blockquote><p>å¯¹æ‰§è¡Œç»“æœè¿›è¡Œæ ¼å¼åŒ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&#123;</span><br><span class="line">  pageNum=2, pageSize=2, size=2, startRow=3, endRow=4, total=6, pages=3, </span><br><span class="line">  list=Page&#123;count=true, pageNum=2, pageSize=2, startRow=2, endRow=4, total=6, pages=3, reasonable=false, pageSizeZero=false&#125;</span><br><span class="line">  [Car&#123;id=86, carNum=&#x27;1234&#x27;, brand=&#x27;ä¸°ç”°éœ¸é“&#x27;, guidePrice=50.5, produceTime=&#x27;2020-10-11&#x27;, carType=&#x27;ç‡ƒæ²¹è½¦&#x27;&#125;, </span><br><span class="line">  Car&#123;id=87, carNum=&#x27;1234&#x27;, brand=&#x27;ä¸°ç”°éœ¸é“&#x27;, guidePrice=50.5, produceTime=&#x27;2020-10-11&#x27;, carType=&#x27;ç‡ƒæ²¹è½¦&#x27;&#125;], </span><br><span class="line">  prePage=1, nextPage=3, isFirstPage=false, isLastPage=false, hasPreviousPage=true, hasNextPage=true, </span><br><span class="line">  navigatePages=5, navigateFirstPage=1, navigateLastPage=3, navigatepageNums=[1, 2, 3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>MyBatisçš„æ³¨è§£å¼å¼€å‘</h1><p>mybatisä¸­ä¹Ÿæä¾›äº†æ³¨è§£å¼å¼€å‘æ–¹å¼ï¼Œé‡‡ç”¨æ³¨è§£å¯ä»¥å‡å°‘Sqlæ˜ å°„æ–‡ä»¶çš„é…ç½®ã€‚</p><p>å®˜æ–¹è¯´æ˜ï¼š</p><blockquote><p>ä½¿ç”¨æ³¨è§£æ¥æ˜ å°„ç®€å•è¯­å¥ä¼šä½¿ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œä½†å¯¹äºç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼ŒJava æ³¨è§£ä¸ä»…åŠ›ä¸ä»å¿ƒï¼Œè¿˜ä¼šè®©ä½ æœ¬å°±å¤æ‚çš„ SQL è¯­å¥æ›´åŠ æ··ä¹±ä¸å ªã€‚ å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åšä¸€äº›å¾ˆå¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ç”¨ XML æ¥æ˜ å°„è¯­å¥ã€‚</p></blockquote><div class="note info no-icon flat"><p>åŸåˆ™ï¼šç®€å•sqlå¯ä»¥æ³¨è§£ã€‚å¤æ‚sqlä½¿ç”¨xmlã€‚</p></div><h2 id="Insert">@Insert</h2><div class="tabs" id="insert"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#insert-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#insert-2">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="insert-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(value=&quot;insert into t_car values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Car car)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="insert-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;1112&quot;</span>, <span class="string">&quot;å¡ç½—æ‹‰&quot;</span>, <span class="number">30.0</span>, <span class="string">&quot;2000-10-10&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹è½¦&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.insert(car);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Delete">@Delete</h2><div class="tabs" id="delete"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#delete-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#delete-2">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="delete-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Delete(&quot;delete from t_car where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="delete-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line">    mapper.deleteById(<span class="number">89L</span>);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Update">@Update</h2><div class="tabs" id="updata"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#updata-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#updata-2">æµ‹è¯•ä»£ç </button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="updata-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Update(&quot;update t_car set car_num=#&#123;carNum&#125;,brand=#&#123;brand&#125;,guide_price=#&#123;guidePrice&#125;,produce_time=#&#123;produceTime&#125;,car_type=#&#123;carType&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">update</span><span class="params">(Car car)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="updata-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="number">88L</span>,<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;å‡¯ç¾ç‘&quot;</span>, <span class="number">30.0</span>,<span class="string">&quot;2000-11-11&quot;</span>, <span class="string">&quot;æ–°èƒ½æº&quot;</span>);</span><br><span class="line">    mapper.update(car);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Select">@Select</h2><div class="tabs" id="select"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#select-1">CarMapperæ¥å£</button></li><li class="tab"><button type="button" data-href="#select-2">æµ‹è¯•ç¨‹åº</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="select-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from t_car where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;id&quot;, property = &quot;id&quot;, id = true),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;car_num&quot;, property = &quot;carNum&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;brand&quot;, property = &quot;brand&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;guide_price&quot;, property = &quot;guidePrice&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;produce_time&quot;, property = &quot;produceTime&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;car_type&quot;, property = &quot;carType&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line">Car <span class="title function_">selectById</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="select-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">CarMapper</span> <span class="variable">carMapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> carMapper.selectById(<span class="number">88L</span>);</span><br><span class="line">    System.out.println(car);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></article><div class="tag_share"><div class="post-meta__tag-list"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/10/28/SSM-%E9%BB%91%E9%A9%AC-SSM%E6%95%B4%E5%90%88/"><img class="prev-cover" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/wallhaven-og53e7.jpg" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2025/10/28/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"><img class="next-cover" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/wallhaven-og53e7.jpg" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å¸¸ç”¨é…ç½®æ–‡ä»¶</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:700">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatiså…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JDBC%E4%B8%8D%E8%B6%B3"><span class="toc-text">JDBCä¸è¶³</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3MyBatis"><span class="toc-text">äº†è§£MyBatis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">MyBatiså…¥é—¨ç¨‹åº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5JUnit"><span class="toc-text">å¼•å…¥JUnit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6logback"><span class="toc-text">å¼•å…¥æ—¥å¿—æ¡†æ¶logback</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85SqlSessionUtil"><span class="toc-text">å°è£…SqlSessionUtil</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">ä½¿ç”¨MyBatiså®ŒæˆCRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#insert%EF%BC%88Create%EF%BC%89"><span class="toc-text">insertï¼ˆCreateï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#delete%EF%BC%88Delete%EF%BC%89"><span class="toc-text">deleteï¼ˆDeleteï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#update%EF%BC%88Update%EF%BC%89"><span class="toc-text">updateï¼ˆUpdateï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select%EF%BC%88Retrieve%EF%BC%89"><span class="toc-text">selectï¼ˆRetrieveï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="toc-text">æŸ¥è¯¢ä¸€æ¡æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%A4%9A%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="toc-text">æŸ¥è¯¢å¤šæ¡æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mapper%E7%9A%84namespace"><span class="toc-text">Mapperçš„namespace</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#environment"><span class="toc-text">environment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transactionManager"><span class="toc-text">transactionManager</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dataSource"><span class="toc-text">dataSource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-properties"><span class="toc-text">4.4 properties</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-mapper"><span class="toc-text">4.5 mapper</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">äº”ã€æ‰‹å†™MyBatisæ¡†æ¶ï¼ˆæŒæ¡åŸç†ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-dom4j%E8%A7%A3%E6%9E%90XML%E6%96%87%E4%BB%B6"><span class="toc-text">5.1 dom4jè§£æXMLæ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-GodBatis"><span class="toc-text">5.2 GodBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9AIDEA%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="toc-text">ç¬¬ä¸€æ­¥ï¼šIDEAä¸­åˆ›å»ºæ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%B5%84%E6%BA%90%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%8C%E6%96%B9%E4%BE%BF%E8%8E%B7%E5%8F%96%E6%8C%87%E5%90%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-text">ç¬¬äºŒæ­¥ï¼šèµ„æºå·¥å…·ç±»ï¼Œæ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%AE%9A%E4%B9%89SqlSessionFactoryBuilder%E7%B1%BB"><span class="toc-text">ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰SqlSessionFactoryBuilderç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%88%86%E6%9E%90SqlSessionFactory%E7%B1%BB%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B1%9E%E6%80%A7"><span class="toc-text">ç¬¬å››æ­¥ï¼šåˆ†æSqlSessionFactoryç±»ä¸­æœ‰å“ªäº›å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%AE%9A%E4%B9%89GodJDBCTransaction"><span class="toc-text">ç¬¬äº”æ­¥ï¼šå®šä¹‰GodJDBCTransaction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E9%9C%80%E8%A6%81%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%8C%E5%AE%9A%E4%B9%89GodUNPOOLEDDataSource"><span class="toc-text">ç¬¬å…­æ­¥ï¼šäº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºï¼Œå®šä¹‰GodUNPOOLEDDataSource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E5%AE%9A%E4%B9%89GodMappedStatement"><span class="toc-text">ç¬¬ä¸ƒæ­¥ï¼šå®šä¹‰GodMappedStatement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E5%AE%8C%E5%96%84SqlSessionFactory%E7%B1%BB"><span class="toc-text">ç¬¬å…«æ­¥ï¼šå®Œå–„SqlSessionFactoryç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E6%AD%A5%EF%BC%9A%E5%AE%8C%E5%96%84SqlSessionFactoryBuilder%E4%B8%AD%E7%9A%84build%E6%96%B9%E6%B3%95"><span class="toc-text">ç¬¬ä¹æ­¥ï¼šå®Œå–„SqlSessionFactoryBuilderä¸­çš„buildæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E6%AD%A5%EF%BC%9A%E5%9C%A8SqlSessionFactory%E4%B8%AD%E6%B7%BB%E5%8A%A0openSession%E6%96%B9%E6%B3%95"><span class="toc-text">ç¬¬åæ­¥ï¼šåœ¨SqlSessionFactoryä¸­æ·»åŠ openSessionæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99SqlSession%E7%B1%BB%E4%B8%ADcommit-rollback-close%E6%96%B9%E6%B3%95"><span class="toc-text">ç¬¬åä¸€æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­commit rollback closeæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99SqlSession%E7%B1%BB%E4%B8%AD%E7%9A%84insert%E6%96%B9%E6%B3%95"><span class="toc-text">ç¬¬åäºŒæ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„insertæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99SqlSession%E7%B1%BB%E4%B8%AD%E7%9A%84selectOne%E6%96%B9%E6%B3%95"><span class="toc-text">ç¬¬åä¸‰æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„selectOneæ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-GodBatis%E4%BD%BF%E7%94%A8Maven%E6%89%93%E5%8C%85"><span class="toc-text">5.3 GodBatisä½¿ç”¨Mavenæ‰“åŒ…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E4%BD%BF%E7%94%A8GodBatis"><span class="toc-text">5.4 ä½¿ç”¨GodBatis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E6%80%BB%E7%BB%93MyBatis%E6%A1%86%E6%9E%B6%E7%9A%84%E9%87%8D%E8%A6%81%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">5.5 æ€»ç»“MyBatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">åœ¨WEBä¸­åº”ç”¨MyBatisï¼ˆä½¿ç”¨MVCæ¶æ„æ¨¡å¼ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E6%8F%8F%E8%BF%B0"><span class="toc-text">éœ€æ±‚æè¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span class="toc-text">æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">å®ç°æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2index-html"><span class="toc-text">ç¬¬äºŒæ­¥ï¼šç¼–å†™å‰ç«¯é¡µé¢index.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%8C%85%E7%BB%93%E6%9E%84"><span class="toc-text">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºé¡¹ç›®çš„åŒ…ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-text">ç¬¬å››æ­¥ï¼šå®šä¹‰å®ä½“ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99DAO%E5%B1%82%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-text">ç¬¬äº”æ­¥ï¼šç¼–å†™DAOå±‚æ¥å£å’Œå®ç°ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99SQL%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-text">ç¬¬å…­æ­¥ï¼šç¼–å†™SQLæ˜ å°„æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99Service%E5%B1%82%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-text">ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™Serviceå±‚æ¥å£å’Œå®ç°ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99AccountController"><span class="toc-text">ç¬¬å…«æ­¥ï¼šç¼–å†™AccountController</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E5%AF%B9%E8%B1%A1%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%BB%A5%E5%8F%8A%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-text">MyBatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis%E6%A0%B8%E5%BF%83%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">MyBatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SqlSessionFactoryBuilder"><span class="toc-text">SqlSessionFactoryBuilder</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SqlSessionFactory"><span class="toc-text">SqlSessionFactory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SqlSession"><span class="toc-text">SqlSession</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-text">äº‹åŠ¡é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%BD%93%E5%89%8D%E7%A8%8B%E5%BA%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">ä½¿ç”¨javassistç”Ÿæˆç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Javassist%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">Javassistçš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Javassist%E7%94%9F%E6%88%90DaoImpl%E7%B1%BB"><span class="toc-text">ä½¿ç”¨Javassistç”ŸæˆDaoImplç±»</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatiså°æŠ€å·§</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%92%8C"><span class="toc-text">#{}å’Œ${}</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">#{}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-2"><span class="toc-text">${}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E5%BF%85%E9%A1%BB%E4%BD%BF%E7%94%A8"><span class="toc-text">ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨${}</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E6%8B%BC%E6%8E%A5"><span class="toc-text">å…³é”®å­—æ‹¼æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%BC%E6%8E%A5%E8%A1%A8%E5%90%8D"><span class="toc-text">æ‹¼æ¥è¡¨å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-text">æ‰¹é‡åˆ é™¤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-text">æ¨¡ç³ŠæŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">ä½¿ç”¨${}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-2"><span class="toc-text">ä½¿ç”¨#{}</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#typeAliases"><span class="toc-text">typeAliases</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9AtypeAlias"><span class="toc-text">ç¬¬ä¸€ç§æ–¹å¼ï¼štypeAlias</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9Apackage"><span class="toc-text">ç¬¬äºŒç§æ–¹å¼ï¼špackage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8SQL%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E4%B8%AD%E7%94%A8%E4%B8%80%E4%B8%8B"><span class="toc-text">åœ¨SQLæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mappers"><span class="toc-text">mappers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#resource"><span class="toc-text">resource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#url"><span class="toc-text">url</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#class"><span class="toc-text">class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#package"><span class="toc-text">package</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#idea%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A8%A1%E6%9D%BF"><span class="toc-text">ideaé…ç½®æ–‡ä»¶æ¨¡æ¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E6%97%B6%E8%8E%B7%E5%8F%96%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E7%9A%84%E4%B8%BB%E9%94%AE"><span class="toc-text">æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatiså‚æ•°å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E7%AE%80%E5%8D%95%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-text">å•ä¸ªç®€å•ç±»å‹å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map%E5%8F%82%E6%95%B0"><span class="toc-text">Mapå‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%8F%82%E6%95%B0"><span class="toc-text">å®ä½“ç±»å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%8F%82%E6%95%B0"><span class="toc-text">å¤šå‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Param%E6%B3%A8%E8%A7%A3%EF%BC%88%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0%EF%BC%89"><span class="toc-text">@Paramæ³¨è§£ï¼ˆå‘½åå‚æ•°ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Param%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">@Paramæºç åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-text">ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9ECar%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-text">è¿”å›Carå®ä½“ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9EList-Car"><span class="toc-text">è¿”å›List</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9EMap"><span class="toc-text">è¿”å›Map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9EList-Map"><span class="toc-text">è¿”å›List</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resultMap%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84"><span class="toc-text">resultMapç»“æœæ˜ å°„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8resultMap%E8%BF%9B%E8%A1%8C%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84"><span class="toc-text">ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%E9%A9%BC%E5%B3%B0%E5%91%BD%E5%90%8D%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84"><span class="toc-text">æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">åŠ¨æ€SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if%E6%A0%87%E7%AD%BE"><span class="toc-text">ifæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#where%E6%A0%87%E7%AD%BE"><span class="toc-text">whereæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#trim%E6%A0%87%E7%AD%BE"><span class="toc-text">trimæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set%E6%A0%87%E7%AD%BE"><span class="toc-text">setæ ‡ç­¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#choose-when-otherwise"><span class="toc-text">choose when otherwise</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach%E6%A0%87%E7%AD%BE"><span class="toc-text">foreachæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4-2"><span class="toc-text">æ‰¹é‡åˆ é™¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0"><span class="toc-text">æ‰¹é‡æ·»åŠ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%A0%87%E7%AD%BE%E4%B8%8Einclude%E6%A0%87%E7%AD%BE"><span class="toc-text">sqlæ ‡ç­¾ä¸includeæ ‡ç­¾</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-2"><span class="toc-text">ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E4%B8%80"><span class="toc-text">å¤šå¯¹ä¸€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A%E7%BA%A7%E8%81%94%E5%B1%9E%E6%80%A7%E6%98%A0%E5%B0%84"><span class="toc-text">ç¬¬ä¸€ç§æ–¹å¼ï¼šçº§è”å±æ€§æ˜ å°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9Aassociation"><span class="toc-text">ç¬¬äºŒç§æ–¹å¼ï¼šassociation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">ç¬¬ä¸‰ç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-text">13.2 å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-text">13.3 ä¸€å¯¹å¤š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9Acollection"><span class="toc-text">ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-text">13.4 ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisçš„ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-text">ä¸€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-text">äºŒçº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E9%9B%86%E6%88%90EhCache"><span class="toc-text">MyBatisé›†æˆEhCache</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisé€†å‘å·¥ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%94%9F%E6%88%90"><span class="toc-text">é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E8%BF%90%E8%A1%8C%E6%8F%92%E4%BB%B6"><span class="toc-text">ç¬¬å››æ­¥ï¼šè¿è¡Œæ’ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="toc-text">æµ‹è¯•é€†å‘å·¥ç¨‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisä½¿ç”¨PageHelper</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#limit%E5%88%86%E9%A1%B5"><span class="toc-text">limitåˆ†é¡µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PageHelper%E6%8F%92%E4%BB%B6"><span class="toc-text">PageHelperæ’ä»¶</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MyBatisçš„æ³¨è§£å¼å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Insert"><span class="toc-text">@Insert</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete"><span class="toc-text">@Delete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update"><span class="toc-text">@Update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Select"><span class="toc-text">@Select</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color:transparent"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-linksf"><li><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="FomalhautğŸ¥"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div></div></div></div><div class="copyright"><span><b>&copy;2025</b></span><span><b>&nbsp;&nbsp;By SilvanğŸ³</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™æ•°æ®åˆ†æå¾—ç›Šäº51laæŠ€æœ¯æ”¯æŒ"><img src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src="https://sourcebucket.s3.ladydaily.com/badge/èŒICPå¤‡-20226665-fe1384.svg" alt=""></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src="https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src="https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><span class="icon-text">â‡„</span></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><span class="icon-text">ğŸ–±ï¸</span></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><span class="icon-text">âš™</span></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><span class="icon-text">ğŸ”—</span></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="icon-text">â†‘</span><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><span class="icon-text">â†“</span></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><svg class="icon"><use xlink:href="#icon-mulu1"></use></svg></a><a class="rightMenu-item" href="javascript:window.history.forward();"><svg class="icon"><use xlink:href="#icon-eye"></use></svg></a><a class="rightMenu-item" href="javascript:window.location.reload();"><svg class="icon"><use xlink:href="#icon-gengxin1"></use></svg></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><svg class="icon"><use xlink:href="#icon-tuding"></use></svg></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><svg class="icon"><use xlink:href="#icon-charuword"></use></svg><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><svg class="icon"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><svg class="icon"><use xlink:href="#icon-tongxunlu"></use></svg><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><svg class="icon"><use xlink:href="#icon-charuword"></use></svg><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><svg class="icon"><use xlink:href="#icon-pinglun1"></use></svg><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><svg class="icon"><use xlink:href="#icon-charuword"></use></svg><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><svg class="icon"><use xlink:href="#icon-eye"></use></svg><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><svg class="icon"><use xlink:href="#icon-tongxunlu"></use></svg><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><svg class="icon"><use xlink:href="#icon-charuword"></use></svg><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><svg class="icon"><use xlink:href="#icon-tupian1"></use></svg><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><svg class="icon"><use xlink:href="#icon-eye"></use></svg><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><svg class="icon"><use xlink:href="#icon-charuword"></use></svg><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><svg class="icon"><use xlink:href="#icon-fenlei"></use></svg><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><svg t="1758265847868" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5939" width="15.5" height="15.6"><path d="M932.608 68.928l22.656 22.656a16 16 0 0 1 0 22.592L488.064 581.248a382.464 382.464 0 0 0 247.936 90.752 383.296 383.296 0 0 0 143.936-27.904c26.688-10.816 57.408 11.904 46.4 38.528-1.92 4.608-3.84 9.216-5.952 13.76a448.064 448.064 0 0 1-701.696 154.24L113.92 955.52a16 16 0 0 1-22.592 0l-22.656-22.656a16 16 0 0 1 0-22.656l114.304-114.24.512-.64 91.008-91.008 1.088-1.024 80-80A192 192 0 0 1 623.36 355.52l80-80a16.768 16.768 0 0 1 1.088-1.088l90.496-90.56 1.088-.96 113.92-113.92a16 16 0 0 1 22.656 0zM442.752 626.688l-178.56 178.56A382.464 382.464 0 0 0 512 896a383.68 383.68 0 0 0 318.976-170.112 449.28 449.28 0 0 1-388.288-99.2zM512.064 384a128 128 0 0 0-110.272 193.088l175.36-175.36A127.36 127.36 0 0 0 512.064 384zM208 480a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-128A16 16 0 0 1 64 528v-32a16 16 0 0 1 16-16h128zm21.12-296.128 90.56 90.56a16 16 0 0 1 0 22.592l-22.656 22.656a16 16 0 0 1-22.592 0L184 229.12a16 16 0 0 1 0-22.656l22.592-22.656a16 16 0 0 1 22.656 0zM528.128 64a16 16 0 0 1 16 16v128a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16v-128A16 16 0 0 1 496 64h32z" p-id="5940"></path></svg><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><svg class="icon"><use xlink:href="#icon-rili"></use></svg><span>é˜…è¯»æ¨¡å¼</span></a><a class="rightMenu-item" href="/personal/about/"><svg class="icon"><use xlink:href="#icon-gonggao"></use></svg><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><svg class="icon"><use xlink:href="#icon-shezhi"></use></svg><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><svg class="icon"><use xlink:href="#icon-eye"></use></svg><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><svg class="icon"><use xlink:href="#icon-shujutongji2"></use></svg><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="/js/copy-code.js"></script><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="//at.alicdn.com/t/c/font_5002734_s5p2h2ns8bq.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="snow"></canvas><canvas id="sakura"></canvas><script defer src="/js/fomal.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer data-pjax src="/js/tabs-rebind.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer data-pjax src="/js/readPercent.js"></script><script defer data-pjax src="/js/anti-shake.js"></script><script src="/js/share.js"></script><script defer src="/js/runtime.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async data-pjax src="/js/txmap.js"></script><script async src="/js/console.js"></script><script async src="/js/title.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='all'|| 'all' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://silvan.chat/categories/java/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ Silvanã®JavaåŸºç¡€ç¬”è®° (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://silvan.chat/categories/Spring/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ Silvanã®SpringåŸºç¡€ç¬”è®° (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://silvan.chat/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style><style></style><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2025/10/29/ç½‘ç«™/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/wallhaven-og53e7.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2025/10/29/ç½‘ç«™/&quot;);" href="javascript:void(0);" alt="">å°ç ´ç«™æ¦‚è¿°</a><div class="blog-slider__text">è¿™åªæ˜¯ä¸€ä¸ªåˆæ­¥æ¥è§¦è®¡ç®—æœºçš„æ‡µæ‡‚å¤§å­¦ç”Ÿçš„å°ç«™ï¼Œç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±çš„å­¦ä¹ ç¬”è®°~~~</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2025/10/29/ç½‘ç«™/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2025/08/23/linux-linux/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/76ae7180362bb4cf792306a246c610c2eef1ba61635774-HzGqdy.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-08-23</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2025/08/23/linux-linux/&quot;);" href="javascript:void(0);" alt="">LinuxåŸºç¡€å‘½ä»¤</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2025/08/23/linux-linux/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2025/10/12/Springboot-SpringBoot2-é»‘é©¬/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://raw.githubusercontent.com/silvan2077/markdown_pic/main/Picgo/610377944fb31f01071d8d82782eedf4.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-12</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2025/10/12/Springboot-SpringBoot2-é»‘é©¬/&quot;);" href="javascript:void(0);" alt="">SpringBoot2</a><div class="blog-slider__text">SpringBoot2é»‘é©¬è¯¾ç¨‹ä»‹ç»</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2025/10/12/Springboot-SpringBoot2-é»‘é©¬/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2025/08/22/markdownä¸å¤–æŒ‚æ ‡ç­¾-markdownä¸å¤–æŒ‚æ ‡ç­¾/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://konachan.net/data/preview/50/d1/50d198aae2061ff0c46331b3a253565d.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-08-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2025/08/22/markdownä¸å¤–æŒ‚æ ‡ç­¾-markdownä¸å¤–æŒ‚æ ‡ç­¾/&quot;);" href="javascript:void(0);" alt="">Markdownä¸å¤–æŒ‚æ ‡ç­¾</a><div class="blog-slider__text">ğŸ¥§æ±‡æ€»äº†Markdownå’Œå¤–æŒ‚æ ‡ç­¾çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä½œä¸ºæŸ¥è¯¢æ–‡æ¡£ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2025/08/22/markdownä¸å¤–æŒ‚æ ‡ç­¾-markdownä¸å¤–æŒ‚æ ‡ç­¾/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2025/10/28/å¿«é€Ÿå…¥é—¨/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://konachan.net/data/preview/2f/6c/2f6c5f754d00deb887adc4525151582c.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2025/10/28/å¿«é€Ÿå…¥é—¨/&quot;);" href="javascript:void(0);" alt="">hexoå¿«é€Ÿå…¥é—¨</a><div class="blog-slider__text">å¿«é€Ÿå…¥é—¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2025/10/28/å¿«é€Ÿå…¥é—¨/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"live2d-widget-model-wanko"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>